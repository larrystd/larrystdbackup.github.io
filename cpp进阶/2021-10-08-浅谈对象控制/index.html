<!DOCTYPE html><html lang="zh-CN"><head><!-- hexo injector head_begin start --><link href="/css/tag-common/index.css" rel="stylesheet"/><!-- hexo injector head_begin end --><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#6200ee"><meta name="author" content="larry"><meta name="copyright" content="larry"><meta name="generator" content="Hexo 5.4.0"><meta name="theme" content="hexo-theme-yun"><title>æµ…è°ˆå¯¹è±¡æ§åˆ¶â€”â€”AOPå’Œåå°„ | æ‹‰ç‘å›ã®å°çª</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.25/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_dxory92pb0h.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link class="aplayer-style-marker" rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script class="aplayer-script-marker" src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" defer></script><script class="meting-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js" defer></script><script>document.addEventListener(
  "pjax:success",
  function() {
    if (window.aplayers) {
      loadMeting();
    }
  },
  !1
);
</script><link id="light-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism.css" media="(prefers-color-scheme: light)"><link id="dark-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism-tomorrow.css" media="(prefers-color-scheme: dark)"><link rel="icon" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#6200ee"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"larrystd.github.io","root":"/","title":"æ‹‰ç‘å›ã®å°çª","version":"1.6.3","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"æœç´¢...","empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹: ${query}","hits":"æ‰¾åˆ° ${hits} æ¡ç»“æœ","hits_time":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"algolia":{"appID":"CJXXAGRCYN","apiKey":"ae1966d2aeab22bf9335679f45d2cd9a","indexName":"my-hexo-blog","hits":{"per_page":8}},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/utils.js"></script><script src="/js/hexo-theme-yun.js"></script><link rel="alternate" href="/atom.xml" title="æ‹‰ç‘å›ã®å°çª" type="application/atom+xml"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-1LL0D86CY9"></script><script>if (CONFIG.hostname === location.hostname) {
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-1LL0D86CY9');
}</script><script data-ad-client="ca-pub-2245427233262012" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-M9KWR9L');</script><!-- End Google Tag Manager --><meta name="description" content="å­¦ä¹ è®¡ç®—æœºè¿‡ç¨‹è€æœ‰ä¸€äº›æ‰€è°“é«˜å¤§ä¸Šçš„åè¯, ä½†æ˜¯å¦‚æœç†è§£äº†ä¼šå‘ç°å¾ˆç®€å•ã€‚æ¯”å¦‚IOCæ§åˆ¶åè½¬, åæ­£ä¸è®ºä»€ä¹ˆåè¯, éƒ½æ¯”æ•°å­¦ç®€å•çš„å¤šã€‚æ‰€ä»¥ä¸è¦æƒ§æ€•å®ƒã€‚  è¿™ç¯‡æ–‡ç« æƒ³è®¨è®ºä¸‹java springç­‰æ¡†æ¶ä¸€äº›ç‰¹æ®Šæ§åˆ¶å¯¹è±¡çš„é€»è¾‘, ä»¥åŠæ˜¯å¦é€‚ç”¨äºC++ã€‚ springSpringçš„ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µæ˜¯IOCï¼ˆæ§åˆ¶åè½¬ï¼‰å’ŒAOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ã€‚  IOCï¼ˆæ§åˆ¶ç¿»è½¬ï¼‰æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³å¤æ‚ç³»ç»Ÿå¯¹è±¡">
<meta property="og:type" content="article">
<meta property="og:title" content="æµ…è°ˆå¯¹è±¡æ§åˆ¶â€”â€”AOPå’Œåå°„">
<meta property="og:url" content="https://larrystd.github.io/cpp%E8%BF%9B%E9%98%B6/2021-10-08-%E6%B5%85%E8%B0%88%E5%AF%B9%E8%B1%A1%E6%8E%A7%E5%88%B6/index.html">
<meta property="og:site_name" content="æ‹‰ç‘å›ã®å°çª">
<meta property="og:description" content="å­¦ä¹ è®¡ç®—æœºè¿‡ç¨‹è€æœ‰ä¸€äº›æ‰€è°“é«˜å¤§ä¸Šçš„åè¯, ä½†æ˜¯å¦‚æœç†è§£äº†ä¼šå‘ç°å¾ˆç®€å•ã€‚æ¯”å¦‚IOCæ§åˆ¶åè½¬, åæ­£ä¸è®ºä»€ä¹ˆåè¯, éƒ½æ¯”æ•°å­¦ç®€å•çš„å¤šã€‚æ‰€ä»¥ä¸è¦æƒ§æ€•å®ƒã€‚  è¿™ç¯‡æ–‡ç« æƒ³è®¨è®ºä¸‹java springç­‰æ¡†æ¶ä¸€äº›ç‰¹æ®Šæ§åˆ¶å¯¹è±¡çš„é€»è¾‘, ä»¥åŠæ˜¯å¦é€‚ç”¨äºC++ã€‚ springSpringçš„ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µæ˜¯IOCï¼ˆæ§åˆ¶åè½¬ï¼‰å’ŒAOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ã€‚  IOCï¼ˆæ§åˆ¶ç¿»è½¬ï¼‰æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³å¤æ‚ç³»ç»Ÿå¯¹è±¡">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://larrystd.github.io/assets/images/cpp/6.png">
<meta property="og:image" content="https://larrystd.github.io/assets/images/cpp/7.png">
<meta property="article:published_time" content="2021-10-07T16:00:00.000Z">
<meta property="article:modified_time" content="2021-10-07T16:00:00.000Z">
<meta property="article:author" content="larry">
<meta property="article:tag" content="cpp">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://larrystd.github.io/assets/images/cpp/6.png"><script src="/js/ui/mode.js"></script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="æ–‡ç« ç›®å½•"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="ç«™ç‚¹æ¦‚è§ˆ"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="larry"><img width="96" loading="lazy" src="/images/avatar.jpg" alt="larry"><span class="site-author-status" title="Looking for you.">ğŸŒ‘</span></a><div class="site-author-name"><a href="/about/">larry</a></div><a class="site-name" href="/about/site.html">æ‹‰ç‘å›ã®å°çª</a><sub class="site-subtitle"></sub><div class="site-desciption">æ¯å¤©éƒ½æ˜¯æ–°çš„ä¸€å¤©å‘¢</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="é¦–é¡µ"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="å½’æ¡£"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">86</span></a></div><div class="site-state-item"><a href="/categories/" title="åˆ†ç±»"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">13</span></a></div><div class="site-state-item"><a href="/tags/" title="æ ‡ç­¾"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">42</span></a></div><a class="site-state-item hty-icon-button" href="/about/#comment" title="ç•™è¨€æ¿"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-clipboard-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="/atom.xml" title="RSS" target="_blank" style="color:orange"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rss-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/larrystd" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.zhihu.com/people/bu-qu-dou-yin-bu-gai-ming" title="çŸ¥ä¹" target="_blank" style="color:#0084FF"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhihu-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="Venray.Kong@outlook.com" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://travellings.link" title="Travelling" target="_blank" style="color:var(--hty-text-color)"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-train-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="æˆ‘çš„å°ä¼™ä¼´ä»¬" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a><a class="links-item hty-icon-button" href="/girls/" title="å–œæ¬¢çš„å¥³å­©å­" style="color:hotpink"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-women-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#spring"><span class="toc-number">1.</span> <span class="toc-text">spring</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">1.1.</span> <span class="toc-text">ä½“ç³»ç»“æ„</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#C-%E4%BB%BF%E5%86%99Java%E7%9A%84%E5%8F%8D%E5%B0%84"><span class="toc-number">2.</span> <span class="toc-text">C++ ä»¿å†™Javaçš„åå°„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#spring%E7%9A%84bean"><span class="toc-number">3.</span> <span class="toc-text">springçš„bean</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#C-AOP"><span class="toc-number">4.</span> <span class="toc-text">C++ AOP</span></a></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://larrystd.github.io/cpp%E8%BF%9B%E9%98%B6/2021-10-08-%E6%B5%85%E8%B0%88%E5%AF%B9%E8%B1%A1%E6%8E%A7%E5%88%B6/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="larry"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="æ‹‰ç‘å›ã®å°çª"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">æµ…è°ˆå¯¹è±¡æ§åˆ¶â€”â€”AOPå’Œåå°„<a class="post-edit-link" href="https://github.com/larrystd/larrystd.github.io/tree/hexo/source/_posts/cppè¿›é˜¶/2021-10-08-æµ…è°ˆå¯¹è±¡æ§åˆ¶.md" target="_blank" title="ç¼–è¾‘" rel="noopener"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-edit-line"></use></svg></a></h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="åˆ›å»ºæ—¶é—´ï¼š2021-10-08 00:00:00" itemprop="dateCreated datePublished" datetime="2021-10-08T00:00:00+08:00">2021-10-08</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="æœ¬æ–‡å­—æ•°"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-file-word-line"></use></svg></span> <span title="æœ¬æ–‡å­—æ•°">3.4k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="é˜…è¯»æ—¶é•¿"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-timer-line"></use></svg></span> <span title="é˜…è¯»æ—¶é•¿">15m</span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/cpp-advanced/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">cpp advanced</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/cpp/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">cpp</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#6200ee;"><blockquote>
<p>å­¦ä¹ è®¡ç®—æœºè¿‡ç¨‹è€æœ‰ä¸€äº›æ‰€è°“é«˜å¤§ä¸Šçš„åè¯, ä½†æ˜¯å¦‚æœç†è§£äº†ä¼šå‘ç°å¾ˆç®€å•ã€‚æ¯”å¦‚IOCæ§åˆ¶åè½¬, åæ­£ä¸è®ºä»€ä¹ˆåè¯, éƒ½æ¯”æ•°å­¦ç®€å•çš„å¤šã€‚æ‰€ä»¥ä¸è¦æƒ§æ€•å®ƒã€‚</p>
</blockquote>
<p>è¿™ç¯‡æ–‡ç« æƒ³è®¨è®ºä¸‹java springç­‰æ¡†æ¶ä¸€äº›ç‰¹æ®Šæ§åˆ¶å¯¹è±¡çš„é€»è¾‘, ä»¥åŠæ˜¯å¦é€‚ç”¨äºC++ã€‚</p>
<h3 id="spring"><a href="#spring" class="headerlink" title="spring"></a>spring</h3><p>Springçš„ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µæ˜¯IOCï¼ˆæ§åˆ¶åè½¬ï¼‰å’ŒAOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ã€‚</p>
<ul>
<li><p>IOCï¼ˆæ§åˆ¶ç¿»è½¬ï¼‰æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³å¤æ‚ç³»ç»Ÿå¯¹è±¡è€¦åˆåº¦å¤ªé«˜çš„é—®é¢˜ã€‚IOCæœ€å¸¸è§çš„æ–¹å¼æ˜¯DIï¼ˆä¾èµ–æ³¨å…¥, å¯¹è±¡ä¾èµ–å®¹å™¨, å®¹å™¨æ³¨å…¥ç”Ÿæˆå¯¹è±¡ï¼‰ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªå®¹å™¨ï¼Œå°†Beanç»´æŠ¤èµ·æ¥ï¼Œæ–¹ä¾¿åœ¨å…¶ä»–åœ°æ–¹ç›´æ¥ä½¿ç”¨ï¼Œè€Œä¸æ˜¯é‡æ–°newã€‚æˆ‘ç†è§£çš„ä¸€èˆ¬æ˜¯é€šè¿‡XMLé…ç½®æ–‡ä»¶, å†™æ˜å¯¹è±¡çš„æˆå‘˜, æ–¹æ³•ä¾èµ–å…³ç³», IOCå®¹å™¨ä¼šè‡ªåŠ¨é…ç½®å¯¹è±¡ä¸ç”¨ç¨‹åºå‘˜newã€‚è¿™é‡Œçš„Beanå¯ä»¥è§†ä¸ºä¸€ç§ç‰¹æ®Šçš„å¯¹è±¡, æœ‰ç‰¹å®šçš„è§„èŒƒ(æ¯”å¦‚å…·æœ‰set.., get..è¿™äº›), ç»Ÿä¸€æ ¼å¼æ–¹ä¾¿è¿›è¡Œå¤„ç†ã€‚</p>
</li>
<li><p>AOPï¼ˆAspect-OrientedProgrammingï¼Œé¢å‘æ–¹é¢ç¼–ç¨‹ï¼‰, åŸºæœ¬æ€è·¯æ˜¯å°†å…±åŒè°ƒç”¨çš„é€»è¾‘æˆ–è´£ä»»å°è£…èµ·æ¥ï¼Œä¾¿äºå‡å°‘ç³»ç»Ÿçš„é‡å¤ä»£ç (ä¾‹å¦‚å¤šä¸ªå¯¹è±¡éƒ½éœ€è¦å¼•å…¥æ—¥å¿—è¡Œä¸º, é‰´æƒ)ã€‚ä¸€ä¸ªå¯è¡Œçš„åŠæ³•æ˜¯ä½¿ç”¨ä»£ç†, å°†ä¸šåŠ¡ç›¸åŒçš„é€»è¾‘é€»è¾‘ç»ç”±ä»£ç†ç±»åˆ†å‘(ä»£ç†ç±»å¯ä»¥ç†è§£ä¸ºä¸­ä»‹)ã€‚æ¢è¨€ä¹‹, å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ å…¥ä»£ç†ç±», ä»£ç†ç±»å¯¹æ‰€æœ‰å¯¹è±¡å…ˆæ‰§è¡Œæ—¥å¿—è¡Œä¸º, å†è°ƒç”¨å¯¹è±¡æ–¹æ³•, å°±å®ç°äº†å…¬ç”¨é€»è¾‘(æ—¥å¿—)çš„é€šç”¨ã€‚ä¸€èˆ¬ä¼ å…¥å¯¹è±¡ä½¿ç”¨åå°„å­—ç¬¦ä¸², å¯ä»¥è¿è¡Œæ—¶æŒ‰éœ€è¿è¡Œå¯¹è±¡(æœ‰åå°„è¿™æ ·ç§°ä¸ºåŠ¨æ€ä»£ç†)ã€‚ä½†<strong>å•çº¯çš„AOPæ€æƒ³, å®Œå…¨å¯ä»¥ç”¨C++çš„å›è°ƒå‡½æ•°å®ç°</strong>ã€‚</p>
</li>
</ul>
<span id="more"></span>

<h4 id="ä½“ç³»ç»“æ„"><a href="#ä½“ç³»ç»“æ„" class="headerlink" title="ä½“ç³»ç»“æ„"></a>ä½“ç³»ç»“æ„</h4><p><img src="../../assets/images/cpp/6.png" alt="avatar" loading="lazy"></p>
<ul>
<li>æ ¸å¿ƒå®¹å™¨ï¼šæ ¸å¿ƒå®¹å™¨çš„ä¸»è¦ç»„ä»¶æ˜¯ BeanFactoryï¼Œå®ƒæ˜¯å·¥å‚æ¨¡å¼çš„å®ç°ã€‚BeanFactory ä½¿ç”¨æ§åˆ¶åè½¬ ï¼ˆIOCï¼‰ æ ¹æ®é…ç½®æ„å»ºå¯¹è±¡ã€‚</li>
<li>Spring contextåŒ…æ‹¬ JNDIã€EJBã€ç”µå­é‚®ä»¶ã€å›½é™…åŒ–ã€æ ¡éªŒå’Œè°ƒåº¦åŠŸèƒ½ã€‚</li>
<li>Spring AOPï¼šç»™ Spring æ¡†æ¶ç®¡ç†çš„ä»»ä½•å¯¹è±¡æ”¯æŒ AOPã€‚</li>
<li>Spring DAOï¼šJDBC DAO æŠ½è±¡å±‚æä¾›ç®¡ç†å¼‚å¸¸å¤„ç†å’Œä¸åŒæ•°æ®åº“ä¾›åº”å•†æŠ›å‡ºçš„é”™è¯¯æ¶ˆæ¯ã€‚</li>
<li>Spring ORMï¼šSpring æ¡†æ¶æ’å…¥äº†è‹¥å¹²ä¸ª ORM æ¡†æ¶</li>
<li>Spring Web æ¨¡å—ï¼šWeb ä¸Šä¸‹æ–‡æ¨¡å—å»ºç«‹åœ¨åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡æ¨¡å—ä¹‹ä¸Šï¼Œä¸ºåŸºäº Web çš„åº”ç”¨ç¨‹åºæä¾›äº†ä¸Šä¸‹æ–‡ã€‚</li>
<li>Spring MVC æ¡†æ¶ï¼šMVC æ¡†æ¶æ˜¯ä¸€ä¸ªå…¨åŠŸèƒ½çš„æ„å»º Web åº”ç”¨ç¨‹åºçš„ MVC å®ç°</li>
</ul>
<h3 id="C-ä»¿å†™Javaçš„åå°„"><a href="#C-ä»¿å†™Javaçš„åå°„" class="headerlink" title="C++ ä»¿å†™Javaçš„åå°„"></a>C++ ä»¿å†™Javaçš„åå°„</h3><p>Javaåå°„çš„ä½œç”¨æ˜¯åœ¨è¿è¡ŒæœŸç”Ÿæˆå¯¹è±¡, è¿™å¸¸å¸¸åœ¨webå¼€å‘ä¸­ä½¿ç”¨ã€‚ä¾‹å¦‚ç¨‹åºè¿è¡ŒæœŸé—´å¯ä»¥åŸºäºåˆ°æ¥çš„è¿æ¥æ¥ç”Ÿæˆå¯¹è±¡å¤„ç†, ç›¸æ¯”äºé™æ€ç”Ÿæˆå¯¹è±¡è¿™å¢åŠ äº†çµæ´»æ€§, ä¸ç”¨å¼€å§‹ä¸€ç›´åˆ›å»ºè¿™ä¸ªå¯¹è±¡è€—è´¹å¤§é‡èµ„æºã€‚å½“ç„¶, è¿™ç‰ºç‰²äº†æ•ˆç‡ã€‚</p>
<p>åå°„çš„å®ç°éœ€è¦è§£å†³ä»¥ä¸‹é—®é¢˜</p>
<ol>
<li>è¿è¡ŒæœŸåˆ›å»ºå¯¹è±¡</li>
<li>å¯¹è±¡å¯ä»¥é€šè¿‡æ¥æ”¶å­—ç¬¦ä¸²åˆ›å»º</li>
</ol>
<p>Javaå¯¹ä»¥ä¸Šæ˜¯æ”¯æŒçš„, JVMæœ¬èº«æ”¯æŒè¿è¡Œæ—¶åŸºäºå­—ç¬¦ä¸²å¯¼å…¥<code>.class</code>æ–‡ä»¶è§£æåˆ›å»ºå¯¹è±¡ã€‚ä¾‹å¦‚</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Apple</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> price<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPrice</span><span class="token punctuation">(</span><span class="token keyword">int</span> price<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws Exception<span class="token punctuation">&#123;</span>
        <span class="token comment">//æ­£å¸¸çš„è°ƒç”¨</span>
        Apple apple <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Apple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        apple<span class="token punctuation">.</span><span class="token function">setPrice</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Apple Price:"</span> <span class="token operator">+</span> apple<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//ä½¿ç”¨åå°„è°ƒç”¨</span>
        <span class="token comment">/// è¾“å…¥å­—ç¬¦ä¸²"com.chenshuyi.api.Apple"(è¡¨ç¤ºclassè·¯å¾„)</span>
        Class clz <span class="token operator">=</span> Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.chenshuyi.api.Apple"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/// è¿è¡Œæ—¶è·å–æ–¹æ³•</span>
        Method setPriceMethod <span class="token operator">=</span> clz<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"setPrice"</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Constructor appleConstructor <span class="token operator">=</span> clz<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Object appleObj <span class="token operator">=</span> appleConstructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        setPriceMethod<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>appleObj<span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Method getPriceMethod <span class="token operator">=</span> clz<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"getPrice"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Apple Price:"</span> <span class="token operator">+</span> getPriceMethod<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>appleObj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>
<p>ä»¥ä¸Š, å¯ä»¥å°†<code>Class.forName</code>çš„å­—ç¬¦ä¸²å‚æ•°ä½œä¸ºè¾“å…¥, ä¾‹å¦‚å½“æŸä¸ªè¿æ¥åˆ°æ¥åˆ™è¾“å…¥æŸä¸ªå­—ç¬¦ä¸², <code>Class.forName</code>å°±å¯ä»¥æ ¹æ®æ­¤åˆ›å»ºå¯¹è±¡, æ¯”è¾ƒçµæ´»ã€‚</p>
<p>C++ æ˜¯åšä¸åˆ°Javaåå°„é‚£ä¹ˆçµæ´»çš„, è™½ç„¶å®ƒå¯ä»¥è¿è¡Œæ—¶åˆ›å»ºå¯¹è±¡(åœ¨å †ä¸Š), ä½†å¹¶ä¸èƒ½åŠ¨æ€çš„æ¥å—å­—ç¬¦ä¸²åˆ›å»ºå¯¹è±¡, å®ƒåˆ›å»ºçš„å¯¹è±¡éƒ½æ˜¯ç¼–è¯‘å‰å†™å¥½çš„(ä¸èƒ½è¿è¡Œæ—¶æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²æ¥åˆ›å»º)ã€‚è¿™ä¸€æ­¥å¯ä»¥æ¨¡æ‹Ÿ, æœ€ç»ˆä¹Ÿèƒ½å®ç°è¿è¡ŒæœŸé—´è·å–å…ƒç´ è‡ªåŠ¨ç”Ÿæˆå¯¹è±¡ã€‚</p>
<ul>
<li><p>RegisterActionç±», æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å’Œå·¥å‚å‡½æ•°(return new objecté‚£ç§), å°†å®ƒä»¬æ³¨å†Œåˆ°<code>&lt;string, func&gt;</code>çš„mapä¸­ã€‚è¿™å®ç°äº†é€šè¿‡å­—ç¬¦ä¸²è°ƒå·¥å‚å‡½æ•°è¿›è€Œè·å¾—å¯¹è±¡ã€‚</p>
</li>
<li><p>åˆ©ç”¨å®å®šä¹‰çš„#, å¯ä»¥å°†å­—é¢é‡çœ‹æˆå­—ç¬¦ä¸²,è¿›è€Œæ³¨å†ŒRegisterActionã€‚ `RegisterAction g_creatorRegister##className(                        \</p>
<pre><code>  #className,(PTRCreateObject)objectCreator##className)`, å°†å­—ç¬¦ä¸²`#className`, ä¸å­—ç¬¦ä¸²ä»£è¡¨çš„ç±»å·¥å‚å‡½æ•°ç»‘å®šã€‚
</code></pre>
</li>
<li><p>å¯¹æ³¨å†Œå®Œæ¯•çš„<code>&lt;string, func&gt;</code>map, ç”¨æˆ·å¯ä»¥ç›´æ¥é€šè¿‡stringè°ƒç”¨funcå¾—åˆ°å¯¹è±¡ã€‚</p>
</li>
<li><p>å¯¹è±¡æ˜¯å½“ç”¨æˆ·stringè°ƒç”¨funcæ—¶åˆ›å»ºçš„,ä½†ä½¿ç”¨çš„æ˜¯new, Javaåå°„ä¸æ˜¯ä½¿ç”¨çš„newåˆ›å»ºå¯¹è±¡ã€‚(Javaåå°„å’Œnewéƒ½æ˜¯é€šè¿‡ç±»åŠ è½½å™¨å¯¹.classæ–‡ä»¶åŠ è½½è¿›å†…å­˜ä¸­ï¼Œåˆ›å»ºäº†Classå¯¹è±¡ã€‚)ï¼Œjavaåå°„æŒ‰éœ€åŠ è½½.classæ–‡ä»¶, C++å€Ÿç”¨å·¥å‚å›è°ƒå‡½æ•°æŒ‰éœ€newå¯¹è±¡ã€‚</p>
</li>
</ul>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">/// å‡½æ•°æŒ‡é’ˆçš„typedef</span>
<span class="token keyword">typedef</span> <span class="token keyword">void</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token operator">*</span>PTRCreateObject<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  

<span class="token keyword">class</span> <span class="token class-name">ClassFactory</span> <span class="token punctuation">&#123;</span>
<span class="token keyword">private</span><span class="token operator">:</span>  
    map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> PTRCreateObject<span class="token operator">></span> m_classMap <span class="token punctuation">;</span>  
	<span class="token function">ClassFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">//æ„é€ å‡½æ•°ç§æœ‰åŒ–, ä¸èƒ½å¤–ç•Œè°ƒç”¨</span>
	
<span class="token keyword">public</span><span class="token operator">:</span>   
    <span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">getClassByName</span><span class="token punctuation">(</span>string className<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token keyword">void</span> <span class="token function">registClass</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> PTRCreateObject method<span class="token punctuation">)</span> <span class="token punctuation">;</span> 
    <span class="token comment">/// getInstanceæ˜¯é™æ€å¯¹è±¡ </span>
    <span class="token keyword">static</span> ClassFactory<span class="token operator">&amp;</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>  
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">void</span><span class="token operator">*</span> <span class="token class-name">ClassFactory</span><span class="token double-colon punctuation">::</span><span class="token function">getClassByName</span><span class="token punctuation">(</span>string className<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  
    map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> PTRCreateObject<span class="token operator">></span><span class="token double-colon punctuation">::</span>const_iterator iter<span class="token punctuation">;</span>  
    iter <span class="token operator">=</span> m_classMap<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span> <span class="token punctuation">;</span>  
    <span class="token keyword">if</span> <span class="token punctuation">(</span> iter <span class="token operator">==</span> m_classMap<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>  
        <span class="token keyword">return</span> <span class="token constant">NULL</span> <span class="token punctuation">;</span>  
    <span class="token keyword">else</span>  
        <span class="token keyword">return</span> iter<span class="token operator">-></span><span class="token function">second</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>  
<span class="token punctuation">&#125;</span>  

<span class="token comment">/// æ³¨å†Œå®ä¾‹åˆ°class_mapä¸­, å¯ä»¥é€šè¿‡å­—ç¬¦ä¸²è°ƒç”¨ä¹‹</span>
<span class="token comment">/// æ³¨å†Œçš„æ˜¯ä¸€ä¸ªå¯¹è±¡è·å–å‡½æ•°PTRCreateObject, è€Œä¸æ˜¯å¯¹è±¡</span>
<span class="token comment">/// å¯¹è±¡çŸ¥é“ä½¿ç”¨getClassByName, å°†PTRCreateObjectå¼ºåˆ¶è½¬æ¢æˆTestClassæ‰ä¼šè°ƒç”¨ä¹‹</span>
<span class="token comment">/// æ˜¾ç„¶ä»¥ä¸Šè¿è¡Œæ—¶æ‰äº§ç”Ÿå¯¹è±¡, ä¸”æ ¹æ®stringè·å–å¯¹è±¡, åå°„è§„åˆ™</span>
<span class="token comment">/// è¿™ç§å¯ä»¥å®ç°ç±»ä¼¼åŠ¨æ€çš„æ¥äº†ä¸€ä¸ªè¿æ¥åˆ›å»ºå¯¹è±¡, å…³é—­è¿æ¥é‡Šæ”¾å¯¹è±¡, ä¸ç”¨ä¸€å¼€å§‹ä¿ç•™å¾ˆå¤šå¯¹è±¡ã€‚å› æ­¤åœ¨springç±»ä¼¼webæ¡†æ¶åº”ç”¨å¹¿æ³›</span>
<span class="token keyword">void</span> <span class="token class-name">ClassFactory</span><span class="token double-colon punctuation">::</span><span class="token function">registClass</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> PTRCreateObject method<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  
    m_classMap<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">pair</span><span class="token generic class-name"><span class="token operator">&lt;</span>string<span class="token punctuation">,</span> PTRCreateObject<span class="token operator">></span></span></span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> method<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>  
<span class="token punctuation">&#125;</span>  


ClassFactory<span class="token operator">&amp;</span> <span class="token class-name">ClassFactory</span><span class="token double-colon punctuation">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token comment">/// é™æ€å¯¹è±¡, è¿”å›é™æ€å¯¹è±¡çš„å¼•ç”¨</span>
    <span class="token keyword">static</span> ClassFactory sLo_factory<span class="token punctuation">;</span>  
    <span class="token keyword">return</span> sLo_factory <span class="token punctuation">;</span>  
<span class="token punctuation">&#125;</span>  

<span class="token keyword">class</span> <span class="token class-name">RegisterAction</span><span class="token punctuation">&#123;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">RegisterAction</span><span class="token punctuation">(</span>string className<span class="token punctuation">,</span>PTRCreateObject ptrCreateFn<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ok2\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/// è°ƒç”¨ClassFactory, è·å–å·¥å‚å®ä¾‹,è°ƒç”¨registClassæ³¨å†Œä¹‹     </span>
		<span class="token class-name">ClassFactory</span><span class="token double-colon punctuation">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">registClass</span><span class="token punctuation">(</span>className<span class="token punctuation">,</span>ptrCreateFn<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>


<span class="token comment">/*
#è¡¨ç¤ºå­—ç¬¦ä¸²åŒ–æ“ä½œç¬¦ï¼ˆstringificationï¼‰ã€‚å…¶ä½œç”¨æ˜¯ï¼šå°†å®å®šä¹‰ä¸­çš„ä¼ å…¥å‚æ•°åè½¬æ¢æˆç”¨ä¸€å¯¹åŒå¼•å·æ‹¬èµ·æ¥å‚æ•°åå­—ç¬¦ä¸²ã€‚
##è¡¨ç¤ºè¿æ¥ 

ä½¿ç”¨å®å®šä¹‰å¯ä»¥å®ç°å­—ç¬¦ä¸²å½¢å¼
*/</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">REGISTER</span><span class="token expression"><span class="token punctuation">(</span>className<span class="token punctuation">)</span> 											</span><span class="token punctuation">\</span>
	<span class="token expression">className<span class="token operator">*</span> objectCreator</span><span class="token punctuation">##</span><span class="token expression"><span class="token function">className</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>     							</span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token function">printf</span><span class="token punctuation">(</span></span><span class="token string">"ok\n"</span><span class="token expression"><span class="token punctuation">)</span><span class="token punctuation">;</span>     </span><span class="token punctuation">\</span>
        <span class="token expression"><span class="token keyword">return</span> <span class="token keyword">new</span> className<span class="token punctuation">;</span>                                         	</span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token punctuation">&#125;</span>                                                                   </span><span class="token punctuation">\</span>
    <span class="token expression">RegisterAction g_creatorRegister</span><span class="token punctuation">##</span><span class="token expression"><span class="token function">className</span><span class="token punctuation">(</span>                        </span><span class="token punctuation">\</span>
		<span class="token expression"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">class</span><span class="token expression">Name<span class="token punctuation">,</span><span class="token punctuation">(</span>PTRCreateObject<span class="token punctuation">)</span>objectCreator</span></span></span><span class="token punctuation">##</span><span class="token expression">className<span class="token punctuation">)</span>   </span><span class="token comment">///(#className,(PTRCreateObject)objectCreator##className) åˆå§‹åŒ–ä¸€ä¸ªRegisterActionå¯¹è±¡</span></span>
    <span class="token comment">/// æ³¨æ„è¿™é‡Œåªæ˜¯å°†å‡½æ•°ä½œä¸ºå‚æ•°ç”¨æ¥æ„é€ RegisterActionå®ä¾‹</span>

<span class="token comment">// test class</span>
<span class="token keyword">class</span> <span class="token class-name">TestClass</span><span class="token punctuation">&#123;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">m_print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		cout<span class="token operator">&lt;&lt;</span><span class="token string">"hello TestClass"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token function">REGISTER</span><span class="token punctuation">(</span>TestClass<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	TestClass<span class="token operator">*</span> ptrObj<span class="token operator">=</span><span class="token punctuation">(</span>TestClass<span class="token operator">*</span><span class="token punctuation">)</span><span class="token class-name">ClassFactory</span><span class="token double-colon punctuation">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassByName</span><span class="token punctuation">(</span><span class="token string">"TestClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//ptrObj->m_print();</span>
<span class="token punctuation">&#125;</span></code></pre>

<h3 id="springçš„bean"><a href="#springçš„bean" class="headerlink" title="springçš„bean"></a>springçš„bean</h3><p><img src="../../assets/images/cpp/7.png" alt="avatar" loading="lazy"></p>
<ol>
<li><p>å®ä¾‹åŒ–Bean<br>å¯¹äºBeanFactoryå®¹å™¨ï¼Œå½“å®¢æˆ·å‘å®¹å™¨è¯·æ±‚ä¸€ä¸ªå°šæœªåˆå§‹åŒ–çš„beanæ—¶ï¼Œæˆ–åˆå§‹åŒ–beançš„æ—¶å€™éœ€è¦æ³¨å…¥å¦ä¸€ä¸ªå°šæœªåˆå§‹åŒ–çš„ä¾èµ–æ—¶ï¼Œå®¹å™¨å°±ä¼šè°ƒç”¨createBeanè¿›è¡Œå®ä¾‹åŒ–ã€‚</p>
</li>
<li><p>è®¾ç½®å¯¹è±¡å±æ€§ï¼ˆä¾èµ–æ³¨å…¥ï¼‰<br>å®ä¾‹åŒ–åçš„å¯¹è±¡è¢«å°è£…åœ¨BeanWrapperå¯¹è±¡ä¸­ï¼Œå¹¶ä¸”æ­¤æ—¶å¯¹è±¡ä»ç„¶æ˜¯ä¸€ä¸ªåŸç”Ÿçš„çŠ¶æ€ï¼Œå¹¶æ²¡æœ‰åˆå§‹åŒ–ã€‚ç´§æ¥ç€ï¼ŒSpringæ ¹æ®BeanDefinitionä¸­çš„ä¿¡æ¯è¿›è¡Œä¾èµ–æ³¨å…¥ã€‚</p>
</li>
<li><p>æ³¨å…¥Awareæ¥å£<br>ç´§æ¥ç€ï¼ŒSpringä¼šæ£€æµ‹è¯¥å¯¹è±¡æ˜¯å¦å®ç°äº†xxxAwareæ¥å£ï¼Œå¹¶å°†ç›¸å…³çš„xxxAwareå®ä¾‹æ³¨å…¥ç»™beanã€‚</p>
</li>
<li><p>å½“ç»è¿‡ä¸Šè¿°å‡ ä¸ªæ­¥éª¤åï¼Œbeanå¯¹è±¡å·²ç»è¢«æ­£ç¡®æ„é€ ï¼Œä½†å¦‚æœä½ æƒ³è¦å¯¹è±¡è¢«ä½¿ç”¨å‰å†è¿›è¡Œä¸€äº›è‡ªå®šä¹‰çš„å¤„ç†ï¼Œå°±å¯ä»¥é€šè¿‡BeanPostProcessoræ¥å£å®ç°ã€‚</p>
</li>
</ol>
<h3 id="C-AOP"><a href="#C-AOP" class="headerlink" title="C++ AOP"></a>C++ AOP</h3><ul>
<li>åŸºæœ¬æ€è·¯æ˜¯ä¼ é€’ä¸€äº›åˆ‡ç‰‡ç±»å‹ä½œä¸ºéƒ½æ‰§è¡Œçš„, ä¾‹å¦‚æ—¥å¿—ç±»ç­‰ã€‚è¿™äº›å¯ä»¥æ”¾åœ¨æ¨¡æ¿ç±»å‹å‚æ•°ä¸­</li>
<li>ç„¶åå†å½¢å‚é‡Œä¼ é€’è¦æ‰§è¡Œçš„å‡½æ•°ã€‚ä¸­é—´ç»è¿‡ä»£ç†ç±»æ•´åˆæˆæ­£å¸¸çš„å‡½æ•°ã€‚</li>
</ul>
<p>ä»¥ä¸‹ä»£ç æ¶‰åŠä¸€äº›C++é«˜çº§ç‰¹æ€§</p>
<ul>
<li><code>auto check(int) -&gt;</code></li>
<li><code>decltype</code></li>
<li><code>std::declval&lt;U&gt;().member</code>, å¯ä»¥è°ƒç”¨Uç±»çš„æˆå‘˜å‡½æ•°</li>
<li><code>std::is_same&lt;decltype(check&lt;T&gt;(0))</code>, <code>std::true_type&gt;::value</code>, æ¯”è¾ƒï¼Œç±»å‹æ˜¯å¦ç›¸åŒ, ç›¸åŒ::valueä¸ºtrue</li>
<li><code>typename std::enable_if&lt;HasMember_before&lt;T, Args...&gt;::value &amp;&amp; HasMember_after&lt;T, Args...&gt;::value&gt;::type</code>, std::enable_if</li>
</ul>
<p>CppAop.hpp</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">__CPPAOP_H__</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">__CPPAOP_H__</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>

<span class="token keyword">namespace</span> CppAop <span class="token punctuation">&#123;</span>

<span class="token comment">/*  std::declvalè¿”å›ä¸€ä¸ªç±»å‹çš„å³å€¼å¼•ç”¨, å¹¶å¯ä»¥è®¿é—®æ¨¡æ¿ç±»çš„æˆå‘˜å‡½æ•°

std::is_same
ä½äºå¤´æ–‡ä»¶&lt;type_traits>ä¸­, ä¸¤ä¸ªä¸€æ ·çš„ç±»å‹ä¼šè¿”å›true
bool isInt = std::is_same&lt;int, int>::value; //ä¸ºtrue

valueæ˜¯ = std::is_same&lt;decltype(check&lt;T>(0)), std::true_type>::value   , ä¹Ÿå°±æ˜¯decltype(check&lt;T>(0))ç±»å‹å’Œstd::true_typeæ˜¯å¦ç›¸ç­‰

checkçš„æ¨¡æ¿å‚æ•°ä¸ºU, å…¶å®å°±æ˜¯è¾“å…¥åˆ¤å®šçš„ç±»å‹å‚æ•°ä¸ºint, è¿”å›ç±»å‹ä¸ºdecltype(std::declval&lt;U>().member(std::declval&lt;Args>()...), std::true_type())
memberä¼šè¢«beforeæˆ–afteræ›¿ä»£

decltype(std::declval&lt;U>().member(std::declval&lt;Args>()...), std::true_type())è¾“å…¥ä¸¤ä¸ªå‚æ•°, å½“std::declval&lt;U>().member(std::declval&lt;Args>()...)æœ‰æ•ˆæ—¶ä¼šè¾“å‡ºstd::true_type()

struct A &#123;              // abstract class
  virtual int value() = 0;
&#125;;
 
class B : public A &#123;    // class with specific constructor
  int val_;
public:
  B(int i,int j):val_(i*j)&#123;&#125;
  int value() &#123;return val_;&#125;
&#125;;
 
int main() &#123;
  decltype(std::declval&lt;A>().value()) a;  // int a
  decltype(std::declval&lt;B>().value()) b;  // int b
  decltype(B(0,0).value()) c;   // same as above (known constructor)
*/</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">HAS_MEMBER</span><span class="token expression"><span class="token punctuation">(</span>member<span class="token punctuation">)</span>                                                                                       </span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Args<span class="token operator">></span>                                                                      </span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token keyword">struct</span> <span class="token class-name">HasMember_</span></span><span class="token punctuation">##</span><span class="token expression">member                                                                                    </span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token punctuation">&#123;</span>                                                                                                            </span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token keyword">private</span><span class="token operator">:</span>                                                                                                     </span><span class="token punctuation">\</span>
        <span class="token expression"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">U</span><span class="token operator">></span>                                                                                 </span><span class="token punctuation">\</span>
        <span class="token expression"><span class="token keyword">static</span> <span class="token keyword">auto</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token keyword">decltype</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">declval</span><span class="token generic class-name"><span class="token operator">&lt;</span>U<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">member</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">declval</span><span class="token generic class-name"><span class="token operator">&lt;</span>Args<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span><span class="token function">true_type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span><span class="token punctuation">\</span>
                                                                                                                 <span class="token punctuation">\</span>
        <span class="token expression"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">U</span><span class="token operator">></span>                                                                                    </span><span class="token punctuation">\</span>
        <span class="token expression"><span class="token keyword">static</span> std<span class="token double-colon punctuation">::</span>false_type <span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                                                       </span><span class="token punctuation">\</span>
                                                                                                                 <span class="token punctuation">\</span>
    <span class="token expression"><span class="token keyword">public</span><span class="token operator">:</span>                                                                                                      </span><span class="token punctuation">\</span>
        <span class="token expression"><span class="token keyword">enum</span>                                                                                                     </span><span class="token punctuation">\</span>
        <span class="token expression"><span class="token punctuation">&#123;</span>                                                                                                        </span><span class="token punctuation">\</span>
            <span class="token expression">value <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span>is_same<span class="token operator">&lt;</span><span class="token keyword">decltype</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">check</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>true_type<span class="token operator">></span><span class="token double-colon punctuation">::</span>value                                   </span><span class="token punctuation">\</span>
        <span class="token expression"><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>                                                                                                       </span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></span></span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">namespace</span> WzAop
<span class="token punctuation">&#123;</span>
<span class="token comment">/// è¿™é‡Œæ˜¯åˆ¤æ–­åˆ‡ç‰‡ç±»æ˜¯å¦æœ‰è¦æ‰§è¡Œçš„æˆå‘˜å‡½æ•°, ä¾‹å¦‚beforeç­‰ã€‚åŸºæœ¬æ€è·¯æ˜¯ä½¿ç”¨std::declval&lt;U>()</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">HAS_MEMBER</span><span class="token expression"><span class="token punctuation">(</span>member<span class="token punctuation">)</span>                                                                                       </span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Args<span class="token operator">></span>                                                                      </span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token keyword">struct</span> <span class="token class-name">HasMember_</span></span><span class="token punctuation">##</span><span class="token expression">member                                                                                    </span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token punctuation">&#123;</span>                                                                                                            </span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token keyword">private</span><span class="token operator">:</span>                                                                                                     </span><span class="token punctuation">\</span>
        <span class="token expression"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">U</span><span class="token operator">></span>                                                                                    </span><span class="token punctuation">\</span>
        <span class="token expression"><span class="token keyword">static</span> <span class="token keyword">auto</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token keyword">decltype</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">declval</span><span class="token generic class-name"><span class="token operator">&lt;</span>U<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">member</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">declval</span><span class="token generic class-name"><span class="token operator">&lt;</span>Args<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span><span class="token function">true_type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span><span class="token punctuation">\</span>
                                                                                                                 <span class="token punctuation">\</span>
        <span class="token expression"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">U</span><span class="token operator">></span>                                                                                    </span><span class="token punctuation">\</span>
        <span class="token expression"><span class="token keyword">static</span> std<span class="token double-colon punctuation">::</span>false_type <span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                                                       </span><span class="token punctuation">\</span>
                                                                                                                 <span class="token punctuation">\</span>
    <span class="token expression"><span class="token keyword">public</span><span class="token operator">:</span>                                                                                                      </span><span class="token punctuation">\</span>
        <span class="token expression"><span class="token keyword">enum</span>                                                                                                     </span><span class="token punctuation">\</span>
        <span class="token expression"><span class="token punctuation">&#123;</span>                                                                                                        </span><span class="token punctuation">\</span>
            <span class="token expression">value <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span>is_same<span class="token operator">&lt;</span><span class="token keyword">decltype</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">check</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>true_type<span class="token operator">></span><span class="token double-colon punctuation">::</span>value                                   </span><span class="token punctuation">\</span>
        <span class="token expression"><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>                                                                                                       </span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></span></span>

    <span class="token comment">/// å®å®šä¹‰å°†è§£æŠ˜å , å½¢æˆHasMember_beforeå’ŒHasMember_after</span>
    <span class="token function">HAS_MEMBER</span><span class="token punctuation">(</span>before<span class="token punctuation">)</span>
    <span class="token function">HAS_MEMBER</span><span class="token punctuation">(</span>after<span class="token punctuation">)</span>

    <span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">Function</span><span class="token punctuation">,</span> <span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Args<span class="token operator">></span>
    <span class="token keyword">class</span> <span class="token class-name">CppAop</span>
    <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span><span class="token operator">:</span>
        <span class="token function">CppAop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>

        <span class="token comment">/// æ‹·è´å‡½æ•°è¢«delete</span>
        <span class="token function">CppAop</span><span class="token punctuation">(</span><span class="token keyword">const</span> CppAop <span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span>
        CppAop <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> CppAop <span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span>

        <span class="token comment">/// ç”¨Functionèµ‹å€¼ç»™m_func</span>
        <span class="token function">CppAop</span><span class="token punctuation">(</span>Function <span class="token operator">&amp;&amp;</span>f<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">m_func</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">forward</span><span class="token generic class-name"><span class="token operator">&lt;</span>Function<span class="token operator">></span></span></span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token comment">/// std::enable_if æ»¡è¶³æ¡ä»¶æ—¶ç±»å‹æœ‰æ•ˆã€‚</span>
        <span class="token comment">/// åªæœ‰HasMember_before&lt;T, Args...>::value &amp;&amp; HasMember_after&lt;T, Args...>::valueéƒ½ä¸ºtrueæœ‰æ•ˆ, æ˜¾ç„¶åŸºäºå®å®šä¹‰</span>
        <span class="token comment">/// value = std::is_same&lt;decltype(check&lt;T>(0)), std::true_type>::value, valueæ˜¯boolå‹</span>
        <span class="token comment">/// type std::enable_if&lt;>::type, </span>
        <span class="token comment">/// type	either T or no such member, depending on the value of B</span>
        <span class="token comment">/*
        template&lt;bool B, class T = void>
        struct enable_if &#123;&#125;;

        template&lt;class T>
        struct enable_if&lt;true, T> &#123; typedef T type; &#125;;
        */</span>  
       <span class="token comment">/// invokeæ¥å—åˆ‡ç‰‡ç±»å¹¶æ‰§è¡Œä¹‹(aspect.before) </span>
       <span class="token comment">/// m_funcæ˜¯å·²ç»æå‰èµ‹å€¼çš„æ‰§è¡Œå‡½æ•°</span>
        <span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span>
        <span class="token keyword">typename</span> <span class="token class-name">std</span><span class="token double-colon punctuation">::</span>enable_if<span class="token operator">&lt;</span>HasMember_before<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span><span class="token double-colon punctuation">::</span>value <span class="token operator">&amp;&amp;</span> HasMember_after<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span><span class="token double-colon punctuation">::</span>value<span class="token operator">></span><span class="token double-colon punctuation">::</span>type
        <span class="token function">invoke</span><span class="token punctuation">(</span>Args <span class="token operator">&amp;&amp;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">,</span> T <span class="token operator">&amp;&amp;</span>aspect<span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
            aspect<span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">forward</span><span class="token generic class-name"><span class="token operator">&lt;</span>Args<span class="token operator">></span></span></span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">m_func</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">forward</span><span class="token generic class-name"><span class="token operator">&lt;</span>Args<span class="token operator">></span></span></span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            aspect<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">forward</span><span class="token generic class-name"><span class="token operator">&lt;</span>Args<span class="token operator">></span></span></span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token comment">/// aspectæ˜¯è¾“å…¥çš„åˆ‡ç‰‡ç±»å¯¹è±¡, ç±»å‹æ˜¯Tçš„é€šç”¨å¼•ç”¨</span>
        <span class="token comment">/// Args &amp;&amp;... args æ˜¯å¯è¢«before, m_funcç­‰å‡½æ•°æ‰§è¡Œçš„å‚æ•°</span>
        <span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span>
        <span class="token keyword">typename</span> <span class="token class-name">std</span><span class="token double-colon punctuation">::</span>enable_if<span class="token operator">&lt;</span>HasMember_before<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span><span class="token double-colon punctuation">::</span>value <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>HasMember_after<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span><span class="token double-colon punctuation">::</span>value<span class="token operator">></span><span class="token double-colon punctuation">::</span>type
        <span class="token function">invoke</span><span class="token punctuation">(</span>Args <span class="token operator">&amp;&amp;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">,</span> T <span class="token operator">&amp;&amp;</span>aspect<span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
            aspect<span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">forward</span><span class="token generic class-name"><span class="token operator">&lt;</span>Args<span class="token operator">></span></span></span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">m_func</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">forward</span><span class="token generic class-name"><span class="token operator">&lt;</span>Args<span class="token operator">></span></span></span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span>
        <span class="token keyword">typename</span> <span class="token class-name">std</span><span class="token double-colon punctuation">::</span>enable_if<span class="token operator">&lt;</span><span class="token operator">!</span>HasMember_before<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span><span class="token double-colon punctuation">::</span>value <span class="token operator">&amp;&amp;</span> HasMember_after<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span><span class="token double-colon punctuation">::</span>value<span class="token operator">></span><span class="token double-colon punctuation">::</span>type
        <span class="token function">invoke</span><span class="token punctuation">(</span>Args <span class="token operator">&amp;&amp;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">,</span> T <span class="token operator">&amp;&amp;</span>aspect<span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
            <span class="token function">m_func</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">forward</span><span class="token generic class-name"><span class="token operator">&lt;</span>Args<span class="token operator">></span></span></span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            aspect<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">forward</span><span class="token generic class-name"><span class="token operator">&lt;</span>Args<span class="token operator">></span></span></span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">Head</span><span class="token punctuation">,</span> <span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Tail<span class="token operator">></span>
        <span class="token keyword">void</span> <span class="token function">invoke</span><span class="token punctuation">(</span>Args <span class="token operator">&amp;&amp;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">,</span> Head <span class="token operator">&amp;&amp;</span>headAspect<span class="token punctuation">,</span> Tail <span class="token operator">&amp;&amp;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> tailAspect<span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
            headAspect<span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">forward</span><span class="token generic class-name"><span class="token operator">&lt;</span>Args<span class="token operator">></span></span></span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">invoke</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">forward</span><span class="token generic class-name"><span class="token operator">&lt;</span>Args<span class="token operator">></span></span></span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">forward</span><span class="token generic class-name"><span class="token operator">&lt;</span>Tail<span class="token operator">></span></span></span><span class="token punctuation">(</span>tailAspect<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            headAspect<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">forward</span><span class="token generic class-name"><span class="token operator">&lt;</span>Args<span class="token operator">></span></span></span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

    <span class="token keyword">private</span><span class="token operator">:</span>
        Function m_func<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

    <span class="token comment">/* Cross platform deal: compatibility for visual studio &amp; g++ */</span>
    <span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span>
    <span class="token keyword">using</span> identity_t <span class="token operator">=</span> T<span class="token punctuation">;</span>

<span class="token punctuation">&#125;</span> <span class="token comment">/* namespace WzAop */</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span></code></pre>

<p>GenAop.hpp</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">__GENERALAOP_H__</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">__GENERALAOP_H__</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"CppAop.hpp"</span></span>

<span class="token keyword">class</span> <span class="token class-name">GeneralAop</span>
<span class="token punctuation">&#123;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">GeneralAop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">GeneralAop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span>

<span class="token comment">/// æ¨¡æ¿å‚æ•°ç±»å‹ä¸ºä¸€ä¸ªFunction, ä¸€äº›args.è€Œä¸”å¾ˆæ˜¾ç„¶APè¡¨ç¤ºAOPæ•´åˆçš„é€šç”¨ç±», æ¯”å¦‚æ—¥å¿—ç±»</span>
<span class="token comment">/// å‚æ•°Functionæ˜¯è¦æ‰§è¡Œçš„å‡½æ•°, åé¢Argsæ˜¯å‚æ•°</span>
    <span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> AP<span class="token punctuation">,</span> <span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Args<span class="token punctuation">,</span> <span class="token keyword">typename</span> <span class="token class-name">Function</span><span class="token operator">></span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">invoke</span><span class="token punctuation">(</span>Function <span class="token operator">&amp;&amp;</span>f<span class="token punctuation">,</span> Args <span class="token operator">&amp;&amp;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token comment">/// åŸºäºè¦æ‰§è¡Œçš„function argsç”ŸæˆWzAopå¯¹è±¡</span>
        <span class="token comment">/// å‘CppAopæ³¨å†Œè¦æ‰§è¡Œçš„function</span>
        WzAop<span class="token double-colon punctuation">::</span>CppAop<span class="token operator">&lt;</span>Function<span class="token punctuation">,</span> Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token function">asp</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">forward</span><span class="token generic class-name"><span class="token operator">&lt;</span>Function<span class="token operator">></span></span></span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/// å‘CppAopæ³¨å†Œåˆ‡ç‰‡ç±»AP, aspæ˜¯æ„å»ºå¥½çš„è¦æ‰§è¡Œçš„function, åŸºäºåˆ‡ç‰‡ç±»APè°ƒç”¨invoke</span>
        <span class="token comment">/// WzAop::identity_t è¿”å›APçš„ç±»å‹</span>
        asp<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">forward</span><span class="token generic class-name"><span class="token operator">&lt;</span>Args<span class="token operator">></span></span></span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> WzAop<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">identity_t</span><span class="token generic class-name"><span class="token operator">&lt;</span>AP<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span></code></pre>

<p>aop.cc</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;functional></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"GenAop.hpp"</span></span>

<span class="token keyword">void</span> <span class="token function">aopTest1</span><span class="token punctuation">(</span><span class="token keyword">int</span> data<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"test1...%d\n"</span><span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> <span class="token class-name">AopTest2</span>
<span class="token punctuation">&#123;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> data1<span class="token punctuation">,</span>std<span class="token double-colon punctuation">::</span>string data2<span class="token punctuation">)</span>
	<span class="token punctuation">&#123;</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"test2...%d,%s\n"</span><span class="token punctuation">,</span>data1<span class="token punctuation">,</span>data2<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">/// åˆ‡ç‰‡ç±», Log</span>
<span class="token keyword">class</span> <span class="token class-name">Log</span>
<span class="token punctuation">&#123;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token keyword">int</span> data<span class="token punctuation">)</span>
	<span class="token punctuation">&#123;</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"log before...%d\n"</span><span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">int</span> data<span class="token punctuation">)</span>
	<span class="token punctuation">&#123;</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"log after...%d\n"</span><span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token keyword">int</span> data1<span class="token punctuation">,</span>std<span class="token double-colon punctuation">::</span>string data2<span class="token punctuation">)</span>
	<span class="token punctuation">&#123;</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"log before...%d,%s\n"</span><span class="token punctuation">,</span>data1<span class="token punctuation">,</span>data2<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">int</span> data1<span class="token punctuation">,</span>std<span class="token double-colon punctuation">::</span>string data2<span class="token punctuation">)</span>
	<span class="token punctuation">&#123;</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"log after...%d,%s\n"</span><span class="token punctuation">,</span>data1<span class="token punctuation">,</span>data2<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">/// åˆ‡ç‰‡ç±»Security</span>
<span class="token keyword">class</span> <span class="token class-name">Security</span>
<span class="token punctuation">&#123;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token keyword">int</span> data<span class="token punctuation">)</span>
	<span class="token punctuation">&#123;</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"security before...%d\n"</span><span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">int</span> data<span class="token punctuation">)</span>
	<span class="token punctuation">&#123;</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"security after...%d\n"</span><span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token keyword">int</span> data1<span class="token punctuation">,</span>std<span class="token double-colon punctuation">::</span>string data2<span class="token punctuation">)</span>
	<span class="token punctuation">&#123;</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"security before...%d,%s\n"</span><span class="token punctuation">,</span>data1<span class="token punctuation">,</span>data2<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">int</span> data1<span class="token punctuation">,</span>std<span class="token double-colon punctuation">::</span>string data2<span class="token punctuation">)</span>
	<span class="token punctuation">&#123;</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"security after...%d,%s\n"</span><span class="token punctuation">,</span>data1<span class="token punctuation">,</span>data2<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
	<span class="token comment">/* test1 */</span>
    <span class="token comment">// è°ƒç”¨GeneralAop, Log,Securityä¸ºAOPéƒ¨åˆ†</span>
	GeneralAop<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">invoke</span><span class="token generic class-name"><span class="token operator">&lt;</span>Log<span class="token punctuation">,</span>Security<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token operator">&amp;</span>aopTest1<span class="token punctuation">,</span> <span class="token number">123456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"------------------------------------------------\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/* test2 */</span>
	AopTest2 test2<span class="token punctuation">;</span>
	GeneralAop<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">invoke</span><span class="token generic class-name"><span class="token operator">&lt;</span>Log<span class="token punctuation">,</span>Security<span class="token operator">></span></span></span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>AopTest2<span class="token double-colon punctuation">::</span>test<span class="token punctuation">,</span><span class="token operator">&amp;</span>test2<span class="token punctuation">,</span>std<span class="token double-colon punctuation">::</span>placeholders<span class="token double-colon punctuation">::</span>_1<span class="token punctuation">,</span>std<span class="token double-colon punctuation">::</span>placeholders<span class="token double-colon punctuation">::</span>_2<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">654321</span><span class="token punctuation">,</span><span class="token string">"blablabla"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>
</div></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/cpp%E8%BF%9B%E9%98%B6/2021-10-08-%E6%B5%85%E8%B0%88C++%E8%BF%9E%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="prev" title="æµ…è°ˆC/C++ mysql-client"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">æµ…è°ˆC/C++ mysql-client</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/%E7%AE%97%E6%B3%95/2021-09-27-%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%B1%87%E6%80%BB/" rel="next" title="æ’åºç®—æ³•æ±‡æ€»"><span class="post-nav-text">æ’åºç®—æ³•æ±‡æ€»</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>å¦‚æœæ‚¨æœ‰ä»»ä½•å…³äºåšå®¢å†…å®¹çš„ç›¸å…³è®¨è®ºï¼Œæ¬¢è¿å‰å¾€ <a href="https://github.com/YunYouJun/yunyoujun.github.io/discussions" target="_blank">GitHub Discussions</a> ä¸æˆ‘äº¤æµã€‚</span><br></div><div id="valine-container"></div><script>Yun.utils.getScript("https://cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js", () => {
  const valineConfig = {"enable":true,"appId":"K4LElSwpTJaHOOTTU6mNGCyr-gzGzoHsz","appKey":"x3d4Sv6rdTYOECKqkxg9r905","placeholder":"å¡«å†™é‚®ç®±ï¼Œå¯ä»¥æ”¶åˆ°å›å¤é€šçŸ¥å“¦ï½","avatar":null,"pageSize":10,"visitor":false,"highlight":true,"recordIP":false,"enableQQ":true,"meta":["nick","mail","link"],"el":"#valine-container","lang":"zh-cn"}
  valineConfig.path = "/cpp%E8%BF%9B%E9%98%B6/2021-10-08-%E6%B5%85%E8%B0%88%E5%AF%B9%E8%B1%A1%E6%8E%A7%E5%88%B6/"
  new Valine(valineConfig)
}, window.Valine);</script></div></main><footer class="sidebar-translate" id="footer"><div class="beian"><a rel="noopener" href="https://beian.miit.gov.cn/" target="_blank">èŒICPå¤‡666666å·</a></div><div class="copyright"><span>&copy; 2020 â€“ 2021 </span><a class="with-love" id="animate" target="_blank" rel="noopener" href="https://sponsors.yunyoujun.cn" title="äº‘æ¸¸å›çš„èµåŠ©è€…ä»¬"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></a><span class="author"> larry</span></div><div class="powered"><span>ç”± <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> é©±åŠ¨ v5.4.0</span><span class="footer-separator">|</span><span>ä¸»é¢˜ - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.6.3</span></div><div class="live_time"><span>æœ¬åšå®¢å·²èŒèŒå“’åœ°è¿è¡Œ</span><span id="display_live_time"></span><span class="moe-text">(â—'â—¡'â—)</span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2020-04-12T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " å¤© " + passHour + " å°æ—¶ " + passMinute + " åˆ† " + passSecond + " ç§’";
}
blog_live_time();
</script></div></footer><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#6200ee" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="æœç´¢"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search-line"></use></svg></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script defer src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script><script defer src="https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script><script defer src="/js/search/algolia-search.js"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close-line"></use></svg></span></div><div class="search-input-container"></div><div class="algolia-results"><div id="algolia-stats"></div><div id="algolia-hits"></div><div class="algolia-pagination" id="algolia-pagination"></div></div></div></div><!-- hexo injector body_end start --><script src="/js/tag-common/index.js"></script><!-- hexo injector body_end end --></body></html>