<!DOCTYPE html><html lang="zh-CN"><head><!-- hexo injector head_begin start --><link href="/css/tag-common/index.css" rel="stylesheet"/><!-- hexo injector head_begin end --><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#6200ee"><meta name="author" content="larry"><meta name="copyright" content="larry"><meta name="generator" content="Hexo 5.4.0"><meta name="theme" content="hexo-theme-yun"><title>ç¼–è¯‘:g++å’Œcmake | æ‹‰ç‘å›ã®å°çª</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.25/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_dxory92pb0h.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link class="aplayer-style-marker" rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script class="aplayer-script-marker" src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" defer></script><script class="meting-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js" defer></script><script>document.addEventListener(
  "pjax:success",
  function() {
    if (window.aplayers) {
      loadMeting();
    }
  },
  !1
);
</script><link id="light-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism.css" media="(prefers-color-scheme: light)"><link id="dark-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism-tomorrow.css" media="(prefers-color-scheme: dark)"><link rel="icon" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#6200ee"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"larrystd.github.io","root":"/","title":"æ‹‰ç‘å›ã®å°çª","version":"1.6.3","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"æœç´¢...","empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹: ${query}","hits":"æ‰¾åˆ° ${hits} æ¡ç»“æœ","hits_time":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"algolia":{"appID":"CJXXAGRCYN","apiKey":"ae1966d2aeab22bf9335679f45d2cd9a","indexName":"my-hexo-blog","hits":{"per_page":8}},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/utils.js"></script><script src="/js/hexo-theme-yun.js"></script><link rel="alternate" href="/atom.xml" title="æ‹‰ç‘å›ã®å°çª" type="application/atom+xml"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-1LL0D86CY9"></script><script>if (CONFIG.hostname === location.hostname) {
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-1LL0D86CY9');
}</script><script data-ad-client="ca-pub-2245427233262012" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-M9KWR9L');</script><!-- End Google Tag Manager --><meta name="description" content="G++&#x2F;GCCgcc and g++åˆ†åˆ«æ˜¯gnuçš„c &amp; c++ç¼–è¯‘å™¨  gcc&#x2F;g++åœ¨æ‰§è¡Œç¼–è¯‘å·¥ä½œçš„æ—¶å€™ï¼Œæ€»å…±éœ€è¦4æ­¥    1.é¢„å¤„ç†,ç”Ÿæˆ.içš„æ–‡ä»¶  é¢„å¤„ç†å™¨cpp 2.å°†é¢„å¤„ç†åçš„æ–‡ä»¶ä¸è½¬æ¢æˆæ±‡ç¼–è¯­è¨€,ç”Ÿæˆæ–‡ä»¶.s ç¼–è¯‘å™¨egcs 3.æœ‰æ±‡ç¼–å˜ä¸ºç›®æ ‡ä»£ç (æœºå™¨ä»£ç )ç”Ÿæˆ.oçš„æ–‡ä»¶ æ±‡ç¼–å™¨as 4.è¿æ¥ç›®æ ‡ä»£ç ,ç”Ÿæˆå¯æ‰§è¡Œç¨‹åº è¿æ¥å™¨ld   æ€»ä½“é€‰é¡¹   -E ï¼šåªæ¿€æ´»é¢„å¤„ç†,">
<meta property="og:type" content="article">
<meta property="og:title" content="ç¼–è¯‘:g++å’Œcmake">
<meta property="og:url" content="https://larrystd.github.io/cpp%E5%9F%BA%E7%A1%80/2021-5-16-g++%E5%92%8Ccmake/index.html">
<meta property="og:site_name" content="æ‹‰ç‘å›ã®å°çª">
<meta property="og:description" content="G++&#x2F;GCCgcc and g++åˆ†åˆ«æ˜¯gnuçš„c &amp; c++ç¼–è¯‘å™¨  gcc&#x2F;g++åœ¨æ‰§è¡Œç¼–è¯‘å·¥ä½œçš„æ—¶å€™ï¼Œæ€»å…±éœ€è¦4æ­¥    1.é¢„å¤„ç†,ç”Ÿæˆ.içš„æ–‡ä»¶  é¢„å¤„ç†å™¨cpp 2.å°†é¢„å¤„ç†åçš„æ–‡ä»¶ä¸è½¬æ¢æˆæ±‡ç¼–è¯­è¨€,ç”Ÿæˆæ–‡ä»¶.s ç¼–è¯‘å™¨egcs 3.æœ‰æ±‡ç¼–å˜ä¸ºç›®æ ‡ä»£ç (æœºå™¨ä»£ç )ç”Ÿæˆ.oçš„æ–‡ä»¶ æ±‡ç¼–å™¨as 4.è¿æ¥ç›®æ ‡ä»£ç ,ç”Ÿæˆå¯æ‰§è¡Œç¨‹åº è¿æ¥å™¨ld   æ€»ä½“é€‰é¡¹   -E ï¼šåªæ¿€æ´»é¢„å¤„ç†,">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://larrystd.github.io/cpp%E5%9F%BA%E7%A1%80/assets/images/os/22.png">
<meta property="article:published_time" content="2021-05-15T16:00:00.000Z">
<meta property="article:modified_time" content="2021-05-15T16:00:00.000Z">
<meta property="article:author" content="larry">
<meta property="article:tag" content="cpp">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://larrystd.github.io/cpp%E5%9F%BA%E7%A1%80/assets/images/os/22.png"><script src="/js/ui/mode.js"></script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="æ–‡ç« ç›®å½•"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="ç«™ç‚¹æ¦‚è§ˆ"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="larry"><img width="96" loading="lazy" src="/images/avatar.jpg" alt="larry"><span class="site-author-status" title="Looking for you.">ğŸŒ‘</span></a><div class="site-author-name"><a href="/about/">larry</a></div><a class="site-name" href="/about/site.html">æ‹‰ç‘å›ã®å°çª</a><sub class="site-subtitle"></sub><div class="site-desciption">æ¯å¤©éƒ½æ˜¯æ–°çš„ä¸€å¤©å‘¢</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="é¦–é¡µ"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="å½’æ¡£"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">86</span></a></div><div class="site-state-item"><a href="/categories/" title="åˆ†ç±»"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">13</span></a></div><div class="site-state-item"><a href="/tags/" title="æ ‡ç­¾"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">42</span></a></div><a class="site-state-item hty-icon-button" href="/about/#comment" title="ç•™è¨€æ¿"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-clipboard-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="/atom.xml" title="RSS" target="_blank" style="color:orange"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rss-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/larrystd" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.zhihu.com/people/bu-qu-dou-yin-bu-gai-ming" title="çŸ¥ä¹" target="_blank" style="color:#0084FF"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhihu-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="Venray.Kong@outlook.com" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://travellings.link" title="Travelling" target="_blank" style="color:var(--hty-text-color)"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-train-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="æˆ‘çš„å°ä¼™ä¼´ä»¬" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a><a class="links-item hty-icon-button" href="/girls/" title="å–œæ¬¢çš„å¥³å­©å­" style="color:hotpink"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-women-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#G-GCC"><span class="toc-number">1.</span> <span class="toc-text">G++&#x2F;GCC</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#c-%E5%BA%93%E6%96%87%E4%BB%B6%E6%90%9C%E7%B4%A2%E8%B7%AF%E5%BE%84"><span class="toc-number">1.1.</span> <span class="toc-text">c++ åº“æ–‡ä»¶æœç´¢è·¯å¾„</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E4%B8%89%E7%AE%A1%E5%85%B6%E4%B8%8B%EF%BC%8C%E5%90%8C%E6%97%B6%E8%AE%BE%E7%BD%AE%E5%A5%BD-L-I-I"><span class="toc-number">2.</span> <span class="toc-text">ç¼–è¯‘ä¸‰ç®¡å…¶ä¸‹ï¼ŒåŒæ—¶è®¾ç½®å¥½-L, -I, -I</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CMake%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">3.</span> <span class="toc-text">CMakeåŸºæœ¬ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#cmake-%E5%A4%84%E7%90%86%E5%A4%9A%E4%B8%AA%E6%96%87%E4%BB%B6"><span class="toc-number">3.1.</span> <span class="toc-text">cmake å¤„ç†å¤šä¸ªæ–‡ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cmake-%E4%B8%80%E4%BA%9B%E5%8F%82%E6%95%B0"><span class="toc-number">3.2.</span> <span class="toc-text">cmake ä¸€äº›å‚æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6%E5%92%8C%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5%E5%BA%93"><span class="toc-number">3.3.</span> <span class="toc-text">å¯æ‰§è¡Œæ–‡ä»¶å’Œé™æ€é“¾æ¥åº“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#makefile"><span class="toc-number">4.</span> <span class="toc-text">makefile</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GDB%E8%B0%83%E8%AF%95%E5%91%BD%E4%BB%A4"><span class="toc-number">5.</span> <span class="toc-text">GDBè°ƒè¯•å‘½ä»¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vscode-%E7%9A%84cpp%E8%B0%83%E8%AF%95%E9%85%8D%E7%BD%AE"><span class="toc-number">6.</span> <span class="toc-text">vscode çš„cppè°ƒè¯•é…ç½®</span></a></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://larrystd.github.io/cpp%E5%9F%BA%E7%A1%80/2021-5-16-g++%E5%92%8Ccmake/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="larry"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="æ‹‰ç‘å›ã®å°çª"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">ç¼–è¯‘:g++å’Œcmake<a class="post-edit-link" href="https://github.com/larrystd/larrystd.github.io/tree/hexo/source/_posts/cppåŸºç¡€/2021-5-16-g++å’Œcmake.md" target="_blank" title="ç¼–è¾‘" rel="noopener"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-edit-line"></use></svg></a></h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="åˆ›å»ºæ—¶é—´ï¼š2021-05-16 00:00:00" itemprop="dateCreated datePublished" datetime="2021-05-16T00:00:00+08:00">2021-05-16</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="æœ¬æ–‡å­—æ•°"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-file-word-line"></use></svg></span> <span title="æœ¬æ–‡å­—æ•°">4.8k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="é˜…è¯»æ—¶é•¿"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-timer-line"></use></svg></span> <span title="é˜…è¯»æ—¶é•¿">20m</span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/cpp-base/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">cpp base</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/cpp/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">cpp</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#6200ee;"><h3 id="G-GCC"><a href="#G-GCC" class="headerlink" title="G++/GCC"></a>G++/GCC</h3><p>gcc and g++åˆ†åˆ«æ˜¯<code>gnu</code>çš„c &amp; c++ç¼–è¯‘å™¨ </p>
<p>gcc/g++åœ¨æ‰§è¡Œç¼–è¯‘å·¥ä½œçš„æ—¶å€™ï¼Œæ€»å…±éœ€è¦4æ­¥  </p>
<ul>
<li>1.é¢„å¤„ç†,ç”Ÿæˆ.içš„æ–‡ä»¶  é¢„å¤„ç†å™¨cpp</li>
<li>2.å°†é¢„å¤„ç†åçš„æ–‡ä»¶ä¸è½¬æ¢æˆæ±‡ç¼–è¯­è¨€,ç”Ÿæˆæ–‡ä»¶.s ç¼–è¯‘å™¨egcs</li>
<li>3.æœ‰æ±‡ç¼–å˜ä¸ºç›®æ ‡ä»£ç (æœºå™¨ä»£ç )ç”Ÿæˆ.oçš„æ–‡ä»¶ æ±‡ç¼–å™¨as</li>
<li>4.è¿æ¥ç›®æ ‡ä»£ç ,ç”Ÿæˆå¯æ‰§è¡Œç¨‹åº è¿æ¥å™¨ld</li>
</ul>
<ol>
<li>æ€»ä½“é€‰é¡¹</li>
</ol>
<ul>
<li><p>-E ï¼šåªæ¿€æ´»é¢„å¤„ç†,è¿™ä¸ªä¸ç”Ÿæˆæ–‡ä»¶,ä½ éœ€è¦æŠŠå®ƒé‡å®šå‘åˆ°ä¸€ä¸ªè¾“å‡ºæ–‡ä»¶é‡Œ<br>é¢.<br>ä¾‹å­ç”¨æ³•: </p>
<pre class="language-sh" data-language="sh"><code class="language-sh">gcc -E hello.c &gt; pianoapan.txt  
gcc -E hello.c | more  </code></pre>
<p>å…¶å®,ä¸€ä¸ªhello word ä¹Ÿè¦ä¸å¤„ç†æˆ800è¡Œçš„ä»£ç   </p>
</li>
<li><p>-C  ï¼šåœ¨é¢„å¤„ç†çš„æ—¶å€™,ä¸åˆ é™¤æ³¨é‡Šä¿¡æ¯,ä¸€èˆ¬å’Œ-Eä½¿ç”¨,æœ‰æ—¶å€™åˆ†æç¨‹åºï¼Œç”¨è¿™ä¸ªå¾ˆæ–¹ä¾¿çš„ </p>
</li>
<li><p>-S  ï¼š<strong>åªæ¿€æ´»é¢„å¤„ç†å’Œç¼–è¯‘ï¼Œå°±æ˜¯æŒ‡æŠŠæ–‡ä»¶ç¼–è¯‘æˆä¸ºæ±‡ç¼–ä»£ç </strong>ã€‚</p>
</li>
</ul>
<p>ä¾‹å­ç”¨æ³•  </p>
<pre class="language-sh" data-language="sh"><code class="language-sh">gcc -S hello.c  </code></pre>
<ul>
<li>-c   åªæ¿€æ´»é¢„å¤„ç†,ç¼–è¯‘,å’Œæ±‡ç¼–,ä¹Ÿå°±æ˜¯ä»–åªæŠŠç¨‹åºåšæˆ.oæ–‡ä»¶ </li>
</ul>
<p>ä¾‹å­ç”¨æ³•:  </p>
<pre class="language-sh" data-language="sh"><code class="language-sh">gcc -c hello.c 

å°†ç”Ÿæˆ.oçš„objæ–‡ä»¶  
g++ -c MemoryDetect.cpp
g++ -o test test.cpp MemoryDetect.o</code></pre>

<span id="more"></span>

<ol start="2">
<li>ç›®å½•é€‰é¡¹ -I -L -l</li>
</ol>
<ul>
<li><p>-I dir  gcc/g++ä¼šå…ˆåœ¨å½“å‰ç›®å½•æŸ¥æ‰¾æ‰€åˆ¶å®šçš„å¤´æ–‡ä»¶,å¦‚æœæ²¡æœ‰æ‰¾åˆ°,ä»–å›åˆ°ç¼ºçœçš„å¤´æ–‡ä»¶ç›®å½•æ‰¾,å¦‚æœä½¿ç”¨**-Iåˆ¶å®šäº†ç›®å½•**,ä¼˜å…ˆä»-Içš„ç›®å½•æŸ¥æ‰¾ï¼Œç„¶åå†æŒ‰å¸¸è§„çš„é¡ºåºå»æ‰¾. </p>
</li>
<li><p>-include file -i</p>
</li>
</ul>
<p>ç›¸å½“äº<code>â€œ#includeâ€</code><br>åŒ…å«æŸä¸ªä»£ç ,ç®€å•æ¥è¯´,å°±æ˜¯ä¾¿ä»¥æŸä¸ªæ–‡ä»¶,éœ€è¦å¦ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™,å°±å¯ä»¥<br>ç”¨å®ƒè®¾å®š,åŠŸèƒ½å°±ç›¸å½“äºåœ¨ä»£ç ä¸­ä½¿ç”¨#include </p>
<p>ä¾‹å­ç”¨æ³•: </p>
<pre class="language-sh" data-language="sh"><code class="language-sh">gcc hello.c -include &#x2F;root&#x2F;pianopan.h  </code></pre>
<ul>
<li><p>-L dir  åˆ¶å®šç¼–è¯‘é“¾æ¥çš„æ—¶å€™ï¼Œæœç´¢åº“çš„è·¯å¾„ã€‚ä¸ç„¶  ç¼–è¯‘å™¨å°†åªåœ¨æ ‡å‡†åº“çš„ç›®å½•æ‰¾ã€‚ </p>
</li>
<li><p>-l library   åˆ¶å®šç¼–è¯‘çš„æ—¶å€™å…·ä½“ä½¿ç”¨çš„åº“  ã€‚-Lå’Œ-lä¸€ä¸ªæŒ‡å®šç›®å½•ï¼Œä¸€ä¸ªæŒ‡å®šåº“ï¼Œå¸¸å¸¸åŒæ—¶ç”¨ã€‚</p>
</li>
</ul>
<ol start="3">
<li>è°ƒè¯•é€‰é¡¹</li>
</ol>
<ul>
<li><p>-gï¼šåªæ˜¯ç¼–è¯‘å™¨ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œäº§ç”Ÿè°ƒè¯•ä¿¡æ¯ã€‚  ä¹‹åå¯ä»¥ä½¿ç”¨gdbå¯¹è¾“å‡ºæ–‡ä»¶è¿›è¡Œè°ƒè¯•</p>
</li>
<li><p>-ggdbï¼šæ­¤é€‰é¡¹å°†å°½å¯èƒ½çš„ç”Ÿæˆgdbçš„å¯ä»¥ä½¿ç”¨çš„è°ƒè¯•ä¿¡æ¯.</p>
</li>
</ul>
<ol start="4">
<li>é“¾æ¥æ–¹å¼é€‰é¡¹</li>
</ol>
<p>-static æ­¤é€‰é¡¹å°†ç¦æ­¢ä½¿ç”¨åŠ¨æ€åº“(å…±äº«åº“)ã€‚<br>-shared (-G) æ­¤é€‰é¡¹å°†å°½é‡ä½¿ç”¨åŠ¨æ€åº“ï¼Œä¸ºé»˜è®¤é€‰é¡¹</p>
<ol start="5">
<li>è®¾ç½®å®</li>
</ol>
<p>ä½¿ç”¨-Då‚æ•°</p>
<pre class="language-none"><code class="language-none">gcc debugtest.c -o debugtest.exe -D DEBUG</code></pre>


<ul>
<li>ç¼–è¯‘leveldb</li>
</ul>
<pre class="language-none"><code class="language-none">g++ -o leveldbTest test.cpp libleveldb.a -lpthread
å…¶ä¸­-lpthread è¿æ¥pthreadåº“, 
libleveldb.aä¸ºé“¾æ¥leveldbæºç ç¼–è¯‘æˆçš„é™æ€åº“ï¼Œtest.cppæ˜¯è‡ªå·±å†™çš„æ•°æ®åº“æ“ä½œä»£ç ã€‚

-Wall ä¸€èˆ¬ä½¿ç”¨è¯¥é€‰é¡¹ï¼Œå…è®¸å‘å‡ºGCCèƒ½å¤Ÿæä¾›çš„æ‰€æœ‰æœ‰ç”¨çš„è­¦å‘Šã€‚ä¹Ÿå¯ä»¥ç”¨-W&#123;warning&#125;æ¥æ ‡è®°æŒ‡å®šçš„è­¦å‘Šã€‚
-w å…³é—­æ‰€æœ‰è­¦å‘Š,å»ºè®®ä¸è¦ä½¿ç”¨æ­¤é¡¹
-Dmacro  é¢„å¤„ç†é€‰é¡¹
ç›¸å½“äºCè¯­è¨€ä¸­çš„#define macro  
-Dmacro&#x3D;defn  
ç›¸å½“äºCè¯­è¨€ä¸­çš„#define macro&#x3D;defn </code></pre>

<ol start="5">
<li>å…¶ä»–æ–¹å¼</li>
</ol>
<ul>
<li><p>-o åˆ¶å®šç›®æ ‡åç§°ï¼Œç¼–è¯‘é“¾æ¥ï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚,ç¼ºçœçš„æ—¶å€™,gcc ç¼–è¯‘å‡ºæ¥çš„æ–‡ä»¶é»˜è®¤åç§°æ˜¯a.out,<br>ä¾‹å­ç”¨æ³•  </p>
<pre class="language-sh" data-language="sh"><code class="language-sh">gcc -o hello.exe hello.c
gcc -o hello.asm -S hello.c </code></pre></li>
<li><p>-O0  -O1  -O2  -O3  ç¼–è¯‘å™¨çš„ä¼˜åŒ–é€‰é¡¹çš„4ä¸ªçº§åˆ«ï¼Œ-O0è¡¨ç¤ºæ²¡æœ‰ä¼˜åŒ–,-O1ä¸ºç¼ºçœå€¼ï¼Œ-O3ä¼˜åŒ–çº§åˆ«æœ€é«˜</p>
</li>
</ul>
<p>-fpic ç¼–è¯‘å™¨å°±ç”Ÿæˆä½ç½®æ— å…³ç›®æ ‡ç .é€‚ç”¨äºå…±äº«åº“(shared library).<br>-fPIC ç¼–è¯‘å™¨å°±è¾“å‡ºä½ç½®æ— å…³ç›®æ ‡ç .é€‚ç”¨äºåŠ¨æ€è¿æ¥(dynamic linking),å³ä½¿åˆ†æ”¯éœ€è¦å¤§èŒƒå›´è½¬ç§».<br>-v æ˜¾ç¤ºè¯¦ç»†çš„ç¼–è¯‘ã€æ±‡ç¼–ã€è¿æ¥å‘½ä»¤</p>
<p>å¯èƒ½ç”¨åˆ°ï¼Œlinuxè®¾ç½®è½¯é“¾æ¥<br>ä»¥gccä¸ºä¾‹å­</p>
<pre class="language-sh" data-language="sh"><code class="language-sh">å…ˆåˆ é™¤å’Œgcc4.4å…³è”çš„gcc:
sudo rm gcc
sudo rm g++
å†å»ºä¸ªè½¯è¿æ¥
sudo ln -s gcc-4.3 gcc
sudo ln -s g++-4.3 g++</code></pre>
<h4 id="c-åº“æ–‡ä»¶æœç´¢è·¯å¾„"><a href="#c-åº“æ–‡ä»¶æœç´¢è·¯å¾„" class="headerlink" title="c++ åº“æ–‡ä»¶æœç´¢è·¯å¾„"></a>c++ åº“æ–‡ä»¶æœç´¢è·¯å¾„</h4><pre class="language-none"><code class="language-none">1. #include â€œheadfile.hâ€
æœç´¢é¡ºåºä¸ºï¼š
(1)å…ˆæœç´¢å½“å‰ç›®å½•
(2)ç„¶åæœç´¢-IæŒ‡å®šçš„ç›®å½•
(3)å†æœç´¢gccçš„ç¯å¢ƒå˜é‡CPLUS_INCLUDE_PATHï¼ˆCç¨‹åºä½¿ç”¨çš„æ˜¯C_INCLUDE_PATHï¼‰
(4)æœ€åæœç´¢gccçš„å†…å®šç›®å½•
&#x2F;usr&#x2F;include
&#x2F;usr&#x2F;local&#x2F;include
&#x2F;usr&#x2F;lib&#x2F;gcc&#x2F;x86_64-redhat-Linux&#x2F;4.1.1&#x2F;include
å„ç›®å½•å­˜åœ¨ç›¸åŒæ–‡ä»¶æ—¶ï¼Œå…ˆæ‰¾åˆ°å“ªä¸ªä½¿ç”¨å“ªä¸ªã€‚
2. #include &lt;headfile.h&gt;
(1)å…ˆæœç´¢-IæŒ‡å®šçš„ç›®å½•
(2)ç„¶åæœç´¢gccçš„ç¯å¢ƒå˜é‡CPLUS_INCLUDE_PATH
(3)æœ€åæœç´¢gccçš„å†…å®šç›®å½•
&#x2F;usr&#x2F;include
&#x2F;usr&#x2F;local&#x2F;include
&#x2F;usr&#x2F;lib&#x2F;gcc&#x2F;x86_64-redhat-linux&#x2F;4.1.1&#x2F;include
ä¸ä¸Šé¢çš„ç›¸åŒï¼Œå„ç›®å½•å­˜åœ¨ç›¸åŒæ–‡ä»¶æ—¶ï¼Œå…ˆæ‰¾åˆ°å“ªä¸ªä½¿ç”¨å“ªä¸ªã€‚è¿™é‡Œè¦æ³¨æ„ï¼Œ#include&lt;&gt;æ–¹å¼ä¸ä¼šæœç´¢å½“å‰ç›®å½•ã€‚</code></pre>


<h3 id="ç¼–è¯‘ä¸‰ç®¡å…¶ä¸‹ï¼ŒåŒæ—¶è®¾ç½®å¥½-L-I-I"><a href="#ç¼–è¯‘ä¸‰ç®¡å…¶ä¸‹ï¼ŒåŒæ—¶è®¾ç½®å¥½-L-I-I" class="headerlink" title="ç¼–è¯‘ä¸‰ç®¡å…¶ä¸‹ï¼ŒåŒæ—¶è®¾ç½®å¥½-L, -I, -I"></a>ç¼–è¯‘ä¸‰ç®¡å…¶ä¸‹ï¼ŒåŒæ—¶è®¾ç½®å¥½<code>-L</code>, <code>-I</code>, <code>-I</code></h3><pre class="language-sh" data-language="sh"><code class="language-sh">gcc demo.c -o demo  -I &#x2F;tools&#x2F;libevent&#x2F;include -L &#x2F;tools&#x2F;libevent&#x2F;lib -l event

-Iï¼šå¤´æ–‡ä»¶ç›®å½•
-L:é™æ€åº“ç›®å½•
-l:é™æ€åº“åå­—

g++ opendbsqlite.cpp -o db.out -lsqlite3 -L&#x2F;usr&#x2F;local&#x2F;sqlite3&#x2F;lib -I&#x2F;usr&#x2F;local&#x2F;sqlite3&#x2F;include 

# ç­‰ä»·äº
g++ opendbsqlite.cpp -o db.out &#x2F;usr&#x2F;local&#x2F;sqlite3&#x2F;lib&#x2F;libsqlite3.so -L&#x2F;usr&#x2F;local&#x2F;sqlite3&#x2F;lib -I&#x2F;usr&#x2F;local&#x2F;sqlite3&#x2F;include 

# é™æ€ç¼–è¯‘è¿˜éœ€è¦è¿æ¥åˆ«çš„åº“
# -lpthread -ldl -lm
g++ opendbsqlite.cpp -o db.out -lsqlite3 -L&#x2F;usr&#x2F;local&#x2F;sqlite3&#x2F;lib -I&#x2F;usr&#x2F;local&#x2F;sqlite3&#x2F;include -static -lpthread -ldl -lm

# ç­‰ä»·äº
g++ opendbsqlite.cpp -o db.out &#x2F;usr&#x2F;local&#x2F;sqlite3&#x2F;lib&#x2F;libsqlite3.a -L&#x2F;usr&#x2F;local&#x2F;sqlite3&#x2F;lib -I&#x2F;usr&#x2F;local&#x2F;sqlite3&#x2F;include -lpthread -ldl -lm</code></pre>

<ul>
<li>æ³¨æ„ä½¿ç”¨<code>-l</code>åé¢æœ¬åº”è·Ÿç€é™æ€åº“åå­—, ä½†åœ¨ä¸‰ç®¡é½ä¸‹æ–¹å¼ä¸‹åªéœ€è¦è·Ÿç®€ç§°(<code>libsqlite3.aå˜ä¸ºsplite3</code>)å³å¯ã€‚<code>-I</code>, <code>-L</code>åˆ†åˆ«å¯¹åº”ç€<code>include</code>å’Œ<code>lib</code>ç›®å½•ã€‚</li>
</ul>
<ul>
<li><p>é»˜è®¤æ˜¯åŠ¨æ€ç¼–è¯‘ï¼Œé™æ€ç¼–è¯‘åªéœ€è¦åé¢åŠ <code>-static</code>å³å¯, è¿™æ ·è‡ªåŠ¨æå–é™æ€åº“ã€‚ä½†é™æ€ç¼–è¯‘å¯èƒ½è¿˜éœ€è¦è¿æ¥åˆ«çš„åº“ã€‚</p>
</li>
<li><p>è¿æ¥åçš„é™æ€åº“å¤§å° å¾€å¾€è¿œå¤§äº åŠ¨æ€åº“å¤§å°</p>
</li>
</ul>
<p><img src="../assets/images/os/22.png" alt="avatar" loading="lazy"></p>
<h3 id="CMakeåŸºæœ¬ä½¿ç”¨"><a href="#CMakeåŸºæœ¬ä½¿ç”¨" class="headerlink" title="CMakeåŸºæœ¬ä½¿ç”¨"></a>CMakeåŸºæœ¬ä½¿ç”¨</h3><ul>
<li>ä½¿ç”¨g++ï¼Œç¼–è¯‘å¤šä¸ªæ–‡ä»¶</li>
</ul>
<pre class="language-sh" data-language="sh"><code class="language-sh">g++ -Wall -Wextra -g -pthread .&#x2F;src&#x2F;AES.cpp .&#x2F;tests&#x2F;tests.cpp &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libgtest.a -o bin&#x2F;test
g++ -Wall -Wextra -g .&#x2F;src&#x2F;AES.cpp .&#x2F;dev&#x2F;main.cpp -o bin&#x2F;debug
g++ -Wall -Wextra -O2 .&#x2F;src&#x2F;AES.cpp .&#x2F;dev&#x2F;main.cpp -o bin&#x2F;release</code></pre>

<h4 id="cmake-å¤„ç†å¤šä¸ªæ–‡ä»¶"><a href="#cmake-å¤„ç†å¤šä¸ªæ–‡ä»¶" class="headerlink" title="cmake å¤„ç†å¤šä¸ªæ–‡ä»¶"></a>cmake å¤„ç†å¤šä¸ªæ–‡ä»¶</h4><p>æ ¹ç›®å½•ä¸­çš„ CMakeLists.txt ï¼š<br>æ ¹ç›®å½•åŒ…å«å­ç›®å½•çš„CMakeLists.txtã€‚ä¸€èˆ¬çš„ï¼ŒæŠŠå­ç›®å½•å½“æˆé™æ€é“¾æ¥åº“å³å¯ã€‚</p>
<pre class="language-cmake" data-language="cmake"><code class="language-cmake"><span class="token comment"># CMake æœ€ä½ç‰ˆæœ¬å·è¦æ±‚</span>
<span class="token keyword">cmake_minimum_required</span> <span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">2.8</span><span class="token punctuation">)</span>
<span class="token comment"># é¡¹ç›®ä¿¡æ¯</span>
<span class="token keyword">project</span> <span class="token punctuation">(</span>Demo3<span class="token punctuation">)</span>
<span class="token comment"># æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æºæ–‡ä»¶</span>
<span class="token comment"># å¹¶å°†åç§°ä¿å­˜åˆ° DIR_SRCS å˜é‡</span>
<span class="token keyword">aux_source_directory</span><span class="token punctuation">(</span>. DIR_SRCS<span class="token punctuation">)</span>
<span class="token comment"># æ·»åŠ  math å­ç›®å½•</span>
<span class="token keyword">add_subdirectory</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span>
<span class="token comment"># æŒ‡å®šç”Ÿæˆç›®æ ‡ ,mainå‡½æ•°æ‰€åœ¨</span>
<span class="token keyword">add_executable</span><span class="token punctuation">(</span>Demo main.cc<span class="token punctuation">)</span>
<span class="token comment"># æ·»åŠ é“¾æ¥åº“</span>
<span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>Demo MathFunctions<span class="token punctuation">)</span></code></pre>


<p>å­ç›®å½•ä¸­çš„ CMakeLists.txt</p>
<pre class="language-cmake" data-language="cmake"><code class="language-cmake"><span class="token comment"># å°†åç§°ä¿å­˜åˆ° DIR_LIB_SRCS å˜é‡</span>
<span class="token keyword">aux_source_directory</span><span class="token punctuation">(</span>. DIR_LIB_SRCS<span class="token punctuation">)</span>

<span class="token comment"># ç”Ÿæˆé“¾æ¥åº“</span>
<span class="token keyword">add_library</span> <span class="token punctuation">(</span>MathFunctions <span class="token punctuation">$&#123;</span>DIR_LIB_SRCS<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>

<p>è¯¥æ–‡ä»¶ä¸­ä½¿ç”¨å‘½ä»¤ <code>add_library</code>å°† src ç›®å½•ä¸­çš„æºæ–‡ä»¶ç¼–è¯‘ä¸ºé™æ€é“¾æ¥åº“ã€‚</p>
<p>cmake ä¸€äº›è®¾ç½®</p>
<ol>
<li>æ·»åŠ å¤´æ–‡ä»¶ç›®å½•INCLUDE_DIRECTORIES<br>è¯­æ³•ï¼š</li>
</ol>
<pre class="language-sh" data-language="sh"><code class="language-sh">include_directories([AFTER|BEFORE] [SYSTEM] dir1 [dir2 ...])

include_directories(..&#x2F;..&#x2F;..&#x2F;thirdparty&#x2F;comm&#x2F;include)</code></pre>

<p>å®ƒç›¸å½“äºg++é€‰é¡¹ä¸­çš„-Iå‚æ•°çš„ä½œç”¨ï¼Œä¹Ÿç›¸å½“äºç¯å¢ƒå˜é‡ä¸­å¢åŠ è·¯å¾„åˆ°CPLUS_INCLUDE_PATHå˜é‡çš„ä½œç”¨ã€‚</p>
<ol start="2">
<li>æ·»åŠ éœ€è¦é“¾æ¥çš„åº“æ–‡ä»¶ç›®å½• LINK_DIRECTORIES<br>è¯­æ³•ï¼š</li>
</ol>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token function">link_directories</span><span class="token punctuation">(</span>directory1 directory2 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token function">link_directories</span><span class="token punctuation">(</span><span class="token string">"/home/server/third/lib"</span><span class="token punctuation">)</span>
å®ƒç›¸å½“äºg<span class="token operator">++</span>å‘½ä»¤çš„<span class="token operator">-</span>Lé€‰é¡¹çš„ä½œç”¨ï¼Œä¹Ÿç›¸å½“äºç¯å¢ƒå˜é‡ä¸­å¢åŠ LD_LIBRARY_PATHçš„è·¯å¾„çš„ä½œç”¨ã€‚</code></pre>

<ol start="3">
<li>æ·»åŠ éœ€è¦é“¾æ¥çš„åº“æ–‡ä»¶LINK_LIBRARIES,å¯ä»¥æ˜¯é™æ€åº“æˆ–è€…åŠ¨æ€åº“<br>link_librarieså¸¸ç”¨äºé“¾æ¥å­ç›®å½•<br>è¯­æ³•ï¼š</li>
</ol>
<pre class="language-sh" data-language="sh"><code class="language-sh">link_libraries(library1 &lt;debug | optimized&gt; library2 ...)
# ç›´æ¥æ˜¯å…¨è·¯å¾„
link_libraries(â€œ&#x2F;home&#x2F;server&#x2F;third&#x2F;lib&#x2F;libcommon.aâ€)
# ä¸‹é¢çš„ä¾‹å­ï¼Œåªæœ‰åº“åï¼Œcmakeä¼šè‡ªåŠ¨å»æ‰€åŒ…å«çš„ç›®å½•æœç´¢
link_libraries(iconv)

# ä¼ å…¥å˜é‡
link_libraries($&#123;RUNTIME_LIB&#125;)
# ä¹Ÿå¯ä»¥é“¾æ¥å¤šä¸ª
link_libraries(&quot;&#x2F;opt&#x2F;MATLAB&#x2F;R2012a&#x2F;bin&#x2F;glnxa64&#x2F;libeng.so&quot;ã€€&quot;&#x2F;opt&#x2F;MATLAB&#x2F;R2012a&#x2F;bin&#x2F;glnxa64&#x2F;libmx.so&quot;)</code></pre>

<ol start="4">
<li>è®¾ç½®è¦é“¾æ¥çš„åº“æ–‡ä»¶çš„åç§°TARGET_LINK_LIBRARIES<br>è¯­æ³•ï¼š </li>
</ol>
<pre class="language-sh" data-language="sh"><code class="language-sh">target_link_libraries(&lt;target&gt; [item1 [item2 [...]]]
                      [[debug|optimized|general] &lt;item&gt;] ...)
# ä»¥ä¸‹å†™æ³•éƒ½å¯ä»¥ï¼š 
target_link_libraries(myProject comm)       # è¿æ¥libhello.soåº“ï¼Œé»˜è®¤ä¼˜å…ˆé“¾æ¥åŠ¨æ€åº“
target_link_libraries(myProject libcomm.a)  # æ˜¾ç¤ºæŒ‡å®šé“¾æ¥é™æ€åº“
target_link_libraries(myProject libcomm.so) # æ˜¾ç¤ºæŒ‡å®šé“¾æ¥åŠ¨æ€åº“

# å†å¦‚ï¼š
target_link_libraries(myProject libcomm.so)ã€€ã€€#è¿™äº›åº“åå†™æ³•éƒ½å¯ä»¥ã€‚
target_link_libraries(myProject comm)
target_link_libraries(myProject -lcomm)</code></pre>

<ol start="5">
<li>ä¸ºå·¥ç¨‹ç”Ÿæˆç›®æ ‡æ–‡ä»¶ï¼Œå³å„ç§.cppæ–‡ä»¶<br>è¯­æ³•ï¼š</li>
</ol>
<pre class="language-none"><code class="language-none">add_executable(&lt;name&gt; [WIN32] [MACOSX_BUNDLE]
               [EXCLUDE_FROM_ALL]
               source1 [source2 ...])

add_executable(demo
        main.cpp
)</code></pre>

<ol start="6">
<li> æŸ¥æ‰¾åº“æ‰€åœ¨ç›®å½•FIND_LIBRARY<br>ä¾‹å­å¦‚ä¸‹ï¼š</li>
</ol>
<pre class="language-sh" data-language="sh"><code class="language-sh">FIND_LIBRARY(RUNTIME_LIB rt &#x2F;usr&#x2F;lib  &#x2F;usr&#x2F;local&#x2F;lib NO_DEFAULT_PATH)
cmakeä¼šåœ¨ç›®å½•ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ‰€æœ‰ç›®å½•ä¸­éƒ½æ²¡æœ‰ï¼Œå€¼RUNTIME_LIBå°±ä¼šè¢«èµ‹ä¸ºNO_DEFAULT_PATH</code></pre>

<ol start="7">
<li>add_library å¯ä»¥ç”Ÿæˆé“¾æ¥åº“ï¼Œç”±link_librariesè´Ÿè´£é“¾æ¥ã€‚<br>å¦‚æœæ˜¯é“¾æ¥å­ç›®å½•çš„æ–‡ä»¶ï¼Œéœ€è¦add_subdirectory(math)å°†å­ç›®å½•æ·»åŠ è¿›å»ã€‚ </li>
</ol>
<p><strong>å®Œæ•´ä¾‹å­</strong></p>
<pre class="language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">cmake_minimum_required</span> <span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">2.6</span><span class="token punctuation">)</span>

<span class="token property">INCLUDE_DIRECTORIES</span><span class="token punctuation">(</span>../../thirdparty/comm<span class="token punctuation">)</span>

<span class="token function">FIND_LIBRARY</span><span class="token punctuation">(</span>COMM_LIB comm ../../thirdparty/comm/lib NO_DEFAULT_PATH<span class="token punctuation">)</span>
<span class="token function">FIND_LIBRARY</span><span class="token punctuation">(</span>RUNTIME_LIB rt /usr/lib  /usr/local/lib NO_DEFAULT_PATH<span class="token punctuation">)</span>

<span class="token keyword">link_libraries</span><span class="token punctuation">(</span><span class="token punctuation">$&#123;</span>COMM_LIB<span class="token punctuation">&#125;</span> <span class="token punctuation">$&#123;</span>RUNTIME_LIB<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

<span class="token function">ADD_DEFINITIONS</span><span class="token punctuation">(</span>
-O3 -g -W -Wall
 -Wunused-variable -Wunused-parameter -Wunused-function -Wunused
 -Wno-deprecated -Woverloaded-virtual -Wwrite-strings
 -D__WUR= -D_REENTRANT -D_FILE_OFFSET_BITS=<span class="token number">64</span> -DTIXML_USE_STL
<span class="token punctuation">)</span>

<span class="token comment"># ç”Ÿæˆé“¾æ¥å­ç›®å½•</span>
<span class="token keyword">add_library</span><span class="token punctuation">(</span>lib_demo
        cmd.cpp
        global.cpp
        md5.cpp
<span class="token punctuation">)</span>
<span class="token comment"># é“¾æ¥</span>
<span class="token keyword">link_libraries</span><span class="token punctuation">(</span>lib_demo<span class="token punctuation">)</span>
<span class="token keyword">add_executable</span><span class="token punctuation">(</span>demo
        main.cpp
<span class="token punctuation">)</span>

<span class="token comment"># link library in static mode</span>
<span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>demo libuuid.a<span class="token punctuation">)</span></code></pre>

<h4 id="cmake-ä¸€äº›å‚æ•°"><a href="#cmake-ä¸€äº›å‚æ•°" class="headerlink" title="cmake ä¸€äº›å‚æ•°"></a>cmake ä¸€äº›å‚æ•°</h4><pre class="language-cmake" data-language="cmake"><code class="language-cmake"><span class="token variable">CMAKE_BUILD_TYPE</span> è®¾ç½®æ¨¡å¼æ˜¯Debugè¿˜æ˜¯Releaseæ¨¡å¼
<span class="token function">SET</span><span class="token punctuation">(</span><span class="token variable">CMAKE_BUILD_TYPE</span> <span class="token string">"Debugâ€)

or

SET(CMAKE_BUILD_TYPE "</span>Release"<span class="token punctuation">)</span></code></pre>

<p>ä¹Ÿå¯ä»¥<code>cmake -DCMAKE_BUILD_TYPE=Release ..</code></p>
<p>CMAKE_C_FLAGS è®¾ç½®Cç¼–è¯‘é€‰é¡¹<br>CMAKE_CXX_FLAGS è®¾ç½®C++ç¼–è¯‘é€‰é¡¹<br>ä¾‹å¦‚</p>
<pre class="language-cmake" data-language="cmake"><code class="language-cmake"><span class="token comment">#SET(CMAKE_CXX_FLAGS_DEBUG "$&#123;CMAKE_CXX_FLAGS&#125; -O0 -Wall -g -ggdb")</span>

<span class="token function">SET</span><span class="token punctuation">(</span><span class="token variable">CMAKE_CXX_FLAGS</span> <span class="token string">"<span class="token interpolation"><span class="token punctuation">$&#123;</span><span class="token variable">CMAKE_CXX_FLAGS</span><span class="token punctuation">&#125;</span></span> -std=c++11 -O3 -Wall"</span><span class="token punctuation">)</span></code></pre>

<pre class="language-none"><code class="language-none">make allï¼šç¼–è¯‘ç¨‹åºã€åº“ã€æ–‡æ¡£ç­‰ï¼ˆç­‰åŒäºmakeï¼‰
make installï¼šå®‰è£…å·²ç»ç¼–è¯‘å¥½çš„ç¨‹åºã€‚å¤åˆ¶æ–‡ä»¶æ ‘ä¸­åˆ°æ–‡ä»¶åˆ°æŒ‡å®šçš„ä½ç½®
make unistallï¼šå¸è½½å·²ç»å®‰è£…çš„ç¨‹åºã€‚
make cleanï¼šåˆ é™¤ç”±makeå‘½ä»¤äº§ç”Ÿçš„æ–‡ä»¶
make distcleanï¼šåˆ é™¤ç”±.&#x2F;configureäº§ç”Ÿçš„æ–‡ä»¶
make checkï¼šæµ‹è¯•åˆšåˆšç¼–è¯‘çš„è½¯ä»¶ï¼ˆæŸäº›ç¨‹åºå¯èƒ½ä¸æ”¯æŒï¼‰
make installcheckï¼šæ£€æŸ¥å®‰è£…çš„åº“å’Œç¨‹åºï¼ˆæŸäº›ç¨‹åºå¯èƒ½ä¸æ”¯æŒï¼‰
make distï¼šé‡æ–°æ‰“åŒ…æˆpackname-version.tar.gz</code></pre>

<h4 id="å¯æ‰§è¡Œæ–‡ä»¶å’Œé™æ€é“¾æ¥åº“"><a href="#å¯æ‰§è¡Œæ–‡ä»¶å’Œé™æ€é“¾æ¥åº“" class="headerlink" title="å¯æ‰§è¡Œæ–‡ä»¶å’Œé™æ€é“¾æ¥åº“"></a>å¯æ‰§è¡Œæ–‡ä»¶å’Œé™æ€é“¾æ¥åº“</h4><p>é“¾æ¥å™¨å¯ä»¥æ“ä½œçš„æœ€å°å•å…ƒä¸ºç›®æ ‡æ–‡ä»¶ï¼Œæˆ‘ä»¬è§åˆ°çš„é™æ€åº“ï¼ŒåŠ¨æ€åº“ï¼Œå¯æ‰§è¡Œæ–‡ä»¶éƒ½æ˜¯ç”±ç›®æ ‡æ–‡ä»¶æ„å»ºçš„ã€‚<br>é™æ€åº“åªæ˜¯å°†å¤šä¸ªç›®æ ‡æ–‡ä»¶è¿›è¡Œæ‰“åŒ…ï¼Œé™æ€åº“é“¾æ¥æ—¶åªå–é‡Œé¢çš„ç›®æ ‡æ–‡ä»¶ã€‚<br>ç¼–è¯‘å™¨ä¼šå°†ç¿»è¯‘åçš„æœºå™¨è¯­è¨€æŒ‡ä»¤ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„ç›®æ ‡ä»£ç ï¼Œå­˜å‚¨åœ¨ç›®æ ‡æ–‡ä»¶ä¸­ã€‚<br>åœ¨ç¿»è¯‘è¿‡ç¨‹çš„æœ€åé˜¶æ®µï¼Œå¦ä¸€ä¸ªåä¸ºé“¾æ¥å™¨çš„ç¨‹åºä¼šå°†ç›®æ ‡æ–‡ä»¶ä¸å¿…éœ€çš„è¿è¡Œæ—¶åº“ä¾‹ç¨‹ç›¸ç»“åˆã€‚ä¸€æ—¦é“¾æ¥å™¨å®Œæˆæ­¤æ­¥éª¤ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚</p>
<ul>
<li>cmake ç¼–è¾‘googletest<br>CMakeLists.txtå¦‚ä¸‹</li>
</ul>
<pre class="language-c" data-language="c"><code class="language-c"><span class="token function">cmake_minimum_required</span><span class="token punctuation">(</span>VERSION <span class="token number">3.10</span><span class="token punctuation">)</span>

<span class="token function">link_directories</span><span class="token punctuation">(</span>lib<span class="token punctuation">)</span>  # åº“æ–‡ä»¶ç›®å½•

<span class="token function">include_directories</span><span class="token punctuation">(</span>include<span class="token punctuation">)</span>  #å¤´æ–‡ä»¶è·¯å¾„
# æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶
<span class="token function">add_executable</span><span class="token punctuation">(</span>demo demo<span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>
<span class="token function">target_link_libraries</span><span class="token punctuation">(</span>demo libgtest<span class="token punctuation">.</span>a <span class="token operator">-</span>pthread<span class="token punctuation">)</span></code></pre>

<p>å…¶ä¸­libç›®å½•ä¸‹æœ‰é™æ€åº“ï¼Œlibgtest.aã€‚<br>includeç›®å½•ä¸‹æœ‰å¤´æ–‡ä»¶æ‰€åœ¨ã€‚</p>
<pre class="language-none"><code class="language-none">Build a Project
 cmake --build &lt;dir&gt; [&lt;options&gt;] [-- &lt;build-tool-options&gt;]

Install a Project
 cmake --install &lt;dir&gt; [&lt;options&gt;]

Open a Project
 cmake --open &lt;dir&gt;

Run a Script
 cmake [&#123;-D &lt;var&gt;&#x3D;&lt;value&gt;&#125;...] -P &lt;cmake-script-file&gt;

Run a Command-Line Tool
 cmake -E &lt;command&gt; [&lt;options&gt;]

Run the Find-Package Tool
 cmake --find-package [&lt;options&gt;]

View Help
 cmake --help[-&lt;topic&gt;]</code></pre>

<h3 id="makefile"><a href="#makefile" class="headerlink" title="makefile"></a>makefile</h3><p>ä»¥cè¯­è¨€ä¸ºä¾‹å­ï¼Œæˆ‘ä»¬çš„ç¨‹åºæºæ–‡ä»¶éœ€è¦ç»è¿‡ç¼–è¯‘ï¼Œç”Ÿæˆobjectæ–‡ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸»è¦æ˜¯è¯­æ³•æ£€æŸ¥ï¼Œç±»å‹æ£€æŸ¥ç­‰ï¼Œåœ¨Linuxä¸‹å°±æ˜¯ç”Ÿæˆä»¥.oåç¼€çš„æ–‡ä»¶ï¼›å†å°†.oæ–‡ä»¶é“¾æ¥æˆä¸ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸»è¦æ˜¯å‡½æ•°çš„é“¾æ¥ï¼Œè°ƒç”¨ç­‰ã€‚åœ¨Linuxç³»ç»Ÿä¸‹ï¼Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å®ç°<br>åœ¨windowsä¸‹çš„IDEå®Œæˆäº†makefileçš„å·¥ä½œã€‚ä½†æ˜¯åœ¨linuxï¼Œunixä¸‹ç¼–è¯‘å°±ç¦»ä¸å¼€makefileã€‚<br>makefileå…³ç³»åˆ°æ•´ä¸ªå·¥ç¨‹çš„ç¼–è¯‘è§„åˆ™ï¼Œä¸€ä¸ªå·¥ç¨‹ä¸­æºæ–‡ä»¶ï¼ŒæŒ‰ç±»å‹ï¼ŒåŠŸèƒ½ï¼Œæ¨¡å—åˆ†åˆ«æ”¾åœ¨è‹¥å¹²ä¸ªå½•ä¸­ï¼Œ<br>makefileå®šä¹‰äº†ä¸€ç³»åˆ—è§„åˆ™æ¥æŒ‡å®šï¼šå“ªäº›æ–‡ä»¶éœ€è¦å…ˆç¼–è¯‘ï¼Œå“ªäº›æ–‡ä»¶éœ€è¦åç¼–è¯‘ï¼Œå“ªäº›æ–‡ä»¶éœ€è¦é‡æ–°ç¼–è¯‘ï¼Œç”šè‡³æ›´å¤æ‚çš„æ“ä½œã€‚</p>
<p>makefileçš„ä¹¦å†™è§„åˆ™</p>
<ol>
<li>å¦‚æœè¿™ä¸ªå·¥ç¨‹æ²¡æœ‰ç¼–è¯‘è¿‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ‰€æœ‰cæ–‡ä»¶éƒ½è¦ç¼–è¯‘å¹¶è¢«é“¾æ¥ï¼›</li>
<li>å¦‚æœè¿™ä¸ªå·¥ç¨‹çš„æŸå‡ ä¸ªcæ–‡ä»¶è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªç¼–è¯‘è¢«ä¿®æ”¹çš„cæ–‡ä»¶ï¼Œå¹¶é“¾æ¥ç›®æ ‡ç¨‹åºï¼›</li>
<li>å¦‚æœè¿™ä¸ªå·¥ç¨‹çš„å¤´æ–‡ä»¶è¢«ä¿®æ”¹äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ç¼–è¯‘å¼•ç”¨äº†è¿™å‡ ä¸ªå¤´æ–‡ä»¶çš„cæ–‡ä»¶ï¼Œå¹¶é“¾æ¥ç›®æ ‡ç¨‹åºï¼›</li>
</ol>
<pre class="language-none"><code class="language-none">target... : prerequisites...
command</code></pre>

<p>targetä¹Ÿå°±æ˜¯ä¸€ä¸ªç›®æ ‡æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯ä¸­é—´æ–‡ä»¶objectï¼Œä¹Ÿå¯ä»¥æ˜¯å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªæ ‡ç­¾ï¼›<br>prerequisiteså°±æ˜¯ï¼Œè¦ç”Ÿæˆtargetæ‰€éœ€è¦çš„æºæ–‡ä»¶.c,.hæˆ–è€…ç›®æ ‡æ–‡ä»¶objectã€‚<br>commandå°±æ˜¯makeéœ€è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚<br>è¿™ä¸ªå…³ç³»å…¶å®æ˜¯å£°æ˜äº†ä¸€ä¸ªæ–‡ä»¶çš„ä¾èµ–å…³ç³»ã€‚</p>
<p>æˆ‘ä»¬æœ‰main.c, get.c, set.c, show.c, get.h, set.h, show.hå‡ ä¸ªç¨‹åºæ–‡ä»¶,makefileå¦‚ä¸‹ï¼š</p>
<pre class="language-none"><code class="language-none">main : main.o get.o set.o show.o
cc -o main main.o get.o set.o show.o

main.o : main.c
cc -c main.c

get.o : get.c get.h
cc -c get.c

set.o : set.c set.h
cc -c set.c

show.o : show.c show.h
cc -c show.c

clean :
rm main main.o get.o set.o show.o</code></pre>

<p><code>CC</code>æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå®ƒæŒ‡å®šä½ çš„Makefileæ‰€ç”¨çš„ç¼–è¯‘å™¨<br>åœ¨Makefileæ–‡ä»¶ä¸­æ‰¾ç¬¬ä¸€ä¸ªtargetï¼Œå¹¶å°†å…¶ä½œä¸ºæœ€ç»ˆç›®æ ‡æ–‡ä»¶ä¹Ÿå°±æ˜¯ç¤ºä¾‹çš„mainï¼Œæ‰€æœ‰çš„åç»­éƒ½æ˜¯ä¸ºäº†ç”Ÿæˆè¿™ä¸ªç›®æ ‡æ–‡ä»¶è€Œæ‰§è¡Œï¼›makeä¸€å±‚ä¸€å±‚æ ¹æ®å®šä¹‰çš„ä¾èµ–å…³ç³»ï¼Œæœ€ç»ˆç¼–è¯‘å‡ºç¬¬ä¸€ä¸ªç›®æ ‡æ–‡ä»¶</p>
<pre class="language-none"><code class="language-none">obj &#x3D; main.o set.o get.o show.o update.o

main : $(obj)
cc -o main $(obj)

update.o : update.c update.h
cc -c update.c

clean :
rm main $(obj)</code></pre>
<p><a target="_blank" rel="noopener" href="https://seisman.github.io/how-to-write-makefile/">https://seisman.github.io/how-to-write-makefile/</a></p>
<h3 id="GDBè°ƒè¯•å‘½ä»¤"><a href="#GDBè°ƒè¯•å‘½ä»¤" class="headerlink" title="GDBè°ƒè¯•å‘½ä»¤"></a>GDBè°ƒè¯•å‘½ä»¤</h3><ul>
<li><p>runï¼ˆç®€å†™rï¼‰ï¼š è¿è¡Œç¨‹åºï¼Œå½“é‡åˆ°æ–­ç‚¹åï¼Œç¨‹åºä¼šåœ¨æ–­ç‚¹å¤„åœæ­¢è¿è¡Œï¼Œç­‰å¾…ç”¨æˆ·è¾“å…¥ä¸‹ä¸€æ­¥çš„å‘½ä»¤ã€‚</p>
</li>
<li><p>continueï¼ˆç®€å†™cï¼‰ï¼šç»§ç»­æ‰§è¡Œï¼Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹å¤„ï¼ˆæˆ–è¿è¡Œç»“æŸï¼‰</p>
</li>
<li><p>nextï¼ˆç®€å†™nï¼‰ï¼š å•æ­¥è·Ÿè¸ªç¨‹åºï¼Œå½“é‡åˆ°å‡½æ•°è°ƒç”¨æ—¶ï¼Œç›´æ¥è°ƒç”¨ï¼Œä¸è¿›å…¥æ­¤å‡½æ•°ä½“ï¼›<code>n 2</code>æ‰§è¡Œä¸¤æ¬¡</p>
</li>
<li><p>stepï¼ˆç®€å†™sï¼‰ï¼šå•æ­¥è°ƒè¯•å¦‚æœæœ‰å‡½æ•°è°ƒç”¨ï¼Œåˆ™è¿›å…¥å‡½æ•°ï¼›ä¸å‘½ä»¤nä¸åŒï¼Œnæ˜¯ä¸è¿›å…¥è°ƒç”¨çš„å‡½æ•°çš„</p>
</li>
<li><p>untilï¼šè¿è¡Œç¨‹åºç›´åˆ°é€€å‡ºå¾ªç¯ä½“; / until+è¡Œå·ï¼š è¿è¡Œè‡³æŸè¡Œ</p>
</li>
<li><p>finishï¼š è¿è¡Œç¨‹åºï¼Œç›´åˆ°å½“å‰å‡½æ•°å®Œæˆè¿”å›ï¼Œå¹¶æ‰“å°å‡½æ•°è¿”å›æ—¶çš„å †æ ˆåœ°å€å’Œè¿”å›å€¼åŠå‚æ•°å€¼ç­‰ä¿¡æ¯ã€‚</p>
</li>
<li><p>call å‡½æ•°(å‚æ•°)ï¼šè°ƒç”¨â€œå‡½æ•°â€ï¼Œå¹¶ä¼ é€’â€œå‚æ•°â€ï¼Œå¦‚ï¼šcall gdb_test(55)</p>
</li>
<li><p>quitï¼šç®€è®°ä¸º q ï¼Œé€€å‡ºgdb</p>
</li>
<li><p>break nï¼ˆç®€å†™b nï¼‰:åœ¨ç¬¬nè¡Œå¤„è®¾ç½®æ–­ç‚¹ ;å¯ä»¥å¸¦ä¸Šä»£ç è·¯å¾„å’Œä»£ç åç§°ï¼š b OAGUPDATE.cpp:578ï¼‰</p>
</li>
</ul>
<pre class="language-none"><code class="language-none">break funcï¼šåœ¨å‡½æ•°func()çš„å…¥å£å¤„è®¾ç½®æ–­ç‚¹ï¼Œå¦‚ï¼šbreak cb_button
delete æ–­ç‚¹å·nï¼šåˆ é™¤ç¬¬nä¸ªæ–­ç‚¹
disable æ–­ç‚¹å·nï¼šæš‚åœç¬¬nä¸ªæ–­ç‚¹
enable æ–­ç‚¹å·nï¼šå¼€å¯ç¬¬nä¸ªæ–­ç‚¹
clear è¡Œå·nï¼šæ¸…é™¤ç¬¬nè¡Œçš„æ–­ç‚¹
info breakpointsï¼ˆç®€å†™info bï¼‰ ï¼šæ˜¾ç¤ºå½“å‰ç¨‹åºçš„æ–­ç‚¹è®¾ç½®æƒ…å†µ

# æ–­ç‚¹
(gdb) break add.cpp:9

# æ˜¾ç¤ºæºç å†…å®¹
list main.cpp:9

# displayè¾“å‡ºaå’Œbçš„å€¼,ä»¥åå†æ–­ç‚¹å¤„ä¼šæ˜¾ç¤ºå˜é‡çš„å€¼ã€‚undisplayå–æ¶ˆæ˜¾ç¤º
(gdb) display a

(gdb) layout asm (æ˜¾ç¤ºæ±‡ç¼–)
(gdb) layout split (åŒæ—¶æ˜¾ç¤ºæºç å’Œæ±‡ç¼–)</code></pre>

<ul>
<li><p>print è¡¨è¾¾å¼ï¼šç®€è®°ä¸º p ï¼Œå…¶ä¸­â€œè¡¨è¾¾å¼â€å¯ä»¥æ˜¯ä»»ä½•å½“å‰æ­£åœ¨è¢«æµ‹è¯•ç¨‹åºçš„æœ‰æ•ˆè¡¨è¾¾å¼ï¼Œæ¯”å¦‚å½“å‰æ­£åœ¨è°ƒè¯•Cè¯­è¨€çš„ç¨‹åºï¼Œé‚£ä¹ˆâ€œè¡¨è¾¾å¼â€å¯ä»¥æ˜¯ä»»ä½•Cè¯­è¨€çš„æœ‰æ•ˆè¡¨è¾¾å¼ï¼ŒåŒ…æ‹¬æ•°å­—ï¼Œå˜é‡ç”šè‡³æ˜¯å‡½æ•°è°ƒç”¨ã€‚</p>
<pre class="language-none"><code class="language-none">print aï¼šå°†æ˜¾ç¤ºæ•´æ•° a çš„å€¼
print ++aï¼šå°†æŠŠ a ä¸­çš„å€¼åŠ 1,å¹¶æ˜¾ç¤ºå‡ºæ¥
print nameï¼šå°†æ˜¾ç¤ºå­—ç¬¦ä¸² name çš„å€¼
print gdb_test(22)ï¼šå°†ä»¥æ•´æ•°22ä½œä¸ºå‚æ•°è°ƒç”¨ gdb_test() å‡½æ•°
print gdb_test(a)ï¼šå°†ä»¥å˜é‡ a ä½œä¸ºå‚æ•°è°ƒç”¨ gdb_test() å‡½æ•°</code></pre></li>
<li><p>display è¡¨è¾¾å¼ï¼šåœ¨å•æ­¥è¿è¡Œæ—¶å°†éå¸¸æœ‰ç”¨ï¼Œä½¿ç”¨displayå‘½ä»¤è®¾ç½®ä¸€ä¸ªè¡¨è¾¾å¼åï¼Œå®ƒå°†åœ¨æ¯æ¬¡å•æ­¥è¿›è¡ŒæŒ‡ä»¤åï¼Œç´§æ¥ç€è¾“å‡ºè¢«è®¾ç½®çš„è¡¨è¾¾å¼åŠå€¼ã€‚å¦‚ï¼š <code>display a</code></p>
</li>
<li><p>watch è¡¨è¾¾å¼ï¼šè®¾ç½®ä¸€ä¸ªç›‘è§†ç‚¹ï¼Œä¸€æ—¦è¢«ç›‘è§†çš„â€œè¡¨è¾¾å¼â€çš„å€¼æ”¹å˜ï¼Œgdbå°†å¼ºè¡Œç»ˆæ­¢æ­£åœ¨è¢«è°ƒè¯•çš„ç¨‹åºã€‚å¦‚ï¼š watch a</p>
</li>
<li><p>layoutï¼šç”¨äºåˆ†å‰²çª—å£ï¼Œå¯ä»¥ä¸€è¾¹æŸ¥çœ‹ä»£ç ï¼Œä¸€è¾¹æµ‹è¯•ï¼š</p>
<pre class="language-none"><code class="language-none">layout srcï¼šæ˜¾ç¤ºæºä»£ç çª—å£
layout asmï¼šæ˜¾ç¤ºåæ±‡ç¼–çª—å£
layout regsï¼šæ˜¾ç¤ºæºä»£ç &#x2F;åæ±‡ç¼–å’ŒCPUå¯„å­˜å™¨çª—å£
layout splitï¼šæ˜¾ç¤ºæºä»£ç å’Œåæ±‡ç¼–çª—å£</code></pre></li>
<li><p>info registers æŸ¥çœ‹å¯„å­˜å™¨å†…å®¹</p>
</li>
</ul>
<p>cmake çš„è°ƒè¯•é…ç½®</p>
<pre class="language-none"><code class="language-none"># å¼€å¯è°ƒè¯•ä¿¡æ¯
set(CMAKE_BUILD_TYPE &quot;Debug&quot;)
set(CMAKE_CXX_FLAGS_DEBUG &quot;$ENV&#123;CXXFLAGS&#125; -O0 -Wall -g2 -ggdb&quot;)
set(CMAKE_CXX_FLAGS_RELEASE &quot;$ENV&#123;CXXFLAGS&#125; -O3 -Wall&quot;)
 
 
# å¼€å¯æ‰€æœ‰è­¦å‘Š
set(CMAKE_CXX_FLAGS &quot;-Wall&quot;)

ç¼–è¯‘æ—¶ä½¿ç”¨cmake  -DCMAKE_BUILD_TYPE&#x3D;Debug   [Path]     </code></pre>

<h3 id="vscode-çš„cppè°ƒè¯•é…ç½®"><a href="#vscode-çš„cppè°ƒè¯•é…ç½®" class="headerlink" title="vscode çš„cppè°ƒè¯•é…ç½®"></a>vscode çš„cppè°ƒè¯•é…ç½®</h3><p>è°ƒè¯•debugå…¶å®æ˜¯ä¸¤ä¸ªä»»åŠ¡ï¼Œä¸€èˆ¬çš„ï¼Œå…ˆä½¿ç”¨g++æˆ–è€…cmakeå°†æºä»£ç ç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå†ä½¿ç”¨gdbè°ƒè¯•ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚<br>ä¾‹å¦‚ï¼Œlaunch.json<br>å…³é”®çš„å‡ ä¸ªå˜é‡æ˜¯ï¼Œ â€œprogramâ€ï¼Œ  â€œargsâ€ï¼Œ â€œpreLaunchTaskâ€ï¼Œâ€miDebuggerPathâ€ã€‚éœ€è¦å…ˆæ‰§è¡ŒpreLaunchTaskï¼Œä¹Ÿå°±æ˜¯ç¼–è¯‘æºæ–‡ä»¶ã€‚</p>
<pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
    <span class="token comment">// Use IntelliSense to learn about possible attributes.</span>
    <span class="token comment">// Hover to view descriptions of existing attributes.</span>
    <span class="token comment">// For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387</span>
    <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0.2.0"</span><span class="token punctuation">,</span>
    <span class="token property">"configurations"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"g++ - Build and debug active file"</span><span class="token punctuation">,</span>
            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"cppdbg"</span><span class="token punctuation">,</span>
            <span class="token property">"request"</span><span class="token operator">:</span> <span class="token string">"launch"</span><span class="token punctuation">,</span>
            <span class="token property">"program"</span><span class="token operator">:</span> <span class="token string">"$&#123;fileDirname&#125;/$&#123;fileBasenameNoExtension&#125;"</span><span class="token punctuation">,</span>
            <span class="token comment">//è¡¨ç¤ºå¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ä¸º$&#123;fileDirname&#125;/$&#123;fileBasenameNoExtension&#125;ï¼Œ åè€…è¡¨ç¤ºå»æ‰åç¼€åçš„æ–‡ä»¶</span>
            <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"stopAtEntry"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token property">"cwd"</span><span class="token operator">:</span> <span class="token string">"$&#123;workspaceFolder&#125;"</span><span class="token punctuation">,</span>
            <span class="token property">"environment"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"console"</span><span class="token operator">:</span> <span class="token string">"externalTerminal"</span><span class="token punctuation">,</span>
            <span class="token property">"MIMode"</span><span class="token operator">:</span> <span class="token string">"gdb"</span><span class="token punctuation">,</span>
            <span class="token property">"setupCommands"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">&#123;</span>
                    <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Enable pretty-printing for gdb"</span><span class="token punctuation">,</span>
                    <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"-enable-pretty-printing"</span><span class="token punctuation">,</span>
                    <span class="token property">"ignoreFailures"</span><span class="token operator">:</span> <span class="token boolean">true</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"preLaunchTask"</span><span class="token operator">:</span> <span class="token string">"C/C++: g++ build active file"</span><span class="token punctuation">,</span>
            <span class="token comment">// ç¼–è¯‘æºæ–‡ä»¶</span>
            <span class="token property">"miDebuggerPath"</span><span class="token operator">:</span> <span class="token string">"/usr/bin/gdb"</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span></code></pre>
<p>task.json<br>å…³é”®å‚æ•°æœ‰labelï¼ˆä¸preLaunchTaskä¸€è‡´ï¼‰ï¼Œ command, argsã€‚</p>
<pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
    <span class="token property">"tasks"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"cppbuild"</span><span class="token punctuation">,</span>
            <span class="token property">"label"</span><span class="token operator">:</span> <span class="token string">"C/C++: g++ build active file"</span><span class="token punctuation">,</span>
            <span class="token property">"command"</span><span class="token operator">:</span> <span class="token string">"/usr/bin/g++"</span><span class="token punctuation">,</span>
            <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">"-g"</span><span class="token punctuation">,</span>
                <span class="token string">"$&#123;file&#125;"</span><span class="token punctuation">,</span>
                <span class="token string">"-o"</span><span class="token punctuation">,</span>
                <span class="token string">"$&#123;fileDirname&#125;/$&#123;fileBasenameNoExtension&#125;"</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"options"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                <span class="token property">"cwd"</span><span class="token operator">:</span> <span class="token string">"$&#123;workspaceFolder&#125;"</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token property">"problemMatcher"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">"$gcc"</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"group"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                <span class="token property">"kind"</span><span class="token operator">:</span> <span class="token string">"build"</span><span class="token punctuation">,</span>
                <span class="token property">"isDefault"</span><span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token property">"detail"</span><span class="token operator">:</span> <span class="token string">"Task generated by Debugger."</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"2.0.0"</span>
<span class="token punctuation">&#125;</span></code></pre>
<p>å¦‚æœé…ç½®cmake,</p>
<pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
    <span class="token property">"tasks"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"label"</span><span class="token operator">:</span> <span class="token string">"cmake"</span><span class="token punctuation">,</span>
            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"shell"</span><span class="token punctuation">,</span>
            <span class="token property">"command"</span><span class="token operator">:</span> <span class="token string">"/usr/bin/cmake"</span><span class="token punctuation">,</span>
            <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"../"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"options"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                <span class="token property">"cwd"</span><span class="token operator">:</span> <span class="token string">"$&#123;workspaceFolder&#125;/build"</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"label"</span><span class="token operator">:</span> <span class="token string">"make"</span><span class="token punctuation">,</span>
            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"shell"</span><span class="token punctuation">,</span>
            <span class="token property">"command"</span><span class="token operator">:</span> <span class="token string">"/usr/bin/make"</span><span class="token punctuation">,</span>
            <span class="token property">"options"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                <span class="token property">"cwd"</span><span class="token operator">:</span> <span class="token string">"$&#123;workspaceFolder&#125;/build"</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"cppbuild"</span><span class="token punctuation">,</span>
            <span class="token property">"label"</span><span class="token operator">:</span> <span class="token string">"C/C++: g++ build active file"</span><span class="token punctuation">,</span>
            <span class="token property">"dependsOn"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"cmake"</span><span class="token punctuation">,</span> <span class="token string">"make"</span><span class="token punctuation">]</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"2.0.0"</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>vscode çš„æ–‡ä»¶å</p>
<pre class="language-none"><code class="language-none">Supposing that you have the following requirements:
A file located at &#x2F;home&#x2F;your-username&#x2F;your-project&#x2F;folder&#x2F;file.ext opened in your editor;
The directory &#x2F;home&#x2F;your-username&#x2F;your-project opened as your root workspace.
So you will have the following values for each variable:
$&#123;workspaceFolder&#125; - &#x2F;home&#x2F;your-username&#x2F;your-project
$&#123;workspaceFolderBasename&#125; - your-project
$&#123;file&#125; - &#x2F;home&#x2F;your-username&#x2F;your-project&#x2F;folder&#x2F;file.ext
$&#123;fileWorkspaceFolder&#125; - &#x2F;home&#x2F;your-username&#x2F;your-project
$&#123;relativeFile&#125; - folder&#x2F;file.ext
$&#123;relativeFileDirname&#125; - folder
$&#123;fileBasename&#125; - file.ext
$&#123;fileBasenameNoExtension&#125; - file
$&#123;fileDirname&#125; - &#x2F;home&#x2F;your-username&#x2F;your-project&#x2F;folder
$&#123;fileExtname&#125; - .ext
$&#123;lineNumber&#125; - line number of the cursor
$&#123;selectedText&#125; - text selected in your code editor
$&#123;execPath&#125; - location of Code.exe
$&#123;pathSeparator&#125; - &#x2F; on macOS or linux, \\ on Windows
Tip: Use IntelliSense inside string values for tasks.json and launch.json to get a full list of predefined variables.</code></pre>

</div></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%9B%E5%A4%A7%E4%BB%B6/2021-5-25-mysql%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="prev" title="mysqlå‘½ä»¤"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">mysqlå‘½ä»¤</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/cpp%E5%9F%BA%E7%A1%80/2021-5-24-%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/" rel="next" title="æ±‡ç¼–"><span class="post-nav-text">æ±‡ç¼–</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>å¦‚æœæ‚¨æœ‰ä»»ä½•å…³äºåšå®¢å†…å®¹çš„ç›¸å…³è®¨è®ºï¼Œæ¬¢è¿å‰å¾€ <a href="https://github.com/YunYouJun/yunyoujun.github.io/discussions" target="_blank">GitHub Discussions</a> ä¸æˆ‘äº¤æµã€‚</span><br></div><div id="valine-container"></div><script>Yun.utils.getScript("https://cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js", () => {
  const valineConfig = {"enable":true,"appId":"K4LElSwpTJaHOOTTU6mNGCyr-gzGzoHsz","appKey":"x3d4Sv6rdTYOECKqkxg9r905","placeholder":"å¡«å†™é‚®ç®±ï¼Œå¯ä»¥æ”¶åˆ°å›å¤é€šçŸ¥å“¦ï½","avatar":null,"pageSize":10,"visitor":false,"highlight":true,"recordIP":false,"enableQQ":true,"meta":["nick","mail","link"],"el":"#valine-container","lang":"zh-cn"}
  valineConfig.path = "/cpp%E5%9F%BA%E7%A1%80/2021-5-16-g++%E5%92%8Ccmake/"
  new Valine(valineConfig)
}, window.Valine);</script></div></main><footer class="sidebar-translate" id="footer"><div class="beian"><a rel="noopener" href="https://beian.miit.gov.cn/" target="_blank">èŒICPå¤‡666666å·</a></div><div class="copyright"><span>&copy; 2020 â€“ 2021 </span><a class="with-love" id="animate" target="_blank" rel="noopener" href="https://sponsors.yunyoujun.cn" title="äº‘æ¸¸å›çš„èµåŠ©è€…ä»¬"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></a><span class="author"> larry</span></div><div class="powered"><span>ç”± <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> é©±åŠ¨ v5.4.0</span><span class="footer-separator">|</span><span>ä¸»é¢˜ - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.6.3</span></div><div class="live_time"><span>æœ¬åšå®¢å·²èŒèŒå“’åœ°è¿è¡Œ</span><span id="display_live_time"></span><span class="moe-text">(â—'â—¡'â—)</span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2020-04-12T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " å¤© " + passHour + " å°æ—¶ " + passMinute + " åˆ† " + passSecond + " ç§’";
}
blog_live_time();
</script></div></footer><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#6200ee" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="æœç´¢"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search-line"></use></svg></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script defer src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script><script defer src="https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script><script defer src="/js/search/algolia-search.js"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close-line"></use></svg></span></div><div class="search-input-container"></div><div class="algolia-results"><div id="algolia-stats"></div><div id="algolia-hits"></div><div class="algolia-pagination" id="algolia-pagination"></div></div></div></div><!-- hexo injector body_end start --><script src="/js/tag-common/index.js"></script><!-- hexo injector body_end end --></body></html>