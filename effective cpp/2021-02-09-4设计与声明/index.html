<!DOCTYPE html><html lang="zh-CN"><head><!-- hexo injector head_begin start --><link href="/css/tag-common/index.css" rel="stylesheet"/><!-- hexo injector head_begin end --><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#6200ee"><meta name="author" content="larry"><meta name="copyright" content="larry"><meta name="generator" content="Hexo 5.4.0"><meta name="theme" content="hexo-theme-yun"><title>effectivecpp:è®¾è®¡å’Œå£°æ˜ | æ‹‰ç‘å›ã®å°çª</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.25/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_dxory92pb0h.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link class="aplayer-style-marker" rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script class="aplayer-script-marker" src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" defer></script><script class="meting-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js" defer></script><script>document.addEventListener(
  "pjax:success",
  function() {
    if (window.aplayers) {
      loadMeting();
    }
  },
  !1
);
</script><link id="light-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism.css" media="(prefers-color-scheme: light)"><link id="dark-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism-tomorrow.css" media="(prefers-color-scheme: dark)"><link rel="icon" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#6200ee"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"larrystd.github.io","root":"/","title":"æ‹‰ç‘å›ã®å°çª","version":"1.6.3","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"æœç´¢...","empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹: ${query}","hits":"æ‰¾åˆ° ${hits} æ¡ç»“æœ","hits_time":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"algolia":{"appID":"CJXXAGRCYN","apiKey":"ae1966d2aeab22bf9335679f45d2cd9a","indexName":"my-hexo-blog","hits":{"per_page":8}},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/utils.js"></script><script src="/js/hexo-theme-yun.js"></script><link rel="alternate" href="/atom.xml" title="æ‹‰ç‘å›ã®å°çª" type="application/atom+xml"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-1LL0D86CY9"></script><script>if (CONFIG.hostname === location.hostname) {
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-1LL0D86CY9');
}</script><script data-ad-client="ca-pub-2245427233262012" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-M9KWR9L');</script><!-- End Google Tag Manager --><meta name="description" content="æœ¬ç« ä¸»è¦æ˜¯C++æ¥å£çš„è®¾è®¡å’Œå£°æ˜ã€‚ä¹Ÿå°±æ˜¯â€œè®©æ¥å£å®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨ï¼Œä¸å®¹æ˜“è¢«è¯¯ç”¨â€ï¼Œæ¥å£åˆ†ä¸ºclass, function,å’Œtemplateã€‚ æœ¬ç« åŒ…å«ä»¥ä¸‹æ¡æ¬¾ï¼š  æ¡æ¬¾18ï¼šè®©æ¥å£å®¹æ˜“è¢«ä½¿ç”¨ï¼Œä¸æ˜“è¢«è¯¯ç”¨  æ¡æ¬¾19ï¼šè®¾è®¡classçŠ¹å¦‚è®¾è®¡type  æ¡æ¬¾20ï¼šå®ä»¥pass-by-reference-to-constæ›¿æ¢pass-by-value  æ¡æ¬¾21ï¼šå¿…é¡»è¿”å›å¯¹è±¡æ—¶ï¼Œåˆ«å¦„æƒ³è¿”å›referen">
<meta property="og:type" content="article">
<meta property="og:title" content="effectivecpp:è®¾è®¡å’Œå£°æ˜">
<meta property="og:url" content="https://larrystd.github.io/effective%20cpp/2021-02-09-4%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%A3%B0%E6%98%8E/index.html">
<meta property="og:site_name" content="æ‹‰ç‘å›ã®å°çª">
<meta property="og:description" content="æœ¬ç« ä¸»è¦æ˜¯C++æ¥å£çš„è®¾è®¡å’Œå£°æ˜ã€‚ä¹Ÿå°±æ˜¯â€œè®©æ¥å£å®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨ï¼Œä¸å®¹æ˜“è¢«è¯¯ç”¨â€ï¼Œæ¥å£åˆ†ä¸ºclass, function,å’Œtemplateã€‚ æœ¬ç« åŒ…å«ä»¥ä¸‹æ¡æ¬¾ï¼š  æ¡æ¬¾18ï¼šè®©æ¥å£å®¹æ˜“è¢«ä½¿ç”¨ï¼Œä¸æ˜“è¢«è¯¯ç”¨  æ¡æ¬¾19ï¼šè®¾è®¡classçŠ¹å¦‚è®¾è®¡type  æ¡æ¬¾20ï¼šå®ä»¥pass-by-reference-to-constæ›¿æ¢pass-by-value  æ¡æ¬¾21ï¼šå¿…é¡»è¿”å›å¯¹è±¡æ—¶ï¼Œåˆ«å¦„æƒ³è¿”å›referen">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-02-08T16:00:00.000Z">
<meta property="article:modified_time" content="2021-02-08T16:00:00.000Z">
<meta property="article:author" content="larry">
<meta property="article:tag" content="cpp">
<meta name="twitter:card" content="summary"><script src="/js/ui/mode.js"></script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="æ–‡ç« ç›®å½•"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="ç«™ç‚¹æ¦‚è§ˆ"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="larry"><img width="96" loading="lazy" src="/images/avatar.jpg" alt="larry"><span class="site-author-status" title="Looking for you.">ğŸŒ‘</span></a><div class="site-author-name"><a href="/about/">larry</a></div><a class="site-name" href="/about/site.html">æ‹‰ç‘å›ã®å°çª</a><sub class="site-subtitle"></sub><div class="site-desciption">æ¯å¤©éƒ½æ˜¯æ–°çš„ä¸€å¤©å‘¢</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="é¦–é¡µ"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="å½’æ¡£"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">86</span></a></div><div class="site-state-item"><a href="/categories/" title="åˆ†ç±»"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">13</span></a></div><div class="site-state-item"><a href="/tags/" title="æ ‡ç­¾"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">42</span></a></div><a class="site-state-item hty-icon-button" href="/about/#comment" title="ç•™è¨€æ¿"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-clipboard-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="/atom.xml" title="RSS" target="_blank" style="color:orange"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rss-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/larrystd" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.zhihu.com/people/bu-qu-dou-yin-bu-gai-ming" title="çŸ¥ä¹" target="_blank" style="color:#0084FF"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhihu-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="Venray.Kong@outlook.com" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://travellings.link" title="Travelling" target="_blank" style="color:var(--hty-text-color)"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-train-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="æˆ‘çš„å°ä¼™ä¼´ä»¬" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a><a class="links-item hty-icon-button" href="/girls/" title="å–œæ¬¢çš„å¥³å­©å­" style="color:hotpink"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-women-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E6%AC%BE18-%E8%AE%A9%E6%8E%A5%E5%8F%A3%E5%AE%B9%E6%98%93%E8%A2%AB%E6%AD%A3%E7%A1%AE%E4%BD%BF%E7%94%A8%EF%BC%8C%E4%B8%8D%E6%98%93%E8%A2%AB%E8%AF%AF%E7%94%A8"><span class="toc-number">1.</span> <span class="toc-text">æ¡æ¬¾18 è®©æ¥å£å®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨ï¼Œä¸æ˜“è¢«è¯¯ç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E6%AC%BE19%EF%BC%9A%E8%AE%BE%E8%AE%A1class%E7%8A%B9%E5%A6%82%E8%AE%BE%E8%AE%A1type"><span class="toc-number">2.</span> <span class="toc-text">æ¡æ¬¾19ï¼šè®¾è®¡classçŠ¹å¦‚è®¾è®¡type</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E6%AC%BE20%EF%BC%9A%E5%B0%BD%E9%87%8F%E4%BB%A5pass-by-reference-to-const%E6%9B%BF%E6%8D%A2pass-by-value"><span class="toc-number">3.</span> <span class="toc-text">æ¡æ¬¾20ï¼šå°½é‡ä»¥pass-by-reference-to-constæ›¿æ¢pass-by-value</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E6%AC%BE21%EF%BC%9A%E5%BF%85%E9%A1%BB%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1%E6%97%B6%EF%BC%8C%E5%88%AB%E5%A6%84%E6%83%B3%E8%BF%94%E5%9B%9E%E5%85%B6reference"><span class="toc-number">4.</span> <span class="toc-text">æ¡æ¬¾21ï¼šå¿…é¡»è¿”å›å¯¹è±¡æ—¶ï¼Œåˆ«å¦„æƒ³è¿”å›å…¶reference</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E6%AC%BE22%EF%BC%9A%E5%B0%86%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E%E4%B8%BAprivate"><span class="toc-number">5.</span> <span class="toc-text">æ¡æ¬¾22ï¼šå°†æˆå‘˜å˜é‡å£°æ˜ä¸ºprivate</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E6%AC%BE23%EF%BC%9A%E5%B0%BD%E9%87%8F%E4%BB%A5non-member-non-friend%E6%9B%BF%E6%8D%A2member%E5%87%BD%E6%95%B0"><span class="toc-number">6.</span> <span class="toc-text">æ¡æ¬¾23ï¼šå°½é‡ä»¥non-member, non-friendæ›¿æ¢memberå‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E6%AC%BE24%EF%BC%9A-%E5%A6%82%E6%9E%9C%E6%9F%90%E4%B8%AA%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%82%E6%95%B0%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%EF%BC%8C%E8%AE%BE%E7%BD%AE%E8%BF%99%E4%B8%AA%E5%87%BD%E6%95%B0%E4%B8%BAnon-member"><span class="toc-number">7.</span> <span class="toc-text">æ¡æ¬¾24ï¼š å¦‚æœæŸä¸ªå‡½æ•°çš„å‚æ•°å¯èƒ½å‡ºç°ç±»å‹è½¬æ¢ï¼Œè®¾ç½®è¿™ä¸ªå‡½æ•°ä¸ºnon-member</span></a></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://larrystd.github.io/effective%20cpp/2021-02-09-4%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%A3%B0%E6%98%8E/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="larry"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="æ‹‰ç‘å›ã®å°çª"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">effectivecpp:è®¾è®¡å’Œå£°æ˜<a class="post-edit-link" href="https://github.com/larrystd/larrystd.github.io/tree/hexo/source/_posts/effective cpp/2021-02-09-4è®¾è®¡ä¸å£°æ˜.md" target="_blank" title="ç¼–è¾‘" rel="noopener"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-edit-line"></use></svg></a></h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="åˆ›å»ºæ—¶é—´ï¼š2021-02-09 00:00:00" itemprop="dateCreated datePublished" datetime="2021-02-09T00:00:00+08:00">2021-02-09</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="æœ¬æ–‡å­—æ•°"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-file-word-line"></use></svg></span> <span title="æœ¬æ–‡å­—æ•°">5k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="é˜…è¯»æ—¶é•¿"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-timer-line"></use></svg></span> <span title="é˜…è¯»æ—¶é•¿">19m</span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/effective-cpp/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">effective cpp</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/cpp/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">cpp</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#6200ee;"><p>æœ¬ç« ä¸»è¦æ˜¯C++æ¥å£çš„è®¾è®¡å’Œå£°æ˜ã€‚ä¹Ÿå°±æ˜¯â€œè®©æ¥å£å®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨ï¼Œä¸å®¹æ˜“è¢«è¯¯ç”¨â€ï¼Œæ¥å£åˆ†ä¸ºclass, function,å’Œtemplateã€‚</p>
<p>æœ¬ç« åŒ…å«ä»¥ä¸‹æ¡æ¬¾ï¼š</p>
<ul>
<li><p>æ¡æ¬¾18ï¼šè®©æ¥å£å®¹æ˜“è¢«ä½¿ç”¨ï¼Œä¸æ˜“è¢«è¯¯ç”¨</p>
</li>
<li><p>æ¡æ¬¾19ï¼šè®¾è®¡classçŠ¹å¦‚è®¾è®¡type</p>
</li>
<li><p>æ¡æ¬¾20ï¼šå®ä»¥pass-by-reference-to-constæ›¿æ¢pass-by-value</p>
</li>
<li><p>æ¡æ¬¾21ï¼šå¿…é¡»è¿”å›å¯¹è±¡æ—¶ï¼Œåˆ«å¦„æƒ³è¿”å›reference</p>
</li>
<li><p>æ¡æ¬¾22ï¼šå°†æˆå‘˜å˜é‡å£°æ˜ä¸ºprivate</p>
</li>
<li><p>æ¡æ¬¾23ï¼šå®ä»¥non-member, non-friendæ›¿æ¢memberå‡½æ•°</p>
</li>
<li><p>æ¡æ¬¾24ï¼šè‹¥æ‰€æœ‰å‚æ•°çš†éœ€ç±»å‹è½¬æ¢ï¼Œè¯·ä¸ºæ­¤é‡‡ç”¨non-memberå‡½æ•°</p>
</li>
<li><p>æ¡æ¬¾25ï¼šè€ƒè™‘å†™ä¸€ä¸ªä¸æŠ›å¼‚å¸¸çš„swapå‡½æ•°</p>
</li>
</ul>
<h3 id="æ¡æ¬¾18-è®©æ¥å£å®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨ï¼Œä¸æ˜“è¢«è¯¯ç”¨"><a href="#æ¡æ¬¾18-è®©æ¥å£å®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨ï¼Œä¸æ˜“è¢«è¯¯ç”¨" class="headerlink" title="æ¡æ¬¾18 è®©æ¥å£å®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨ï¼Œä¸æ˜“è¢«è¯¯ç”¨"></a>æ¡æ¬¾18 è®©æ¥å£å®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨ï¼Œä¸æ˜“è¢«è¯¯ç”¨</h3><p>C++<br>functionæ¥å£ï¼Œclassæ¥å£ï¼Œtemplateæ¥å£ï¼Œæ¯ä¸€ç§æ¥å£éƒ½æ˜¯å®¢æˆ·ä¸ä»£ç äº’åŠ¨çš„æ‰‹æ®µã€‚ç†æƒ³ä¸Šï¼Œå¦‚æœå®¢æˆ·ä¼å›¾ä½¿ç”¨æŸä¸ªæ¥å£å´æ²¡æœ‰è·å¾—é¢„æœŸçš„è¡Œä¸ºï¼Œè¿™ä¸ªä»£ç ä¸è¯¥é€šè¿‡ç¼–è¯‘ã€‚æ¬²å¼€å‘å®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨ï¼Œä¸å®¹æ˜“è¢«è¯¯ç”¨çš„æ¥å£ï¼Œ</p>
<span id="more"></span>

<p><strong>é¦–å…ˆå¿…é¡»è€ƒè™‘å®¢æˆ·å¯èƒ½åšå‡ºä»€ä¹ˆæ ·çš„é”™è¯¯</strong> ã€‚ä¾‹å¦‚ ã€</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span> <span class="token punctuation">&#123;</span> 
<span class="token keyword">public</span><span class="token operator">:</span> 
    <span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> month<span class="token punctuation">,</span> <span class="token keyword">int</span> day<span class="token punctuation">,</span> <span class="token keyword">int</span> year<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span> </code></pre>
<p>åº”å½“è€ƒè™‘æ—¥æœŸï¼Œæœˆä»½çš„é™åˆ¶ã€‚æ¯”å¦‚Date(2,30,1995)ä¸èƒ½é€šè¿‡ç¼–è¯‘ã€‚å¯ä»¥å¯¼å…¥ç®€å•çš„å¤–è¦†ç±»å‹wrapper<br>typesæ¥åŒºåˆ«å¤©æ•°ã€æœˆä»½å’Œå¹´æ•°ï¼Œç„¶åäºDateæ„é€ å‡½æ•°ä¸­ä½¿ç”¨è¿™äº›ç±»å‹ã€‚</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp">    <span class="token keyword">struct</span> <span class="token class-name">Day</span> <span class="token punctuation">&#123;</span> 
        <span class="token keyword">explicit</span> <span class="token function">Day</span><span class="token punctuation">(</span><span class="token keyword">int</span> d<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">val</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span>     
        <span class="token keyword">int</span> val<span class="token punctuation">;</span> 
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span> 
    <span class="token keyword">struct</span> <span class="token class-name">Month</span> <span class="token punctuation">&#123;</span> 
        <span class="token keyword">explicit</span> <span class="token function">Month</span><span class="token punctuation">(</span><span class="token keyword">int</span> m<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">val</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span> 
        <span class="token keyword">int</span> val<span class="token punctuation">;</span> 
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span> 
    <span class="token keyword">struct</span> <span class="token class-name">Year</span> <span class="token punctuation">&#123;</span> 
        <span class="token keyword">explicit</span> <span class="token function">Year</span><span class="token punctuation">(</span><span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">val</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span> 
        <span class="token keyword">int</span> val<span class="token punctuation">;</span> 
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span> 
     
    <span class="token keyword">class</span> <span class="token class-name">Date</span> <span class="token punctuation">&#123;</span> 
    <span class="token keyword">public</span><span class="token operator">:</span> 
        <span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">const</span> Month<span class="token operator">&amp;</span> m<span class="token punctuation">,</span> <span class="token keyword">const</span> Day<span class="token operator">&amp;</span> d<span class="token punctuation">,</span> <span class="token keyword">const</span> Year<span class="token operator">&amp;</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span> 
     
    Date <span class="token function">d</span><span class="token punctuation">(</span><span class="token function">Month</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Day</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Year</span><span class="token punctuation">(</span><span class="token number">1995</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ç±»å‹æ­£ç¡®  </span>
```  
ç„¶è€Œç›¸æ¯”äº<span class="token keyword">struct</span><span class="token punctuation">,</span>ç”¨ <span class="token operator">*</span><span class="token operator">*</span><span class="token keyword">class</span>å¹¶å°è£…å…¶å†…æ•°æ®è¦å¥½ã€‚åŒæ—¶é™åˆ¶å…¶å€¼<span class="token operator">*</span><span class="token operator">*</span>
ï¼Œä¾‹å¦‚ä¸€å¹´åªæœ‰<span class="token number">12</span>ä¸ªæœˆä»½ã€‚åŠæ³•ä¹‹ä¸€æ˜¯åˆ©ç”¨<span class="token keyword">enum</span>è¡¨ç°æœˆä»½ï¼Œä½†<span class="token keyword">enum</span>ä¸å…·æœ‰å°è£…æ€§ã€‚æ¯”è¾ƒæœ‰æ•ˆçš„æ–¹æ³•æ˜¯é¢„å…ˆå®šä¹‰æ‰€æœ‰æœ‰æ•ˆçš„Month
```cpp
    <span class="token keyword">class</span> <span class="token class-name">Month</span> <span class="token punctuation">&#123;</span> 
    <span class="token keyword">public</span><span class="token operator">:</span> 
        <span class="token keyword">static</span> Month <span class="token function">Jan</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> <span class="token function">Month</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> 
        <span class="token keyword">static</span> Month <span class="token function">Feb</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> <span class="token function">Month</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> 
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
        <span class="token keyword">static</span> Month <span class="token function">Dec</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> <span class="token function">Month</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> 
    <span class="token keyword">private</span><span class="token operator">:</span> 
        <span class="token keyword">explicit</span> <span class="token function">Month</span><span class="token punctuation">(</span><span class="token keyword">int</span> m<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// é˜»æ­¢å¤–ç•Œè®¿é—® </span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span> 
    Date <span class="token function">d</span><span class="token punctuation">(</span><span class="token class-name">Month</span><span class="token double-colon punctuation">::</span><span class="token function">Mar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Day</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Year</span><span class="token punctuation">(</span><span class="token number">1995</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </code></pre>
<p>â€œä»¥å‡½æ•°æ›¿æ¢å¯¹è±¡è¡¨ç°ç‰¹å®šæœˆä»½â€ï¼ŒåŸå› æ˜¯ <strong>non-local staticå¯¹è±¡çš„åˆå§‹åŒ–</strong> æœ‰å¯èƒ½å‡ºé—®é¢˜ï¼Œé˜…è¯»æ¡æ¬¾4æ¢å¤è®°å¿†ã€‚</p>
<p>ä»»ä½•æ¥å£å¦‚æœè¦æ±‚å®¢æˆ·å¿…é¡»åšæŸäº›äº‹ï¼Œå°±æœ‰ä¸æ­£ç¡®ä½¿ç”¨çš„å€¾å‘ï¼Œå› ä¸ºå®¢æˆ·å¯èƒ½ä¼šå¿˜è®°åšé‚£ä»¶äº‹ã€‚ä¾‹å¦‚æ¡æ¬¾13å¯¼å…¥äº†ä¸€ä¸ªfactoryå‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘Investmentç»§æ‰¿ä½“ç³»å†…çš„ä¸€ä¸ªåŠ¨æ€åˆ†é…å¯¹è±¡</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp">Investment<span class="token operator">*</span> <span class="token function">createInvestment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
std<span class="token double-colon punctuation">::</span>shared_ptr<span class="token operator">&lt;</span>Investment<span class="token operator">></span> <span class="token function">createInvestment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ç›´æ¥è¿”å›æ™ºèƒ½æŒ‡é’ˆ </span>
 
std<span class="token double-colon punctuation">::</span>shared_ptr<span class="token operator">&lt;</span>investment<span class="token operator">></span> <span class="token function">pInv</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>Investment<span class="token operator">*</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
getRidOfInvestment<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// åˆå§‹åŒ–ï¼Œå°†nullè½¬æ¢æˆInvestmentç±»å‹çš„æŒ‡é’ˆ </span></code></pre>
<p>ä¸ºé¿å…èµ„æºæ³„æ¼ï¼Œ <strong>createInvestmentè¿”å›çš„æŒ‡é’ˆè¢«åˆ é™¤æ—¶ï¼Œè‡³å°‘åº”å¼€å¯ä¸¤ä¸ªå®¢æˆ·é”™è¯¯å¯èƒ½ï¼šæ²¡æœ‰åˆ é™¤æŒ‡é’ˆï¼Œæˆ–åˆ é™¤åŒä¸€ä¸ªæŒ‡é’ˆè¶…è¿‡ä¸€æ¬¡ã€‚</strong></p>
<p>åŒç†ï¼Œä¸ºäº†é˜²æ­¢å®¢æˆ·å¿˜è®°ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œç›´æ¥è¿”å›æ™ºèƒ½æŒ‡é’ˆã€‚<br><strong>shared_ptrçš„æŸä¸ªæ„é€ å‡½æ•°æ¥å—ä¸¤ä¸ªå®å‚ï¼Œä¸€ä¸ªæ˜¯è¢«ç®¡ç†çš„æŒ‡é’ˆï¼Œå¦ä¸€ä¸ªæ˜¯å¼•ç”¨æ¬¡æ•°ä¸º0æ—¶è¢«è°ƒç”¨çš„åˆ é™¤å™¨ã€‚</strong></p>
<p>Boostçš„shared_ptræ˜¯åŸå§‹æŒ‡é’ˆçš„ä¸¤å€å¤§ï¼Œä»¥virtualå½¢å¼è°ƒç”¨åˆ é™¤å™¨ï¼Œå¤šçº¿ç¨‹ä¿®æ”¹å¼•ç”¨æ¬¡æ•°ã€‚æ˜¾ç„¶å®ƒæ¯”åŸå§‹æŒ‡é’ˆå¤§è€Œæ…¢ï¼Œä½†æ˜¯é™ä½ç”¨æˆ·é”™è¯¯æ–¹é¢çš„æˆæ•ˆç¡®å®æ˜¾è‘—ã€‚</p>
<p>ç»¼ä¸Š</p>
<ol>
<li>ä¿ƒè¿›æ­£ç¡®ä½¿ç”¨çš„æ–¹æ³•åŒ…æ‹¬æ¥å£çš„ä¸€è‡´æ€§ï¼Œä¸å†…ç½®ç±»å‹çš„è¡Œä¸ºå…¼å®¹ </li>
<li><strong>é˜»æ­¢è¯¯ç”¨çš„æ–¹æ³•åŒ…æ‹¬å»ºç«‹æ–°ç±»å‹ã€é™åˆ¶ç±»å‹ä¸Šçš„æ“ä½œã€æŸç¼šå¯¹è±¡å€¼ã€ä»¥åŠæ¶ˆé™¤å®¢æˆ·çš„èµ„æºç®¡ç†è´£ä»»</strong></li>
</ol>
<h3 id="æ¡æ¬¾19ï¼šè®¾è®¡classçŠ¹å¦‚è®¾è®¡type"><a href="#æ¡æ¬¾19ï¼šè®¾è®¡classçŠ¹å¦‚è®¾è®¡type" class="headerlink" title="æ¡æ¬¾19ï¼šè®¾è®¡classçŠ¹å¦‚è®¾è®¡type"></a>æ¡æ¬¾19ï¼šè®¾è®¡classçŠ¹å¦‚è®¾è®¡type</h3><p>C++å°±åƒå…¶ä»–OOPï¼ˆé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼‰è¯­è¨€ä¸€æ ·ï¼Œå½“å®šä¹‰ä¸€ä¸ªæ–°classï¼Œä¹Ÿå°±å®šä¹‰äº†æ–°çš„type.é‡è½½å‡½æ•°å’Œæ“ä½œç¬¦ï¼Œæ§åˆ¶å†…å­˜çš„åˆ†é…å’Œå½’è¿˜ï¼Œå®šä¹‰å¯¹è±¡çš„åˆå§‹åŒ–å’Œç»ˆç»“â€¦â€¦å…¨éƒ½åœ¨ä½ æ‰‹ä¸Šã€‚è®¾è®¡é«˜æ•ˆçš„classé¦–å…ˆé¢å¯¹çš„é—®é¢˜</p>
<ol>
<li><strong>æ–°typeå¯¹è±¡å¦‚ä½•è¢«åˆ›å»ºå’Œé”€æ¯</strong> ã€‚è¿™å½±å“åˆ° <strong>classæ„é€ å‡½æ•°å’Œææ„å‡½æ•°ä»¥åŠå†…å­˜åˆ†é…å‡½æ•°å’Œé‡Šæ”¾å‡½æ•°</strong> çš„è®¾è®¡(operator new, operator new[], operator delete, operator delete[] ) </li>
<li><strong>å¯¹è±¡çš„åˆå§‹åŒ–å’Œå¯¹è±¡èµ‹å€¼è¯¥æœ‰ä»€ä¹ˆæ ·çš„å·®åˆ«</strong> ã€‚è¿™å†³å®šæ„é€ å‡½æ•°ï¼Œcopyæ„é€ å‡½æ•°å’Œassignmentèµ‹å€¼æ“ä½œç¬¦çš„è¡Œä¸ºã€‚æ³¨æ„ä¸è¦æ··æ·†åˆå§‹åŒ–å’Œèµ‹å€¼ </li>
<li><strong>typeå¯¹è±¡å¦‚æœpassed by valueå€¼ä¼ é€’ï¼Œæ„å‘³ç€ä»€ä¹ˆ</strong> ã€‚copyæ„é€ å‡½æ•°å®šä¹‰pass by valueçš„å®ç° </li>
<li><strong>æ–°typeçš„åˆæ³•å€¼</strong> ã€‚å¯¹classæˆå‘˜å˜é‡è€Œè¨€ï¼Œé€šå¸¸åªæœ‰æŸäº›æ•°å€¼æ˜¯æœ‰æ•ˆçš„ï¼Œè¿™äº›çº¦æŸæ¡ä»¶ä¹Ÿå†³å®šäº†æˆå‘˜å‡½æ•°ï¼ˆç‰¹åˆ«æ˜¯æ„é€ å‡½æ•°ï¼Œèµ‹å€¼æ“ä½œç¬¦ï¼Œsetterå‡½æ•°ï¼‰å¿…é¡»è¿›è¡Œçš„é”™è¯¯æ£€æŸ¥å·¥ä½œã€‚ </li>
<li><strong>typeæ˜¯å¦éœ€è¦æŸä¸ªç»§æ‰¿å›¾</strong> ã€‚å¦‚æœé›†æˆæŸäº›æ—¢æœ‰çš„classï¼Œå°±ä¼šå—åˆ°é‚£äº›classè®¾è®¡çš„æŸç¼šï¼Œç‰¹åˆ«æ˜¯virtualã€‚ </li>
<li><strong>typeéœ€è¦ä»€ä¹ˆæ ·çš„è½¬æ¢</strong> ã€‚å¦‚æœå¸Œæœ›T1ä¹‹ç‰©è¢«éšå¼è½¬æ¢ä¸ºT2ä¹‹ç‰©ï¼Œå°±å¿…é¡»åœ¨class T1å†…å†™ä¸€ä¸ªç±»å‹è½¬æ¢å‡½æ•°(operator T2)æˆ–åœ¨class T2å†…å†™ä¸€ä¸ªnon-explicit-one-argumentå¯è¢«å•ä¸€å®å‚è°ƒç”¨çš„æ„é€ å‡½æ•°ã€‚å¦‚æœå­˜åœ¨explicitå°±å¿…é¡»ä¸“é—¨æ‰§è¡Œè½¬æ¢çš„å‡½æ•°ã€‚ </li>
<li><strong>ä»€ä¹ˆæ ·çš„æ“ä½œç¬¦å’Œå‡½æ•°å¯¹typeåˆç†</strong></li>
<li><strong>è°è¯¥å»ç”¨é—®typeæˆå‘˜</strong> ï¼Œä»è€Œè®¾å®špublic, protected, privateæˆå‘˜ã€‚ä»¥åŠfriendå‡½æ•° </li>
<li><strong>typeæœ‰å¤šä¹ˆæœ‰ä¸€èˆ¬åŒ–</strong> ã€‚å®šä¹‰typeå®¶æ—ï¼Œå¦‚æœéœ€è¦å‚æ•°ä¸€èˆ¬åŒ–åˆ™éœ€è¦å®šä¹‰class template </li>
<li><strong>çœŸçš„éœ€è¦typeå—</strong> ï¼Ÿå¦‚æœå®šä¹‰æ–°çš„derived classä»¥ä¾¿ä¸ºæ—¢æœ‰çš„classæ·»åŠ æœºèƒ½ï¼Œé‚£non-memberæˆ–templateæ›´èƒ½è¾¾åˆ°ç›®æ ‡ã€‚ </li>
</ol>
<p>ä»¥ä¸Šé—®é¢˜ä¸å®¹æ˜“å›ç­”ï¼Œå› æ­¤å®šä¹‰é«˜æ•ˆçš„classæ˜¯ä¸€ç§æŒ‘æˆ˜ã€‚ç„¶è€Œå¦‚æœèƒ½è®¾è®¡å‡ºC++å†…ç½®ç±»å‹é‚£æ ·çš„ç”¨æˆ·è‡ªå®šä¹‰classï¼Œä¸€åˆ‡æ±—æ°´ä¾¿éƒ½å€¼å¾—ã€‚</p>
<p>è¯·è®°ä½ï¼Œ <strong>classçš„è®¾è®¡å°±æ˜¯typeçš„è®¾è®¡ï¼Œå®šä¹‰æ–°typeä¹‹å‰è¯·ç¡®å®šä»¥ä¸Šæ‰€æœ‰é—®é¢˜</strong> ã€‚</p>
<h3 id="æ¡æ¬¾20ï¼šå°½é‡ä»¥pass-by-reference-to-constæ›¿æ¢pass-by-value"><a href="#æ¡æ¬¾20ï¼šå°½é‡ä»¥pass-by-reference-to-constæ›¿æ¢pass-by-value" class="headerlink" title="æ¡æ¬¾20ï¼šå°½é‡ä»¥pass-by-reference-to-constæ›¿æ¢pass-by-value"></a>æ¡æ¬¾20ï¼šå°½é‡ä»¥pass-by-reference-to-constæ›¿æ¢pass-by-value</h3><p>é»˜è®¤æƒ…å†µä¸‹C++ä»¥by valueçš„æ–¹å¼ï¼ˆä¸€ä¸ªç»§æ‰¿è‡ªCçš„æ–¹å¼ï¼‰ä¼ é€’å¯¹è±¡è‡³å‡½æ•°ã€‚é»˜è®¤çš„ï¼Œ<br><strong>å‡½æ•°å‚æ•°éƒ½æ˜¯ä»¥å®é™…å‚æ•°çš„å‰¯æœ¬ä½œä¸ºåˆå€¼ï¼Œè°ƒç”¨ç«¯æ‰€è·å¾—çš„äº¦æ˜¯å‡½æ•°è¿”å›å€¼çš„ä¸€ä¸ªå‰¯æœ¬ã€‚è¿™äº›å‰¯æœ¬ç”±å¯¹è±¡çš„copyæ„é€ å‡½æ•°ç”Ÿæˆ</strong> ï¼Œè¿™å¯èƒ½ä½¿pass by<br>valueæˆä¸ºæˆæœ¬é«˜çš„æ“ä½œã€‚</p>
<p>è€ƒè™‘ä¾‹å­</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span> 
<span class="token keyword">public</span><span class="token operator">:</span> 
    <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å¤šæ€ç»“æ„ virtualææ„ </span>
<span class="token keyword">private</span><span class="token operator">:</span> 
    std<span class="token double-colon punctuation">::</span>string name<span class="token punctuation">;</span> 
    std<span class="token double-colon punctuation">::</span>string address<span class="token punctuation">;</span> 
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span> 
<span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Person</span></span> <span class="token punctuation">&#123;</span> 
<span class="token keyword">public</span><span class="token operator">:</span> 
    <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token operator">~</span><span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">private</span><span class="token operator">:</span> 
    std<span class="token double-colon punctuation">::</span>string schoolName<span class="token punctuation">;</span> 
    std<span class="token double-colon punctuation">::</span>string schoolAddress<span class="token punctuation">;</span> 
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span> 
 
<span class="token comment">// è°ƒç”¨ä»£ç  </span>
<span class="token keyword">bool</span> <span class="token function">validateStudent</span><span class="token punctuation">(</span>Student s<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ä»¥by valueå½¢å¼æ¥å—å‚æ•° </span>
Student plato<span class="token punctuation">;</span> 
<span class="token keyword">bool</span> platoIsOK <span class="token operator">=</span> <span class="token function">validateStudent</span><span class="token punctuation">(</span>plato<span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
<span class="token comment">// pass by reference-to-const </span>
<span class="token keyword">bool</span> <span class="token function">validateStudent</span><span class="token punctuation">(</span><span class="token keyword">const</span> Student<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span> </code></pre>
<p>äº‹å®ä¸Šï¼ŒStudentä¸­æœ‰ä¸¤ä¸ªstringå¯¹è±¡ï¼ŒPersonä¹Ÿæ˜¯ã€‚ä»¥by valueå½¢å¼ä¼ å…¥Student så®é™…ä¸Šè°ƒç”¨ä¸€æ¬¡Student<br>copyå‡½æ•°ï¼Œä¸€æ¬¡Person copyå‡½æ•°ï¼Œå››ä¸ªstring copyå‡½æ•°å…±å…­ä¸ªã€‚ <strong>ä»¥ä¸Šbyvalueä¼ å€¼æ€»ä½“æˆæœ¬ä¸ºå…­ä¸ªcopyæ„é€ å‡½æ•°ï¼Œå…­ä¸ªææ„å‡½æ•°ã€‚</strong></p>
<p>å½“ä½¿ç”¨pass by reference constï¼Œæ²¡æœ‰ä»»ä½•æ„é€ å‡½æ•°æˆ–ææ„å‡½æ•°è¢«è°ƒç”¨ï¼Œå› ä¸ºæ²¡æœ‰ä»»ä½•æ–°å¯¹è±¡è¢«åˆ›å»ºã€‚by<br>referenceä¼ é€’å£°æ˜ä¸ºconstæ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œä¸ç„¶å¯èƒ½ä¼šè¢«ä¿®æ”¹å¯¹è±¡ã€‚</p>
<p>ä»¥by referenceæ–¹å¼ä¼ é€’å‚æ•°ä¹Ÿå¯ä»¥é¿å…å€¼ä¼ é€’å¯èƒ½å¸¦æ¥çš„slicingå¯¹è±¡åˆ‡å‰²é—®é¢˜ã€‚å¦‚ä¸‹</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Window</span> <span class="token punctuation">&#123;</span> 
<span class="token keyword">public</span><span class="token operator">:</span> 
    std<span class="token double-colon punctuation">::</span>string <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>    <span class="token comment">// è¿”å›çª—å£åç§° </span>
    <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>    <span class="token comment">// æ˜¾ç¤ºçª—å£ï¼Œå†…å®¹ </span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span> 
<span class="token keyword">class</span> <span class="token class-name">WindowWithScrollBars</span><span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Window</span></span> <span class="token punctuation">&#123;</span> 
<span class="token keyword">public</span><span class="token operator">:</span> 
    <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span> 
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span> 
 
<span class="token comment">// æ‰“å°å‡½æ•° </span>
<span class="token keyword">void</span> <span class="token function">printNameAndDisplay</span><span class="token punctuation">(</span>Window w<span class="token punctuation">)</span>    <span class="token comment">// å‚æ•°å¯èƒ½è¢«åˆ‡å‰² </span>
<span class="token punctuation">&#123;</span> 
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> w<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    w<span class="token punctuation">.</span><span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">&#125;</span> 
 
 
WindowWithScrollBars wwsb<span class="token punctuation">;</span> 
<span class="token function">printNameAndDisplay</span><span class="token punctuation">(</span>wwsb<span class="token punctuation">)</span><span class="token punctuation">;</span> </code></pre>
<p>ä¼ å…¥çš„æ˜¯å­å¯¹è±¡WindowWithScrollBarsï¼Œä½† <strong>åˆ°å‡½æ•°ä¸­pass by valueåªä¼šè¡¨ç°çš„æ˜¯ä¸ªWindowå¯¹è±¡</strong><br>ï¼Œæ‰€æœ‰WindowWithScrollBarsçš„ç‰¹åŒ–ä¿¡æ¯å°†ä¼šè¢«åˆ é™¤ï¼Œ <strong>derived classåˆ°è¾¾å‡½æ•°æ—¶å‘ä¸Šè½¬å‹ä¸ºbase classã€‚</strong></p>
<p>è§£å†³åˆ‡å‰²é—®é¢˜åŠæ³•å°±æ˜¯ï¼Œé€šè¿‡ä¼ å¼•ç”¨ä¼ å…¥const Window&amp; wã€‚è¿™æ—¶ä¼ å…¥çš„æ˜¯ä»€ä¹ˆç±»å‹ï¼Œwå°±è¡¨ç°å‡ºé‚£ç§ç±»å‹ã€‚</p>
<p><strong>å°½é‡ä»¥pass-by-reference-to-constæ›¿æ¢pass-by-value</strong> ã€‚å‰è€…é€šå¸¸æ¯”è¾ƒé«˜æ•ˆã€‚<br><strong>ä½†è¯¥è§„åˆ™ä¸é€‚ç”¨äºå†…ç½®ç±»å‹ï¼Œä»¥åŠSTLçš„è¿­ä»£å™¨å’Œå‡½æ•°å¯¹è±¡ã€‚</strong> ä¹ æƒ¯ä¸ŠSTLçš„è¿­ä»£å™¨è¢«è®¾è®¡ä¸ºpass-by-<br>valueï¼Œè¿™ç§è§„åˆ™ä¹Ÿæ˜¯æ¡æ¬¾1ï¼šè§„åˆ™ä¹‹æ”¹å˜å–å†³äºä½¿ç”¨å“ªä¸€éƒ¨åˆ†C++çš„ä½“ç°ã€‚</p>
<h3 id="æ¡æ¬¾21ï¼šå¿…é¡»è¿”å›å¯¹è±¡æ—¶ï¼Œåˆ«å¦„æƒ³è¿”å›å…¶reference"><a href="#æ¡æ¬¾21ï¼šå¿…é¡»è¿”å›å¯¹è±¡æ—¶ï¼Œåˆ«å¦„æƒ³è¿”å›å…¶reference" class="headerlink" title="æ¡æ¬¾21ï¼šå¿…é¡»è¿”å›å¯¹è±¡æ—¶ï¼Œåˆ«å¦„æƒ³è¿”å›å…¶reference"></a>æ¡æ¬¾21ï¼šå¿…é¡»è¿”å›å¯¹è±¡æ—¶ï¼Œåˆ«å¦„æƒ³è¿”å›å…¶reference</h3><p>åœ¨åšå®šè¿½æ±‚pass-by-referenceçš„çº¯åº¦ä¸­ï¼Œå¯èƒ½çŠ¯ä¸‹è‡´å‘½é”™è¯¯ï¼š <strong>è¿”å›referenceæŒ‡å‘å…¶å®å¹¶ä¸å­˜åœ¨çš„å¯¹è±¡ã€‚</strong><br>è¿™æ„å‘³ç€ä¸æ˜¯ä¸€åˆ‡éƒ½å¯èƒ½è¿”å›referenceã€‚</p>
<p>ç®€è€Œè¨€ä¹‹ï¼Œè‹¥å‡½æ•°è¿”å›æŒ‡é’ˆæˆ–è€…å¼•ç”¨ï¼Œä¸€å®šè¦ç¡®ä¿è¿”å›ä¹‹åæŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ä¾ç„¶å­˜åœ¨ã€‚</p>
<p>åœ¨stackä¸­åˆ›å»ºå¯¹è±¡</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">const</span> Rational<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Rational<span class="token operator">&amp;</span> lhs<span class="token punctuation">,</span> <span class="token keyword">const</span> Rational<span class="token operator">&amp;</span> rhs<span class="token punctuation">)</span> 
<span class="token punctuation">&#123;</span> 
    Rational <span class="token function">result</span><span class="token punctuation">(</span>lhs<span class="token punctuation">.</span>n <span class="token operator">*</span> rhs<span class="token punctuation">.</span>n<span class="token punctuation">,</span> lhs<span class="token punctuation">.</span>d <span class="token operator">*</span> rhs<span class="token punctuation">.</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ç³Ÿç³•çš„ä»£ç  </span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span> 
<span class="token punctuation">&#125;</span></code></pre>
<p>ä¸Šè¿°ä»£ç ä¸­ <strong>resultæ˜¯ä¸ªlocal stackå¯¹è±¡ï¼Œè€Œlocalå¯¹è±¡åœ¨å‡½æ•°é€€å‡ºå‰å°±è¢«é”€æ¯äº†</strong> ã€‚å› æ­¤è¿”å›ç»“æœå®é™…æ˜¯â€œæ— å®šä¹‰è¡Œä¸ºâ€ååˆ†å±é™©ã€‚</p>
<p>åœ¨heapä¸­æ„é€ å¯¹è±¡</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">const</span> Rational<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Rational<span class="token operator">&amp;</span> lhs<span class="token punctuation">,</span> <span class="token keyword">const</span> Rational<span class="token operator">&amp;</span> rhs<span class="token punctuation">)</span> 
<span class="token punctuation">&#123;</span> 
    Rational<span class="token operator">*</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Rational</span><span class="token punctuation">(</span>lhs<span class="token punctuation">.</span>n <span class="token operator">*</span> rhs<span class="token punctuation">.</span>n<span class="token punctuation">,</span> lhs<span class="token punctuation">.</span>d <span class="token operator">*</span> rhs<span class="token punctuation">.</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword">return</span> <span class="token operator">*</span>result<span class="token punctuation">;</span> 
<span class="token punctuation">&#125;</span> 
 
<span class="token comment">// ä¸‹åˆ—ä»£ç ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ </span>
Rational w<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>z<span class="token punctuation">;</span> 
w <span class="token operator">=</span> x <span class="token operator">*</span> y <span class="token operator">*</span> z<span class="token punctuation">;</span>    <span class="token comment">// ç­‰ä»·äºoperator*(operator(x,y),z) </span></code></pre>
<p>ä»¥ä¸Šé—®é¢˜æ˜¯ï¼Œè°è¯¥å¯¹newå‡ºçš„å¯¹è±¡å®ç°deleteã€‚äº‹å®ä¸Šï¼Œä»¥ä¸Šä»£ç å¾ˆå®¹æ˜“å¯¼è‡´å†…å­˜æ³„æ¼ã€‚ä¾‹å¦‚è¿ä¹˜æ“ä½œç¬¦newäº†ä¸¤ä¸ªå¯¹è±¡ï¼Œä½†æ— æ³•å¯¹è¿™ä¸¤ä¸ªå¯¹è±¡ä½¿ç”¨deleteã€‚</p>
<p>æ˜¾ç„¶ <strong>ä»¥ä¸Šä¸è®ºon-the-stackè¿˜æ˜¯on-the-heapï¼Œè¿”å›å¼•ç”¨éƒ½å¾ˆå®¹æ˜“å¯¼è‡´é”™è¯¯ã€‚å®é™…ä¸Šç”±äºè¦å»ºç«‹å¯¹è±¡ï¼Œè¿™æ—¶å€™è¿”å›å¼•ç”¨æ•ˆç‡ä¸å¿…ç›´æ¥è¿”å›å¯¹è±¡å¥½å¤šå°‘ã€‚</strong></p>
<p>ç»“è®ºå°±æ˜¯ <strong>å¿…é¡»è¿”å›å¯¹è±¡æ—¶ï¼Œåˆ«å¦„æƒ³è¿”å›å…¶reference</strong><br>ã€‚å½“ä½ å¿…é¡»åœ¨è¿”å›ä¸€ä¸ªreferenceå’Œè¿”å›ä¸€ä¸ªobjectä¹‹é—´æŠ‰æ‹©æ—¶ï¼Œä½ çš„å·¥ä½œå°±æ˜¯æŒ‘å‡ºè¡Œä¸ºæ­£ç¡®çš„é‚£ä¸ªã€‚å°±è®©ç¼–è¯‘å™¨å‚å•†ä¸ºå°½å¯èƒ½é™ä½æˆæœ¬å¥‹åŠ›å§ï¼Œä½ åªéœ€è¦æŒ‘é€‰è¡Œä¸ºæ­£ç¡®çš„å³å¯ã€‚</p>
<h3 id="æ¡æ¬¾22ï¼šå°†æˆå‘˜å˜é‡å£°æ˜ä¸ºprivate"><a href="#æ¡æ¬¾22ï¼šå°†æˆå‘˜å˜é‡å£°æ˜ä¸ºprivate" class="headerlink" title="æ¡æ¬¾22ï¼šå°†æˆå‘˜å˜é‡å£°æ˜ä¸ºprivate"></a>æ¡æ¬¾22ï¼šå°†æˆå‘˜å˜é‡å£°æ˜ä¸ºprivate</h3><ol>
<li>è¯­æ³•ä¸€è‡´æ€§ï¼Œå¦‚æœæˆå‘˜å˜é‡ä¸æ˜¯publicè€Œæ˜¯privateæˆ–protectedï¼Œå®¢æˆ·å”¯ä¸€èƒ½å¤Ÿè®¿é—®å¯¹è±¡çš„åŠæ³•å°±æ˜¯é€šè¿‡æˆå‘˜å‡½æ•°ï¼Œä»è€Œåœ¨è¯­æ³•ä¸Šæœ‰ä¸€è‡´æ€§ã€‚ </li>
<li>é€šè¿‡å‡½æ•°è®¿é—®ï¼Œå¯ä»¥å®ç°â€œä¸å‡†è®¿é—®â€ï¼Œâ€œåªè¯»è®¿é—®â€ï¼Œâ€œè¯»å†™è®¿é—®â€ç­‰æ§åˆ¶ã€‚ç»†åˆ†åˆ’åˆ†æ§åˆ¶å¯ä»¥é¿å…å¯¹æ¯ä¸ªæˆå‘˜å˜é‡è®¾ç½®ä¸€ä¸ªgetterå‡½æ•°å’Œsetterå‡½æ•°ã€‚ </li>
</ol>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">AccessLevels</span> <span class="token punctuation">&#123;</span> 
<span class="token keyword">public</span><span class="token operator">:</span> 
    <span class="token keyword">int</span> <span class="token function">getReadOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> readOnly<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> 
    <span class="token keyword">void</span> <span class="token function">setReadWrite</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> readWrite <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> 
    <span class="token keyword">int</span> <span class="token function">getReadWrite</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> readWrite<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> 
    <span class="token keyword">void</span> <span class="token function">setWriteOnly</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> writeOnly <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> 
<span class="token keyword">private</span><span class="token operator">:</span> 
    <span class="token keyword">int</span> noAccess<span class="token punctuation">;</span>    <span class="token comment">// ä¸èƒ½è®¿é—® </span>
    <span class="token keyword">int</span> readOnly<span class="token punctuation">;</span>    <span class="token comment">// åªè¯»è®¿é—® </span>
    <span class="token keyword">int</span> readWrite<span class="token punctuation">;</span>    <span class="token comment">// è¯»å†™è®¿é—® </span>
    <span class="token keyword">int</span> writeOnly<span class="token punctuation">;</span>    <span class="token comment">// æƒŸå†™è®¿é—® </span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  </code></pre>
<ol>
<li><p>å°è£…ã€‚ä»¥å‡½æ•°è®¿é—®æˆå‘˜å˜é‡ï¼Œæ—¥åå¯ä»¥æ›¿æ¢è¿™ä¸ªæˆå‘˜å˜é‡ï¼Œè€Œclasså®¢æˆ·ä¸ä¼šçŸ¥é“classå†…éƒ¨çš„å˜åŒ–ã€‚ <strong>publicæ„å‘³ç€ä¸å°è£…ï¼Œä¸å°è£…æ„å‘³ç€å®¹æ˜“è¢«ç ´åï¼Œä»£ç ä¾èµ–æ€§å¼ºï¼Œä¸å®¹æ˜“ç»´æŠ¤ï¼Œæ›´æ–°ã€‚</strong></p>
</li>
<li><p><strong>å¯¹äºä¸€ä¸ªpublicæˆå‘˜å˜é‡ï¼Œå¦‚æœåšå‡ºæ›´æ”¹ç”šè‡³å–æ¶ˆäº†å®ƒã€‚æ‰€æœ‰ä½¿ç”¨å®ƒçš„å®¢æˆ·ç éƒ½ä¼šè¢«ç ´åï¼›å¯¹äºä¸€ä¸ªprotectedæˆå‘˜å˜é‡ï¼Œæ›´æ”¹åæ‰€æœ‰derivedclassä¼šè¢«ç ´åï¼›å¯¹privateï¼Œæ²¡æœ‰å®¢æˆ·ç ä¼šè¢«ç ´åã€‚</strong> æ˜¾ç„¶ä½¿ç”¨privateæ›´å®¹æ˜“ç»´æŠ¤ï¼Œå®¢æˆ·åªç®¡ä½¿ç”¨å¯¹è±¡ï¼Œè€Œå¯¹å†…éƒ¨ç»“æ„æ”¹å˜æ²¡æœ‰å¿…è¦çŸ¥é“ã€‚</p>
</li>
</ol>
<h3 id="æ¡æ¬¾23ï¼šå°½é‡ä»¥non-member-non-friendæ›¿æ¢memberå‡½æ•°"><a href="#æ¡æ¬¾23ï¼šå°½é‡ä»¥non-member-non-friendæ›¿æ¢memberå‡½æ•°" class="headerlink" title="æ¡æ¬¾23ï¼šå°½é‡ä»¥non-member, non-friendæ›¿æ¢memberå‡½æ•°"></a>æ¡æ¬¾23ï¼šå°½é‡ä»¥non-member, non-friendæ›¿æ¢memberå‡½æ•°</h3><p>ä¸€ä¸ªclassè¡¨ç¤ºç½‘é¡µæµè§ˆå™¨</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">WebBrowser</span> <span class="token punctuation">&#123;</span> 
   <span class="token keyword">public</span><span class="token operator">:</span> 
       <span class="token keyword">void</span> <span class="token function">clearCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ¸…é™¤ç¼“å­˜åŒº </span>
       <span class="token keyword">void</span> <span class="token function">clearHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ¸…é™¤å†å² </span>
       <span class="token keyword">void</span> <span class="token function">removeCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ¸…é™¤cookies </span>
    
       <span class="token comment">// ä¸€æ¬¡æ‰§è¡Œä»¥ä¸Šä¸‰ä¸ªåŠ¨ä½œï¼Œä½¿ç”¨member å‡½æ•° </span>
       <span class="token keyword">void</span> <span class="token function">clearEverything</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
   <span class="token punctuation">&#125;</span> 
    
   <span class="token comment">// ä½¿ç”¨non-memberå‡½æ•°è°ƒç”¨memberå‡½æ•°å®ç°ä¸Šè¿°ä¸‰ä¸ªåŠ¨ä½œ </span>
   <span class="token keyword">void</span> <span class="token function">clearBrowser</span><span class="token punctuation">(</span>WebBrowser<span class="token operator">&amp;</span> wb<span class="token punctuation">)</span> 
   <span class="token punctuation">&#123;</span> 
       wb<span class="token punctuation">.</span><span class="token function">clearCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
       wb<span class="token punctuation">.</span><span class="token function">clearHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
       wb<span class="token punctuation">.</span><span class="token function">removeCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
   <span class="token punctuation">&#125;</span>  </code></pre>
<p>ä»¥ä¸Šï¼Œä½¿ç”¨memberå‡½æ•°clearEverythingå’Œnon-memberå‡½æ•°clearBrowserå“ªä¸€ä¸ªæ¯”è¾ƒå¥½å‘¢ï¼Ÿ</p>
<p>ä»å°è£…è®¨è®ºï¼šå¦‚æœè¢«å°è£…ï¼Œå°±ä¸å†å¯è§ï¼Œæ„ˆå¤šä¸œè¥¿è¢«å°è£…ï¼Œæ„ˆå°‘äººå¯ä»¥çœ‹åˆ°å®ƒï¼Œä»è€Œæœ‰æ„ˆå¤§å¼¹æ€§å»æ”¹å˜å®ƒã€‚å› æ­¤å°è£…å¯ä»¥å®ç°ï¼Œæ”¹å˜äº‹ç‰©è€Œåªå½±å“æœ‰é™å®¢æˆ·ã€‚</p>
<p>èƒ½å¤Ÿè®¿é—®privateæˆå‘˜å˜é‡çš„å‡½æ•°åªæœ‰class çš„memberå‡½æ•°åŠ ä¸Šfriendå‡½æ•°ã€‚ <strong>non-memberå‡½æ•°å’Œnon-friendå‡½æ•°èƒ½å¯¼è‡´è¾ƒå¤§å°è£…æ€§ï¼Œå› ä¸ºå®ƒä¸èƒ½å¢åŠ èƒ½å¤Ÿè®¿é—®classå†…ä¹‹privateå˜é‡çš„å‡½æ•°æ•°é‡ã€‚</strong> å› æ­¤åº”å°½é‡ä»¥non-memberå‡½æ•°ä»£æ›¿memberå‡½æ•°ã€‚</p>
<p>ä¸€èˆ¬çš„ï¼Œå¯ä»¥å°†ä»¥ä¸ŠclearBrowserå‡½æ•°æˆä¸ºæŸå·¥å…·ç±»untity classçš„ä¸€ä¸ªstatic memberå‡½æ•°ï¼Œåªè¦å®ƒä¸æ˜¯WebBrowserçš„ä¸€éƒ¨åˆ†æˆ–å…¶friendï¼Œå°±ä¸ä¼šå½±å“WebBrowerçš„privateæˆå‘˜çš„å°è£…æ€§ã€‚<br><strong>åœ¨C++ä¸­ä¸€ä¸ªæ¯”è¾ƒè‡ªç„¶çš„åšæ³•æ˜¯å°†ä¸¤è€…æ”¾åœ¨åŒä¸€å‘½åç©ºé—´ä¸­</strong></p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"> <span class="token keyword">namespace</span> WebBrowserStuff <span class="token punctuation">&#123;</span> 
    <span class="token keyword">class</span> <span class="token class-name">WebBrowser</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span> 
    <span class="token keyword">void</span> <span class="token function">clearBrowser</span><span class="token punctuation">(</span>WebBrowser<span class="token operator">&amp;</span> wb<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">&#125;</span> </code></pre>
<p>ä½¿ç”¨namespace <strong>åŸå› åœ¨äºnamespaceå¯ä»¥è·¨è¶Šå¤šä¸ªæºç æ–‡ä»¶è€Œclassä¸èƒ½</strong> ã€‚ä½¿ç”¨namespaceå¯ä»¥æå‡æ‰©å±•æ€§è€Œåˆé¿å…ç¼–è¯‘ä¾èµ–ï¼Œå¦‚ä¸‹</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// å¤´æ–‡ä»¶ webbrowser.h è¿™ä¸ªå¤´æ–‡ä»¶é’ˆå¯¹class WebBrowserè‡ªèº« </span>
<span class="token keyword">namespace</span> WebBrowserStuff <span class="token punctuation">&#123;</span> 
<span class="token keyword">class</span> <span class="token class-name">WebBrowser</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// æ ¸å¿ƒæœºèƒ½ </span>
<span class="token punctuation">&#125;</span> 
 
<span class="token comment">// å¤´æ–‡ä»¶webbrowserbookmarks.h </span>
<span class="token keyword">namespace</span> WebBrowserStuff <span class="token punctuation">&#123;</span> 
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token comment">// ä¸ä¹¦ç­¾ç›¸å…³çš„ä¾¿åˆ©å‡½æ•° </span>
<span class="token punctuation">&#125;</span> 
 
<span class="token comment">// å¤´æ–‡ä»¶ webbrowsercookies.h </span>
<span class="token keyword">namespace</span> WebBrowserStuff <span class="token punctuation">&#123;</span> 
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token comment">// ä¸cookieç›¸å…³çš„ä¾¿åˆ©å‡½æ•° </span>
<span class="token punctuation">&#125;</span> </code></pre>
<p>ä»¥ä¸Šï¼ŒæŠŠæ ¸å¿ƒWebBrowser, ä¹¦ç­¾ç›¸å…³ä¾¿åˆ©å‡½æ•°ï¼Œ cookieç›¸å…³ä¾¿åˆ©å‡½æ•°æ”¾åœ¨ä¸‰ä¸ªå¤´æ–‡ä»¶ã€‚<br><strong>éœ€è¦å“ªä¸€ä¸ªå°±#includeå“ªä¸€ä¸ªï¼Œé™ä½å¤šä¸ªæ–‡ä»¶çš„ç¼–è¯‘ç›¸ä¾å…³ç³»</strong> ã€‚</p>
<p>ä¸‰ä¸ªå‡½æ•°æ”¾åœ¨åŒä¸€ä¸ªnamespaceä¸­ï¼Œ <strong>é€šè¿‡namespace å¯ä»¥è½»æ¾æ‰©å±•ä¾¿åˆ©å‡½æ•°</strong> ã€‚</p>
<p>å®é™…ä¸Š <strong>ä»¥ä¸Šæ­£æ˜¯C++æ ‡å‡†ç¨‹åºåº“çš„ç»„ç»‡æ–¹å¼</strong> ï¼Œ æ ‡å‡†åº“æœ‰å¤§é‡å¤´æ–‡ä»¶ä¾‹å¦‚ &lt;vector&gt; &lt;alogrithm&gt; &lt;memory&gt;ç­‰ï¼ŒåŒæ—¶æ¯ä¸ªå¤´æ–‡ä»¶å£°æ˜äº†stdå‘½åç©ºé—´ç›¸å…³æœºèƒ½ã€‚å½“ç”¨æˆ·ä½¿ç”¨Liståªéœ€è¦include<List>ä»è€Œåªå¯¹ä½¿ç”¨çš„å°éƒ¨åˆ†ç³»ç»Ÿå½¢æˆäº†ç¼–è¯‘ç›¸ä¾ã€‚è€Œé€šè¿‡å£°æ˜stdå¯ä»¥è½»æ¾æ‰©å±•æ ‡å‡†åº“æ–‡ä»¶çš„æœºèƒ½ã€‚è€Œclasså¿…é¡»æ•´ä½“å®šä¹‰ï¼Œä¸èƒ½åˆ‡å‰²ä¸ºç‰‡ç‰‡æ®µæ®µï¼Œ<strong>å› ä¸ºclassä¸èƒ½ç›´æ¥åœ¨æ–‡ä»¶å¤–è®¿é—®ã€‚</strong></p>
<p> <strong>åˆ©ç”¨namespace å®¢æˆ·ä¹Ÿå¯ä»¥è½»æ¾æ‰©å±•è¿™äº›åŠŸèƒ½</strong><br>ï¼Œä¾‹å¦‚WebBrowserå®¢æˆ·å†³å®šå†™å½±åƒä¸‹è½½ç›¸å…³ä¾¿åˆ©å‡½æ•°ï¼Œåªéœ€è¦åœ¨WebBrowserStuffå‘½åç©ºé—´å†…å»ºç«‹ä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œå†…å«å‡½æ•°ç”Ÿå‘½å³å¯ã€‚<br><strong>classä¸èƒ½æä¾›è¿™ä¸ªæ€§è´¨ï¼Œå› ä¸ºclassæ˜¯ä¸èƒ½è¢«å®¢æˆ·æ‰©å±•çš„ï¼Œæ´¾ç”Ÿå‡ºçš„drived classä¹Ÿæ˜¯æ¬¡çº§èº«ä»½ï¼Œæ— æ³•è®¿é—®base<br>classè¢«å°è£…çš„æˆåˆ†ã€‚</strong></p>
<h3 id="æ¡æ¬¾24ï¼š-å¦‚æœæŸä¸ªå‡½æ•°çš„å‚æ•°å¯èƒ½å‡ºç°ç±»å‹è½¬æ¢ï¼Œè®¾ç½®è¿™ä¸ªå‡½æ•°ä¸ºnon-member"><a href="#æ¡æ¬¾24ï¼š-å¦‚æœæŸä¸ªå‡½æ•°çš„å‚æ•°å¯èƒ½å‡ºç°ç±»å‹è½¬æ¢ï¼Œè®¾ç½®è¿™ä¸ªå‡½æ•°ä¸ºnon-member" class="headerlink" title="æ¡æ¬¾24ï¼š å¦‚æœæŸä¸ªå‡½æ•°çš„å‚æ•°å¯èƒ½å‡ºç°ç±»å‹è½¬æ¢ï¼Œè®¾ç½®è¿™ä¸ªå‡½æ•°ä¸ºnon-member"></a>æ¡æ¬¾24ï¼š å¦‚æœæŸä¸ªå‡½æ•°çš„å‚æ•°å¯èƒ½å‡ºç°ç±»å‹è½¬æ¢ï¼Œè®¾ç½®è¿™ä¸ªå‡½æ•°ä¸ºnon-member</h3><p><strong>ä»¤classæ”¯æŒéšå¼è½¬æ¢é€šå¸¸æ˜¯ä¸€ä¸ªç³Ÿç³•çš„æ³¨æ„ï¼Œä½†ä¹Ÿæœ‰ä¾‹å¤–ï¼Œå¸¸è§çš„æ˜¯æ•°å€¼ç±»å‹ã€‚</strong><br>ä¾‹å¦‚intéšå¼è½¬æ¢ä¸ºdoubleã€‚æ‰€è°“éšå¼è½¬æ¢ï¼Œä¸€èˆ¬å‡ºç°åœ¨èµ‹å€¼ï¼Œæ‹·è´ï¼Œåˆå§‹åŒ–ä¸­ï¼Œå³ä¸ç»™ç³»ç»Ÿæç¤ºå…·ä½“ç±»å‹ç›´æ¥è½¬æ¢ã€‚</p>
<p>ä»¥æ“ä½œç¬¦å·operatorä¸ºä¾‹ï¼š</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Rational</span> <span class="token punctuation">&#123;</span> 
<span class="token keyword">public</span><span class="token operator">:</span> 
    <span class="token comment">// æ„é€ å‡½æ•°ä¸ä¸ºexplicitï¼Œå…è®¸int-to-Rationaléšå¼è½¬æ¢ </span>
    <span class="token function">Rational</span><span class="token punctuation">(</span><span class="token keyword">int</span> number <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> denominator <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword">int</span> <span class="token function">numerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span> 
    <span class="token keyword">int</span> <span class="token function">denominator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span> 
<span class="token keyword">private</span><span class="token operator">:</span> 
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>     </code></pre>
<p>è®¾ç½®ä¸€ä¸ªoperator* å†™æˆRationalæˆå‘˜å‡½æ•°</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Rational</span> <span class="token punctuation">&#123;</span> 
<span class="token keyword">public</span><span class="token operator">:</span> 
    <span class="token keyword">const</span> Rational <span class="token keyword">operator</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Rational<span class="token operator">&amp;</span> rhs<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span> 
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span> 
 
<span class="token comment">// æµ‹è¯• </span>
Rational <span class="token function">oneEighth</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
Rational <span class="token function">oneHalf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
Rational result <span class="token operator">=</span> oneHalf <span class="token operator">*</span> oneEighth <span class="token comment">// ok </span>
result <span class="token operator">=</span> oneHalf <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token comment">// å¾ˆå¥½ï¼Œ å‘ç”Ÿéšå¼è½¬æ¢ï¼Œconst Rational temp(2); </span>
result <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> oneHalf<span class="token punctuation">;</span>    <span class="token comment">// é”™è¯¯ </span></code></pre>
<p>ä¸Šè¿°æ··åˆè¿ç®—åªæœ‰ä¸€åŠè¡Œå¾—é€šã€‚åŸå› åœ¨äºä¸å­˜åœ¨2.operator*(oneHalf)ã€‚è€Œå‰è€…å‡ºç°äº†éšå¼è½¬æ¢int -&gt;Rationalã€‚å¦‚æœè®¾ç½®æ„é€ å‡½æ•°ä¸ºexplicitï¼Œåˆ™éƒ½ä¸å¯ä»¥é€šè¿‡ç¼–è¯‘ã€‚</p>
<p>è§£å†³ä¸Šè¿°é—®é¢˜åŠæ³•ï¼Œ <strong>ä½¿ç”¨non-memberå‡½æ•°è§£å†³å¯èƒ½å­˜åœ¨çš„éšå¼è½¬æ¢é—®é¢˜ã€‚</strong></p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp">    <span class="token keyword">class</span> <span class="token class-name">Rational</span> <span class="token punctuation">&#123;</span> 
    <span class="token keyword">public</span><span class="token operator">:</span> 
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span> 
    <span class="token keyword">const</span> Rational <span class="token keyword">operator</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Rational<span class="token operator">&amp;</span> lhs<span class="token punctuation">,</span> <span class="token keyword">const</span> Rational<span class="token operator">&amp;</span> rhs<span class="token punctuation">)</span> 
    <span class="token punctuation">&#123;</span> 
        <span class="token keyword">return</span> <span class="token function">Rational</span> <span class="token punctuation">(</span>lhs<span class="token punctuation">.</span><span class="token function">numerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> rhs<span class="token punctuation">.</span><span class="token function">numerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> lhs<span class="token punctuation">.</span><span class="token function">denominator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> rhs<span class="token punctuation">.</span><span class="token function">denominator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">&#125;</span> 
     
    result <span class="token operator">=</span> oneHalf <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token comment">//  </span>
    result <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> oneHalf<span class="token punctuation">;</span>    <span class="token comment">// å¯ä»¥é€šè¿‡ç¼–è¯‘ </span>
```   

### æ¡æ¬¾<span class="token number">25</span>ï¼šè€ƒè™‘å†™å‡ºä¸€ä¸ªä¸æŠ›å¼‚å¸¸çš„swapå‡½æ•°

è¯¥æ¡æ¬¾ä¸»è¦è®²å¦‚ä½•å†™ä¸€ä¸ªå¥½çš„swapå‡½æ•°ï¼Œæ‰€è°“swapç½®æ¢ä¸¤ä¸ªå¯¹è±¡å€¼ã€‚ç¼ºçœæƒ…å†µä¸‹swapåŠ¨ä½œå¯ç”±æ ‡å‡†ç¨‹åºåº“æä¾›çš„swapç®—æ³•å®Œæˆï¼Œå¦‚ä¸‹ã€‚
```cpp    
    <span class="token keyword">namespace</span> std <span class="token punctuation">&#123;</span> 
        <span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span> 
        <span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>T<span class="token operator">&amp;</span> a<span class="token punctuation">,</span> T<span class="token operator">&amp;</span> b<span class="token punctuation">)</span>    <span class="token comment">// ç½®æ¢aå’Œbçš„å€¼ </span>
        <span class="token punctuation">&#123;</span> 
            T <span class="token function">temp</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> 
            a <span class="token operator">=</span> b<span class="token punctuation">;</span> 
            b <span class="token operator">=</span> temp<span class="token punctuation">;</span> 
        <span class="token punctuation">&#125;</span> 
    <span class="token punctuation">&#125;</span> </code></pre>
<p>ä»¥ä¸Šè¦æ±‚Tæ”¯æŒcopyingï¼ˆä¸€ä¸ªæ‹·è´æ„é€ å‡½æ•°ï¼Œä¸¤ä¸ªcopy<br>assignmentæ“ä½œç¬¦ï¼‰ã€‚ä½†è¿™ç§å®ç°æ–¹æ³•å¯¹æŸäº›ç±»å‹è€Œè¨€æµªè´¹å¤ªå¤šèµ„æºï¼Œç‰¹åˆ«æ˜¯å¯¹pimplæ‰‹æ³•ã€‚</p>
<p>æ‰€è°“ <strong>pimplæ‰‹æ³•(pointer to implementation)ï¼Œè¡¨ç¤ºæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å«çœŸæ­£æ•°æ®ï¼Œå¤–å±‚å¦‚åŒä¸€ä¸ªå£³ã€‚</strong> ä¾‹å¦‚</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">WidgetImpl</span> <span class="token punctuation">&#123;</span> 
<span class="token keyword">public</span><span class="token operator">:</span> 
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
<span class="token keyword">private</span><span class="token operator">:</span> 
    <span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">;</span> 
    std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">></span> v<span class="token punctuation">;</span> 
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span> 
<span class="token keyword">class</span> <span class="token class-name">Widget</span> <span class="token punctuation">&#123;</span> 
<span class="token keyword">public</span><span class="token operator">:</span> 
    <span class="token function">Widget</span><span class="token punctuation">(</span><span class="token keyword">const</span> Widget<span class="token operator">&amp;</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    Widget<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Widget<span class="token operator">&amp;</span> rhs<span class="token punctuation">)</span> 
    <span class="token punctuation">&#123;</span> 
        <span class="token operator">*</span>pImpl <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span>rhs<span class="token punctuation">.</span>pImpl<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">&#125;</span> 
<span class="token keyword">private</span><span class="token operator">:</span> 
    WidgetImpl<span class="token operator">*</span> pImpl<span class="token punctuation">;</span>    <span class="token comment">// æŒ‡é’ˆï¼ŒæŒ‡å‘çœŸæ­£æ•°æ®å¯¹è±¡ WidgetImpl </span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span> </code></pre>
<p>ä»¥ä¸Šï¼Œ <strong>ç½®æ¢ä¸¤ä¸ªWidgetImplå¯¹è±¡å…¶å®å†…éƒ¨åªéœ€è¦äº¤æ¢æŒ‡é’ˆ</strong><br>ã€‚ä½†ç¼ºçœçš„swapä¼šå¤åˆ¶WidgetImplå’ŒWidgetå†…éƒ¨çš„æ‰€æœ‰å¯¹è±¡ï¼Œæ•ˆç‡å¾ˆä½ã€‚è¿™æ—¶ä¸€èˆ¬æˆ‘ä»¬éœ€è¦æ–°è®¾è®¡swapå‡½æ•°ã€‚</p>
<p>ä¸€èˆ¬çš„ï¼Œç”±äºå†…éƒ¨æŒ‡é’ˆpImplä¸ºprivateæˆå‘˜ï¼Œåªèƒ½è¢«memberå’Œfriendå‡½æ•°è®¿é—®ã€‚æ‰€ä»¥æˆ‘ä»¬ä»¤Widgetå£°æ˜ä¸€ä¸ªswapçš„publicæˆå‘˜å‡½æ•°åšçœŸæ­£çš„ç½®æ¢å·¥ä½œï¼Œç„¶å<br><strong>å°†std::swapå…¨ç‰¹åŒ–ï¼Œä»¤å®ƒè°ƒç”¨swapæˆå‘˜å‡½æ•°</strong> ã€‚</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Widget</span> <span class="token punctuation">&#123;</span> 
<span class="token keyword">public</span><span class="token operator">:</span> 
    <span class="token function">Widget</span><span class="token punctuation">(</span><span class="token keyword">const</span> Widget<span class="token operator">&amp;</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    Widget<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Widget<span class="token operator">&amp;</span> rhs<span class="token punctuation">)</span> 
    <span class="token punctuation">&#123;</span> 
        <span class="token operator">*</span>pImpl <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span>rhs<span class="token punctuation">.</span>pImpl<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">&#125;</span> 
<span class="token keyword">private</span><span class="token operator">:</span> 
    WidgetImpl<span class="token operator">*</span> pImpl<span class="token punctuation">;</span>    <span class="token comment">// æŒ‡é’ˆï¼ŒæŒ‡å‘çœŸæ­£æ•°æ®å¯¹è±¡ WidgetImpl </span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span> 
<span class="token keyword">namespace</span> std <span class="token punctuation">&#123;</span> 
    <span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token operator">></span>    <span class="token comment">// stdçš„swapå‡½æ•°ç‰¹åŒ– </span>
    <span class="token keyword">void</span> <span class="token generic-function"><span class="token function">swap</span><span class="token generic class-name"><span class="token operator">&lt;</span>Widget<span class="token operator">></span></span></span><span class="token punctuation">(</span>Widget<span class="token operator">&amp;</span> a<span class="token punctuation">,</span> Widget<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> 
    <span class="token punctuation">&#123;</span>    a<span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> 
<span class="token punctuation">&#125;</span> 
 
<span class="token keyword">namespace</span> std <span class="token punctuation">&#123;</span> 
    <span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span>    <span class="token comment">// é”™è¯¯ï¼Œ C++ä¸æ”¯æŒå‡½æ•°å¯¹class templateç‰¹åŒ– </span>
    <span class="token keyword">void</span> <span class="token generic-function"><span class="token function">swap</span><span class="token generic class-name"><span class="token operator">&lt;</span>Widget<span class="token operator">&lt;</span>T<span class="token operator">>></span></span></span><span class="token punctuation">(</span>Widget<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">&amp;</span> a<span class="token punctuation">,</span> Widget<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">&amp;</span> b<span class="token punctuation">)</span> 
    <span class="token punctuation">&#123;</span>    a<span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> 
<span class="token punctuation">&#125;</span></code></pre>
<p>ä»¥ä¸Šï¼Œ <strong>Widgetå’ŒWidgetImplå‡ä¸ºclass,åªéœ€è¦åœ¨stdä¸­ç‰¹åŒ–swapå‡½æ•°å³å¯</strong><br>ã€‚è€Œå½“Widgetå’ŒWidgetImplä¸ºtemplateæ—¶ï¼Œå°±ä¸èƒ½ç”¨ç‰¹åŒ–äº†ã€‚å› ä¸ºC++ä¸æ”¯æŒfunctionå¯¹ templateåç‰¹åŒ–ã€‚è§£å†³åŠæ³•æ˜¯ä½¿ç”¨é‡è½½</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Widget</span> <span class="token punctuation">&#123;</span> 
<span class="token keyword">public</span><span class="token operator">:</span> 
    <span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>Widget<span class="token operator">&amp;</span> other<span class="token punctuation">)</span> 
    <span class="token punctuation">&#123;</span> 
        <span class="token keyword">using</span> std<span class="token double-colon punctuation">::</span>swap<span class="token punctuation">;</span> 
        <span class="token function">swap</span><span class="token punctuation">(</span>pImpl<span class="token punctuation">,</span> other<span class="token punctuation">.</span>pImpl<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ä½¿ç”¨ç¼ºçœswapå‡½æ•°ç½®æ¢æŒ‡é’ˆ </span>
    <span class="token punctuation">&#125;</span> 
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span> 
<span class="token keyword">namespace</span> std <span class="token punctuation">&#123;</span> 
    <span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span> 
    <span class="token keyword">void</span> <span class="token function">swap</span> <span class="token punctuation">(</span>Widget<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">&amp;</span> a<span class="token punctuation">,</span> Widget<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">&amp;</span> b<span class="token punctuation">)</span> 
    <span class="token punctuation">&#123;</span>    a<span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> 
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre>
<p>ä»¥ä¸Šé‡è½½stdå‘½åç©ºé—´çš„swapå‡½æ•°ï¼Œ <strong>å½“ä¼ å…¥Widgetæ—¶ï¼Œä¼šè°ƒç”¨ä»¥ä¸Šå†™çš„swapï¼Œå…¶ä»–è°ƒç”¨é»˜è®¤ç¼ºçœçš„swapå‡½æ•°</strong>ã€‚è¿™é‡Œä½¿ç”¨é‡è½½è€Œä¸æ˜¯æ¨¡æ¿ç‰¹åŒ–ï¼ŒåŸå› æ˜¯ <strong>C++åªå…è®¸å¯¹classtemplateåç‰¹åŒ–ï¼Œåœ¨function templateä¸Šè¡Œä¸é€šã€‚</strong></p>
<p>ä¸€èˆ¬è€Œè¨€ï¼Œé‡è½½function templateæ²¡æœ‰é—®é¢˜ã€‚ä½†stdå†…å®¹å®Œå…¨ç”±C++æ ‡å‡†å§”å‘˜ä¼šå†³å®šï¼Œå³ <strong>ä¸å¯ä»¥æ·»åŠ æ–°çš„template, class,functionåˆ°stdé‡Œå¤´</strong> ï¼Œä½†å®¢æˆ·å¯ä»¥å…¨ç‰¹åŒ–stdé‡Œé¢çš„templateã€‚</p>
<p>å› æ­¤æˆ‘ä»¬å£°æ˜ä¸€ä¸ªnon-member swapè®©å®ƒè°ƒç”¨member swapï¼Œä½†ä¸å†å°†non-member<br>swapå£°æ˜ä¸ºstd::swapçš„ç‰¹åŒ–ç‰ˆæˆ–è€…é‡è½½ç‰ˆæœ¬ã€‚è€Œæ˜¯ç½®äºæ–°çš„å‘½åç©ºé—´WidgetStuffå†…ã€‚</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">namespace</span> WidgetStuff <span class="token punctuation">&#123;</span> 
    <span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span>  <span class="token comment">// å†…å«swapæˆå‘˜å‡½æ•° </span>
    <span class="token keyword">class</span> <span class="token class-name">Widget</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>   
 
    <span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span> 
    <span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>Widget<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">&amp;</span> a<span class="token punctuation">,</span> Widget<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">&amp;</span> b<span class="token punctuation">)</span> 
    <span class="token punctuation">&#123;</span>    a<span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">&#125;</span> 
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    
 
<span class="token comment">// è°ƒç”¨ </span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span> 
<span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span>T<span class="token operator">&amp;</span> obj1<span class="token punctuation">,</span> T<span class="token operator">&amp;</span> obj2<span class="token punctuation">)</span> 
<span class="token punctuation">&#123;</span> 
    <span class="token keyword">using</span> std<span class="token double-colon punctuation">::</span>swap<span class="token punctuation">;</span> 
    <span class="token function">swap</span><span class="token punctuation">(</span>obj1<span class="token punctuation">,</span> obj2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ä¼šè‡ªåŠ¨å¯¹Tå‹å¯¹è±¡è°ƒç”¨æœ€ä½³swapç‰ˆæœ¬ </span>
<span class="token punctuation">&#125;</span> </code></pre>
<p>è™½ç„¶swapå‡½æ•°æ²¡æœ‰å®šä¹‰åœ¨stdå‘½åç©ºé—´å†…ï¼Œä½†æ˜¯ä¸å¦¨ç¢C++åç§°æŸ¥æ‰¾è§„åˆ™ã€‚å³å‚æ•°ä¸ºWidget<T>&amp;æ—¶ä¼šä¼˜å…ˆè°ƒç”¨å‘½åç©ºé—´WidgetStuffçš„swapï¼Œè€Œä¸æ˜¯ç¼ºçœswapã€‚ä½†æ³¨æ„swapå‰ä¸åº”è¯¥æ·»åŠ ä»»ä½•ä¿®é¥°ç¬¦ï¼Œä¾‹å¦‚std::swapã€‚è¿™æ—¶å€™<br><strong>C++ä¼šè‡ªåŠ¨æŒ‘é€‰æœ€åˆé€‚çš„è¿›è¡Œè°ƒç”¨</strong> ã€‚</p>
<p>ç»¼ä¸Šï¼š</p>
<ol>
<li>å¦‚æœswapçš„ç¼ºçœå®ç°å¯¹ä½ çš„classæˆ–class templateæä¾›å¯ä»¥æ¥å—çš„æ•ˆç‡ï¼Œç›´æ¥ä½¿ç”¨ç¼ºçœswapå³å¯ã€‚ </li>
<li>å¦‚æœswapç¼ºçœç‰ˆçš„æ•ˆç‡ä¸è¶³ï¼ˆåŸºæœ¬æ„å‘³ç€classæˆ–templateä½¿ç”¨äº†æŸç§pimplæ‰‹æ³•ï¼‰åˆ™ </li>
</ol>
<ul>
<li>æä¾›ä¸€ä¸ª <strong>public swapæˆå‘˜å‡½æ•°</strong> ï¼Œé«˜æ•ˆç½®æ¢å¯¹è±¡ï¼Œä¸”è¯¥å‡½æ•°ä¸èƒ½æŠ›å‡ºå¼‚å¸¸ </li>
<li>åœ¨classæˆ–template <strong>å‘½åç©ºé—´å†…æä¾›ä¸€ä¸ªnon-member swap</strong> ï¼Œå¹¶ä»¤å®ƒè°ƒç”¨ä¸Šè¿°swapæˆå‘˜å‡½æ•°ã€‚ </li>
<li>å¯¹äº <strong>classï¼Œç›´æ¥å¯¹non-member swapè¿›è¡Œå…¨ç‰¹åŒ–ï¼›å¯¹äºtemplateï¼Œå¯¹non-member swapè¿›è¡Œé‡è½½ï¼Œå¹¶æ”¾åœ¨å…¶ä»–å‘½åç©ºé—´ï¼Œ</strong></li>
</ul>
</div></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/effective%20cpp/2021-02-15-5%E5%AE%9E%E7%8E%B0/" rel="prev" title="effectivecpp:å®ç°"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">effectivecpp:å®ç°</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/effective%20cpp/2021-02-03-3%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/" rel="next" title="effectivecpp:èµ„æºç®¡ç†"><span class="post-nav-text">effectivecpp:èµ„æºç®¡ç†</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>å¦‚æœæ‚¨æœ‰ä»»ä½•å…³äºåšå®¢å†…å®¹çš„ç›¸å…³è®¨è®ºï¼Œæ¬¢è¿å‰å¾€ <a href="https://github.com/YunYouJun/yunyoujun.github.io/discussions" target="_blank">GitHub Discussions</a> ä¸æˆ‘äº¤æµã€‚</span><br></div><div id="valine-container"></div><script>Yun.utils.getScript("https://cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js", () => {
  const valineConfig = {"enable":true,"appId":"K4LElSwpTJaHOOTTU6mNGCyr-gzGzoHsz","appKey":"x3d4Sv6rdTYOECKqkxg9r905","placeholder":"å¡«å†™é‚®ç®±ï¼Œå¯ä»¥æ”¶åˆ°å›å¤é€šçŸ¥å“¦ï½","avatar":null,"pageSize":10,"visitor":false,"highlight":true,"recordIP":false,"enableQQ":true,"meta":["nick","mail","link"],"el":"#valine-container","lang":"zh-cn"}
  valineConfig.path = "/effective%20cpp/2021-02-09-4%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%A3%B0%E6%98%8E/"
  new Valine(valineConfig)
}, window.Valine);</script></div></main><footer class="sidebar-translate" id="footer"><div class="beian"><a rel="noopener" href="https://beian.miit.gov.cn/" target="_blank">èŒICPå¤‡666666å·</a></div><div class="copyright"><span>&copy; 2020 â€“ 2021 </span><a class="with-love" id="animate" target="_blank" rel="noopener" href="https://sponsors.yunyoujun.cn" title="äº‘æ¸¸å›çš„èµåŠ©è€…ä»¬"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></a><span class="author"> larry</span></div><div class="powered"><span>ç”± <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> é©±åŠ¨ v5.4.0</span><span class="footer-separator">|</span><span>ä¸»é¢˜ - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.6.3</span></div><div class="live_time"><span>æœ¬åšå®¢å·²èŒèŒå“’åœ°è¿è¡Œ</span><span id="display_live_time"></span><span class="moe-text">(â—'â—¡'â—)</span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2019-04-12T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " å¤© " + passHour + " å°æ—¶ " + passMinute + " åˆ† " + passSecond + " ç§’";
}
blog_live_time();
</script></div></footer><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#6200ee" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="æœç´¢"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search-line"></use></svg></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script defer src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script><script defer src="https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script><script defer src="/js/search/algolia-search.js"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close-line"></use></svg></span></div><div class="search-input-container"></div><div class="algolia-results"><div id="algolia-stats"></div><div id="algolia-hits"></div><div class="algolia-pagination" id="algolia-pagination"></div></div></div></div><!-- hexo injector body_end start --><script src="/js/tag-common/index.js"></script><!-- hexo injector body_end end --></body></html>